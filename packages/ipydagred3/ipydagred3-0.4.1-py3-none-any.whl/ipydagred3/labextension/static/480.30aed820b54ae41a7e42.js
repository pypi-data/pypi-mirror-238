"use strict";(self.webpackChunkipydagred3=self.webpackChunkipydagred3||[]).push([[480],{9118:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DagreD3Model=void 0;var r=i(4466),n=i(8657);class s extends r.DOMWidgetModel{static serializers={...r.DOMWidgetModel.serializers};static modelName="DagreD3Model";static modelModule="ipydagred3";static modelModuleVersion=n.MODULE_VERSION;static viewName="DagreD3View";static viewModule="ipydagred3";static viewModuleVersion=n.MODULE_VERSION;defaults(){return{...super.defaults(),_model_name:s.modelName,_model_module:s.modelModule,_model_module_version:s.modelModuleVersion,_view_name:s.viewName,_view_module:s.viewModule,_view_module_version:s.viewModuleVersion}}}t.DagreD3Model=s},4480:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(4466),n=i(8657);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(s=function(e){return e?i:t})(e)}const a={activate:function(e,t){t.registerWidget({exports:async()=>await Promise.resolve().then((()=>function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=s(t);if(i&&i.has(e))return i.get(e);var r={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,i&&i.set(e,r),r}(i(1367)))),name:"ipydagred3",version:n.MODULE_VERSION})},autoStart:!0,id:"ipydagred3:plugin",requires:[r.IJupyterWidgetRegistry]};t.default=a},8657:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_VERSION=void 0;const r=i(4147);t.MODULE_VERSION=r.version},553:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DagreD3View=void 0;var r,n=i(4466),s=i(7903),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=l(t);if(i&&i.has(e))return i.get(e);var r={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}return r.default=e,i&&i.set(e,r),r}(i(6289)),o=(r=i(3493))&&r.__esModule?r:{default:r};function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(l=function(e){return e?i:t})(e)}i(7549);class d extends n.DOMWidgetView{graph;svg;inner;tooltip;renderer;throttled_render;queued;render(){this.model.on("msg:custom",this._handle_message,this),this.el.classList.add("dagred3"),this.tooltip=document.querySelector("#dagred3tooltip"),this.tooltip||(this.tooltip=document.createElement("div"),this.tooltip.id="dagred3tooltip",this.tooltip.style.visibility="hidden",this.tooltip.style.position="absolute",this.tooltip.style.zIndex="1000",document.body.appendChild(this.tooltip));const e=a.select(this.el);this.svg=e.append("svg"),this.inner=this.svg.append("g"),this.graph=new s.graphlib.Graph({directed:this.model.get("_graph").directed}),this.graph.setGraph({nodesep:this.model.get("_graph").attrs.nodesep||70,ranksep:this.model.get("_graph").attrs.ranksep||50,rankdir:this.model.get("_graph").attrs.rankdir||"TB",marginx:this.model.get("_graph").attrs.marginx||20,marginy:this.model.get("_graph").attrs.marginy||20});const t=this.model.get("_graph").attrs.height,i=this.model.get("_graph").attrs.width;t&&(this.svg.height=t),i&&(this.svg.width=i),this.renderer=new s.render,this.throttled_render=(0,o.default)((()=>this._render()),5),this.displayed.then((()=>{const e=a.zoom().on("zoom",(e=>{this.inner.attr("transform",e.transform)}));this.svg.call(e);const t=.75,i=this.el.offsetWidth,r=this.el.offsetHeight;this.svg.call(e.transform,a.zoomIdentity.translate((i-(this.graph.graph().width||0)*t)/2,(r-(this.graph.graph().height||0)*t)/2).scale(t)),this.graph_changed()}))}_render(){this.renderer(this.inner,this.graph);const e=a.select("#dagred3tooltip");this.inner.selectAll("g.node").on("click",((e,t)=>{this.send({event:"click",value:t})})).on("mouseover",(()=>e.style("visibility","visible"))).on("mousemove",((t,i)=>{e.text(this.graph.node(i).tooltip).style("top",t.pageY-10+"px").style("left",`${t.pageX+10}px`)})).on("mouseout",(()=>e.style("visibility","hidden")))}_handle_message(e){if("setNode"===e.type)this.setNode(e.source.name,e.source.attrs);else if("setEdge"===e.type)this.setEdge(e.source.v.name,e.source.w.name,e.source.attrs);else if("graph"===e.type){const t=this.graph.graph();t[e.attr]=e.value,this.graph.setGraph(t)}else"node"===e.type?this.setNode(e.source.name,e.source.attrs):"edge"===e.type&&this.setEdge(e.source.v.name,e.source.w.name,e.source.attrs);this.throttled_render()}setNode(e,t){this.graph.setNode(e,t)}setEdge(e,t,i){const r=a.select("#dagred3tooltip"),n=document.createElement("u");n.onmouseover=()=>r.style("visibility","visible"),n.onmouseout=()=>r.style("visibility","hidden"),n.onmousemove=e=>r.text(i.tooltip).style("top",e.pageY-10+"px").style("left",`${e.pageX+10}px`),n.onclick=()=>{this.send({event:"click",value:[e,t]})},n.innerHTML=i.label,i.label=n,i.labelType="html",this.graph.setEdge(e,t,i)}graph_changed(){const e=this.model.get("_graph"),t={compound:e.compound,directed:e.directed,multigraph:e.multigraph,...this.graph.graph()};this.graph.setGraph(t),e.nodes.forEach((e=>{this.setNode(e.name,e.attrs)})),e.edges.forEach((e=>{this.setEdge(e.v.name,e.w.name,e.attrs)})),this.throttled_render()}}t.DagreD3View=d},1367:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DagreD3Model",{enumerable:!0,get:function(){return r.DagreD3Model}}),Object.defineProperty(t,"DagreD3View",{enumerable:!0,get:function(){return n.DagreD3View}}),i(7549);var r=i(9118),n=i(553)},2760:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(8081),n=i.n(r),s=i(3645),a=i.n(s)()(n());a.push([e.id,"div.dagred3 {\n  min-height: 400px;\n  display: flex;\n  resize: both;\n  z-index: 2;\n}\n\ndiv.dagred3 > svg {\n  width: 100%;\n  padding-right: 5px;\n  display: block;\n  z-index: 1;\n}\n\n.dagred3 .node rect,\n.dagred3 .node circle,\n.dagred3 .node ellipse,\n.dagred3 .node polygon {\n  stroke: #555;\n  fill: #fff;\n}\n\n.dagred3 .edgePath path {\n  stroke: #555;\n  fill: transparent;\n  stroke-width: 1.5px;\n}\n\n.dagred3 .edgeLabel foreignObject {\n  overflow: visible;\n}\n\n.dagred3 .edgeLabel foreignObject u {\n  text-decoration: none;\n}\n\n.dagred3 .node text {\n  pointer-events: none;\n}\n\n\ndiv#dagred3tooltip {\n  background-color: rgba(255, 255, 255, .8);\n  border: 1px solid #555;\n  padding: 15px;\n}",""]);const o=a},7549:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var r=i(3379),n=i.n(r),s=i(7795),a=i.n(s),o=i(569),l=i.n(o),d=i(3565),p=i.n(d),c=i(9216),u=i.n(c),g=i(4589),h=i.n(g),m=i(2760),b={};b.styleTagTransform=h(),b.setAttributes=p(),b.insert=l().bind(null,"head"),b.domAPI=a(),b.insertStyleElement=u(),n()(m.Z,b);const f=m.Z&&m.Z.locals?m.Z.locals:void 0},4147:e=>{e.exports=JSON.parse('{"name":"ipydagred3","version":"0.4.1","description":"A Custom Jupyter Widget Library","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/timkpaine/ipydagred3","bugs":{"url":"https://github.com/timkpaine/ipydagred3/issues"},"license":"Apache-2.0","author":{"name":"Tim Paine","email":"t.paine154@gmail.com"},"main":"lib/index.js","repository":{"type":"git","url":"https://github.com/timkpaine/ipydagred3"},"scripts":{"build:babel":"babel src/ --source-maps --out-dir lib/","build:labextension":"jupyter labextension build .","build:nbextension":"webpack --mode=production","build":"npm-run-all clean build:*","clean":"npm-run-all clean:*","clean:lib":"rimraf lib","clean:labextension":"rimraf ../ipydagred3/labextension","clean:nbextension":"rimraf ../ipydagred3/nbextension/static/index.js ../ipydagred3/nbextension/static/index.js.map","fix":"yarn lint --fix","lint":"eslint -c .eslintrc.js --ext .js src/ tests/","prepack":"npm run build","test":"jest --coverage --collectCoverageFrom=src/*.{js}","watch":"npm-run-all -p watch:*","watch:lib":"yarn build:lib --watch","watch:nbextension":"webpack --watch"},"jupyterlab":{"extension":"lib/plugin.js","outputDir":"../ipydagred3/labextension","discovery":{"server":{"base":{"name":"ipydagred3"},"managers":["pip"]}}},"dependencies":{"@jupyter-widgets/base":"^6.0.6","d3":"^7.8.5","dagre-d3-es":"^7.0.10","lodash":"^4.17.21"},"devDependencies":{"@babel/cli":"^7.23.0","@babel/core":"^7.23.2","@babel/eslint-parser":"^7.22.15","@babel/preset-env":"^7.23.2","@jupyterlab/builder":"^4.0.7","@lumino/application":"^2.2.1","@lumino/widgets":"^2.3.0","babel-jest":"^29.7.0","css-loader":"^6.8.1","eslint":"^8.52.0","eslint-config-airbnb":"^19.0.2","eslint-config-airbnb-base":"^15.0.0","eslint-config-prettier":"^9.0.0","eslint-plugin-import":"^2.29.0","eslint-plugin-jest":"^27.6.0","eslint-plugin-jsdoc":"^46.8.2","eslint-plugin-json":"^3.1.0","eslint-plugin-prefer-arrow":"^1.2.3","eslint-plugin-prettier":"^5.0.1","eslint-plugin-unicorn":"^49.0.0","expect.js":"^0.3.1","fs-extra":"^11.1.1","isomorphic-fetch":"^3.0.0","jest":"^29.7.0","jest-environment-jsdom":"^29.7.0","jest-junit":"^16.0.0","jest-transform-css":"^6.0.1","mkdirp":"^3.0.1","mocha":"^10.2.0","npm-run-all":"^4.1.3","prettier":"^3.0.3","rimraf":"^5.0.5","source-map-loader":"^4.0.0","style-loader":"^3.3.3","webpack":"^5.89.0","webpack-cli":"^5.1.4"},"resolutions":{"kind-of":"^6.0.3"}}')}}]);