[build-system]
requires = ["setuptools>=61.0", "setuptools-scm"]
build-backend= "setuptools.build_meta"

[project]
name = "smodex"
version = "1.0.1b0"
description = "A Python package for understanding the evolution of soil moisture and soil moisture anomalies"
readme = "README.md"
authors = [{ name  = "Rufai Omowunmi Balogun", email = "rbalogun@eurac.edu"}]
license = {file = "LICENSE"}
classifiers = [
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.8",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "License :: OSI Approved :: MIT No Attribution License (MIT-0)",
    "Operating System :: OS Independent",
    "Development Status :: 2 - Pre-Alpha",
    "Intended Audience :: Developers",
    "Intended Audience :: Education",
    "Intended Audience :: Science/Research",
    "Topic :: Software Development :: Libraries :: Python Modules",
    "Topic :: Scientific/Engineering :: Hydrology",
    "Topic :: Scientific/Engineering :: Information Analysis"
]
keywords = ["anomalies", "soil moisture", "climatology"]
dependencies = []
requires-python=">=3.7"

[project.optional-dependencies]
dev = ["black", "bumpver", "isort", "mypy", "pip-tools", "pytest", "ruff"]

[project.urls]
Homepage="https://gitlab.inf.unibz.it/REMSEN/smodex"

[project.scripts]
smodex = "smodex.__main__:main"

[tool.setuptools.packages.find]
where = ["src"]
include = ["smodex*"]
exclude = ["smodex.tests*"]


[tool.black]
line-length = 100
skip-string-normalization = false
skip-magin-trailing-comma = false
extend-exclude = '''
/(
    | docs
    | setup.py
)/
'''

[tool.isort]
sections = [
    "FUTURE", 
    "STDLIB",
    "THIRDPARTY", 
    "FIRSTPARTY",
    "LOCALFOLDER"
]
default_section = "FIRSTPARTY"
known_third_party = [
    "numpy",
    "pandas",
    "xarray",
    "matplotlib"
]
known_first_party = []
known_local_folder = []
multi_line_output = 3
lines_after_imports = 2
force_single_line = true
use_parentheses = true
ensure_newline_before_comments = true
line_length = 100
include_trailing_comma = true 
skip_glob = [
    "docs/*",
    "setup.py"
]


[tool.mypy]
# configuring warnings
warn_unused_configs = true
warn_redundant_casts = true 
warn_unused_ignores = true
warn_no_return = true
warn_unreachable = true
warn_return_any = true
# untyped definitions and calls
check_untyped_defs = false
disallow_untyped_calls = false
disallow_incomplete_defs = true
disallow_untyped_defs = false
disallow_untyped_decorators = false

# disallow dynamic typing 
disallow_subclassing_any = true
disallow_any_unimported = false
disallow_any_expr = false
disallow_any_decorated = false
disallow_any_explicit = false
disallow_any_generics = false
# miscellaneous strictness flags
allow_untyped_globals = true
allow_redefinition = false
local_partial_types = false
implicit_reexport = true
strict_equality = true

ignore_missing_imports = true
# follow_imports = silent
strict_optional = false
no_implicit_optional = false

# configuring error messages 
show_error_context = false
show_column_numbers = false
show_error_codes = true

[tool.ruff]
select = ["F", "E"]
extend-select = ["W", "N", "UP", "B", "A", "C4", "PT", "SIM", "PD", "PLE", "RUF"]
ignore = ["SIM300", "A001", "PD011", "PD002"]
fixable = ["F", "E", "W", "UP", "B", "A", "C4"]
unfixable = []
line-length = 100
extend-exclude = ["tests", "test"]
dummy-variable-rgx = "^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$"

[tool.ruff.isort]
force-single-line = true
force-sort-within-sections = false
lines-after-imports = 2

[tool.bumpver]
current_version = "2023.1001-alpha"
version_pattern = "YYYY.BUILD[-TAG]"
commit_message = "bump version {old_version} -> {new_version}"
tag_message = "{new_version}"
tag_scope = "default"
pre_commit_hook = ""
post_commit_hook = ""
commit = true
tag = true
push = true

[tool.bumpver.file_patterns]
"pyproject.toml" = [
    'current_version = "{version}"',
]
"setup.py" = [
    "{version}",
    "{pep440_version}",
]
"README.md" = [
    "{version}",
    "{pep440_version}",
]

