"use strict";(self.webpackChunkcognite_jupyterlab_copilot=self.webpackChunkcognite_jupyterlab_copilot||[]).push([[901],{46901:(e,t,n)=>{n.r(t),n.d(t,{CommandIDs:()=>O,aiIcon:()=>I,cogniteCopilotPlugin:()=>D,default:()=>U});var o=n(64859),r=n(5172),a=n(67667),i=n(20152),l=n(3992),d=n(56271),s=n.n(d),f=n(55872),u=n.n(f),p=n(91878),c=n(44584),h=n(99958);let m;const _=()=>new Promise((e=>{var t;if(m)return e(m);window.addEventListener("message",(t=>{if("object"==typeof t.data&&"token"in t.data&&"baseUrl"in t.data&&"project"in t.data){const{token:n,baseUrl:o,project:r}=t.data;m=new h.CogniteClient({appId:"LLM-hub-server",project:r,baseUrl:o,getToken:async()=>n}),m.authenticate(),e(m)}}),{capture:!1,once:!0}),null===(t=null===window||void 0===window?void 0:window.top)||void 0===t||t.postMessage("getToken","*")})),x=()=>{const[e,t]=(0,d.useState)();return(0,d.useEffect)((()=>{_().then((e=>t(e)))}),[]),e},g=(e,t={})=>{window.parent.postMessage({event:"NotebookCopilotEvent",data:{eventName:e,data:t}},"*")},y=e=>((Date.now()-e)/1e3).toFixed(3),C=u().div`
  && {
    width: 312px;
    height: auto;
    overflow: auto;
    background: #fff;
    padding: 16px;
    border-radius: 10px;
    box-shadow:
      0px 1px 16px 4px rgba(79, 82, 104, 0.1),
      0px 1px 8px rgba(79, 82, 104, 0.08),
      0px 1px 2px rgba(79, 82, 104, 0.24);
  }
`,w=u()(p.Icon)`
  height: 36px;
  color: #6f3be4;
  background: #e9e1fb;
  padding: 8px;
  border-radius: 6px;
`,v=new Blob(['<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <style>\n    #loading_frame_1 {\n      visibility: hidden;\n      animation: 0.5s show infinite;\n    }\n\n    #loading_frame_2 {\n      visibility: hidden;\n      animation: 0.5s show infinite;\n      animation-delay: 0.125s;\n    }\n\n    #loading_frame_3 {\n      visibility: hidden;\n      animation: 0.5s show infinite;\n      animation-delay: 0.25s;\n    }\n\n    #loading_frame_4 {\n      visibility: hidden;\n      animation: 0.5s show infinite;\n      animation-delay: 0.375s;\n    }\n\n    @keyframes show {\n      0% {\n        visibility: visible;\n      }\n      25% {\n        visibility: visible;\n      }\n      30% {\n        visibility: hidden;\n      }\n      75% {\n        visibility: hidden;\n      }\n    }\n  </style>\n\n  <g id="loading_frame_1">\n    <g filter="url(#filter0_dd_479_39532)">\n    <rect x="4" y="4" width="2.4" height="8" rx="1.2" fill="white"/>\n    </g>\n    <g filter="url(#filter1_dd_479_39532)">\n    <rect x="8.40039" y="2" width="2.4" height="12" rx="1.2" fill="white"/>\n    </g>\n    <g filter="url(#filter2_dd_479_39532)">\n    <rect x="12.7998" y="5.5" width="2.4" height="5" rx="1.2" fill="white"/>\n    </g>\n    <g filter="url(#filter3_dd_479_39532)">\n    <rect x="17.2002" y="4.5" width="2.4" height="7" rx="1.2" fill="white"/>\n    </g>\n  </g>\n  <g id="loading_frame_2">\n    <g filter="url(#filter0_dd_479_39533)">\n    <rect x="4" y="4" width="2.4" height="8" rx="1.2" fill="white"/>\n    </g>\n    <g filter="url(#filter1_dd_479_39533)">\n    <rect x="8.40039" y="5.5" width="2.4" height="5" rx="1.2" fill="white"/>\n    </g>\n    <g filter="url(#filter2_dd_479_39533)">\n    <rect x="12.7998" y="2" width="2.4" height="12" rx="1.2" fill="white"/>\n    </g>\n    <g filter="url(#filter3_dd_479_39533)">\n    <rect x="17.2002" y="4.5" width="2.4" height="7" rx="1.2" fill="white"/>\n    </g>\n  </g>\n  <g id="loading_frame_3">\n    <g filter="url(#filter0_dd_479_39534)">\n    <rect x="4" y="4" width="2.4" height="8" rx="1.2" fill="white"/>\n    </g>\n    <g filter="url(#filter1_dd_479_39534)">\n    <rect x="8.40039" y="2" width="2.4" height="12" rx="1.2" fill="white"/>\n    </g>\n    <g filter="url(#filter2_dd_479_39534)">\n    <rect x="12.7998" y="4.5" width="2.4" height="7" rx="1.2" fill="white"/>\n    </g>\n    <g filter="url(#filter3_dd_479_39534)">\n    <rect x="17.2002" y="5.5" width="2.4" height="5" rx="1.2" fill="white"/>\n    </g>\n  </g>\n  <g id="loading_frame_4">\n    <g filter="url(#filter0_dd_479_39535)">\n    <rect x="4" y="5.5" width="2.4" height="5" rx="1.2" fill="white"/>\n    </g>\n    <g filter="url(#filter1_dd_479_39535)">\n    <rect x="8.40039" y="4" width="2.4" height="8" rx="1.2" fill="white"/>\n    </g>\n    <g filter="url(#filter2_dd_479_39535)">\n    <rect x="12.7998" y="2" width="2.4" height="12" rx="1.2" fill="white"/>\n    </g>\n    <g filter="url(#filter3_dd_479_39535)">\n    <rect x="17.2002" y="4.5" width="2.4" height="7" rx="1.2" fill="white"/>\n    </g>\n  </g>\n\n  <defs>\n    <filter id="filter0_dd_479_39532" x="0" y="3" width="10.4004" height="16" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39532"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39532" result="effect2_dropShadow_479_39532"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39532" result="shape"/>\n      </filter>\n      <filter id="filter1_dd_479_39532" x="4.40039" y="1" width="10.4004" height="20" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39532"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39532" result="effect2_dropShadow_479_39532"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39532" result="shape"/>\n      </filter>\n      <filter id="filter2_dd_479_39532" x="8.7998" y="4.5" width="10.4004" height="13" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39532"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39532" result="effect2_dropShadow_479_39532"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39532" result="shape"/>\n      </filter>\n      <filter id="filter3_dd_479_39532" x="13.2002" y="3.5" width="10.4004" height="15" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39532"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39532" result="effect2_dropShadow_479_39532"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39532" result="shape"/>\n    </filter>\n    <filter id="filter0_dd_479_39533" x="0" y="3" width="10.4004" height="16" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39533"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39533" result="effect2_dropShadow_479_39533"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39533" result="shape"/>\n      </filter>\n      <filter id="filter1_dd_479_39533" x="4.40039" y="4.5" width="10.4004" height="13" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39533"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39533" result="effect2_dropShadow_479_39533"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39533" result="shape"/>\n      </filter>\n      <filter id="filter2_dd_479_39533" x="8.7998" y="1" width="10.4004" height="20" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39533"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39533" result="effect2_dropShadow_479_39533"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39533" result="shape"/>\n      </filter>\n      <filter id="filter3_dd_479_39533" x="13.2002" y="3.5" width="10.4004" height="15" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39533"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39533" result="effect2_dropShadow_479_39533"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39533" result="shape"/>\n    </filter>\n    <filter id="filter0_dd_479_39534" x="0" y="3" width="10.4004" height="16" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39534"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39534" result="effect2_dropShadow_479_39534"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39534" result="shape"/>\n      </filter>\n      <filter id="filter1_dd_479_39534" x="4.40039" y="1" width="10.4004" height="20" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39534"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39534" result="effect2_dropShadow_479_39534"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39534" result="shape"/>\n      </filter>\n      <filter id="filter2_dd_479_39534" x="8.7998" y="3.5" width="10.4004" height="15" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39534"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39534" result="effect2_dropShadow_479_39534"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39534" result="shape"/>\n      </filter>\n      <filter id="filter3_dd_479_39534" x="13.2002" y="4.5" width="10.4004" height="13" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39534"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39534" result="effect2_dropShadow_479_39534"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39534" result="shape"/>\n    </filter>\n    <filter id="filter0_dd_479_39535" x="0" y="4.5" width="10.4004" height="13" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39535"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39535" result="effect2_dropShadow_479_39535"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39535" result="shape"/>\n      </filter>\n      <filter id="filter1_dd_479_39535" x="4.40039" y="3" width="10.4004" height="16" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39535"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39535" result="effect2_dropShadow_479_39535"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39535" result="shape"/>\n      </filter>\n      <filter id="filter2_dd_479_39535" x="8.7998" y="1" width="10.4004" height="20" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39535"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39535" result="effect2_dropShadow_479_39535"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39535" result="shape"/>\n      </filter>\n      <filter id="filter3_dd_479_39535" x="13.2002" y="3.5" width="10.4004" height="15" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n      <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="3"/>\n      <feGaussianBlur stdDeviation="2"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.03 0"/>\n      <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_479_39535"/>\n      <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n      <feOffset dy="1"/>\n      <feGaussianBlur stdDeviation="1"/>\n      <feComposite in2="hardAlpha" operator="out"/>\n      <feColorMatrix type="matrix" values="0 0 0 0 0.0941176 0 0 0 0 0.0941176 0 0 0 0 0.109804 0 0 0 0.04 0"/>\n      <feBlend mode="normal" in2="effect1_dropShadow_479_39535" result="effect2_dropShadow_479_39535"/>\n      <feBlend mode="normal" in="SourceGraphic" in2="effect2_dropShadow_479_39535" result="shape"/>\n    </filter>\n  </defs>\n</svg>\n'],{type:"image/svg+xml"}),S=URL.createObjectURL(v),B=({style:e})=>s().createElement("img",{src:S,style:e}),A=({generatedCode:e,nbTracker:t,onClose:n,priorCellState:o,prompt:r})=>{const[a,i]=(0,d.useState)(),[l,f]=(0,d.useState)(!0),[u,h]=(0,d.useState)(""),m=(0,d.useMemo)((()=>Date.now()),[]),{registerFlow:_,runFlow:v}=(0,c.useCopilotContext)(),S=x(),B=(0,d.useMemo)((()=>S&&new c.CodeExplainFlow({sdk:S})),[S]);(0,d.useEffect)((()=>{var t;if(!(null===(t=null==e?void 0:e.content)||void 0===t?void 0:t.trim()))return;if(!B)return;const n=e.content,o=B,r=_({flow:o});return v(o,{code:n}).then((e=>{g("CodeExplainer.Response",{code:n,response:e,responseSeconds:y(m)}),i(e.content),f(!1)})),r}),[B,e]),(0,d.useEffect)((()=>{const e=setInterval((()=>{h(u+(u.length%4==0?" ":"."))}),100);return()=>clearInterval(e)}),[u]);const A=(0,d.useCallback)((()=>{g("CodeGeneration.Accept",{codeSummary:a,generatedCode:e,priorCellState:o,prompt:r}),n()}),[a,e,n,o,r]),k=(0,d.useCallback)((()=>{g("CodeGeneration.Reject",{codeSummary:a,generatedCode:e,priorCellState:o,prompt:r}),t.activeCell.model.value.text=o,n()}),[a,e,n,o,r]);return s().createElement(C,null,s().createElement(p.Flex,{direction:"column"},s().createElement(p.Flex,{direction:"row",justifyContent:"space-between"},s().createElement(w,{type:"Code",size:36}),s().createElement("div",{style:{marginLeft:8,flexGrow:1,maxWidth:230,maxHeight:"40vh",overflowY:"scroll"}},l?"Summarizing ... "+u:a)),s().createElement(p.Flex,{direction:"row",style:{marginTop:16},justifyContent:"space-between"},s().createElement(p.Button,{type:"secondary",size:"large",style:{width:136},onClick:k},"Reject"),s().createElement(p.Button,{type:"primary",size:"large",style:{color:"#fff",background:"#6F3BE4",width:136},icon:"Checkmark",iconPlacement:"right",onClick:A},"Accept"))))},k=({nbTracker:e,onClose:t})=>{const[n,o]=(0,d.useState)(""),[r,a]=(0,d.useState)(!1),[i,l]=(0,d.useState)(),[f,u]=(0,d.useState)(!1),[h,m]=(0,d.useState)(0),_=(0,d.useRef)();(0,d.useEffect)((()=>{(null==_?void 0:_.current).focus()}),[]);const v=x(),{registerFlow:S,runFlow:k}=(0,c.useCopilotContext)(),b=(0,d.useMemo)((()=>v&&new c.CodeGenerateFlow({sdk:v})),[v]);(0,d.useEffect)((()=>{if(b)return S({flow:b})}),[b,S]);const E=(0,d.useMemo)((()=>{const t=e.activeCell.parent,n=t.activeCellIndex;return t.layout.widgets.slice(0,n).map((e=>e.model.value.text)).join("\n")}),[e]),M=(0,d.useMemo)((()=>{var t;return null===(t=e.activeCell)||void 0===t?void 0:t.model.value.text}),[]),G=(0,d.useCallback)((e=>{o(e.target.value)}),[o]),F=(0,d.useCallback)((t=>{null==t||t.preventDefault();const o=n;if(g("CodeGeneration.Request",{previousCells:E,priorCellState:M,prompt:o}),!b)throw new Error("Something went wrong instantiating ``generateFlow``");m(Date.now()),a(!0),k(b,{prompt:o,previousCells:E}).then((t=>{g("CodeGeneration.Response",{previousCells:E,priorCellState:M,prompt:o,response:t,responseSeconds:y(h)}),l(t),e.activeCell.model.value.text=t.content,u(!0)}))}),[b,n,E,M,k]),I=(0,d.useCallback)((e=>{"Enter"!==e.code||e.shiftKey||F()}),[b,F]),O=(0,d.useCallback)((()=>{g("CodeGeneration.Cancel",{hangSeconds:y(h),inputValue:n,previousCells:E,priorCellState:M}),t()}),[n,t,E,M]);return s().createElement(s().Fragment,null,f?s().createElement(A,{generatedCode:i,nbTracker:e,onClose:t,priorCellState:M,prompt:n}):s().createElement(C,null,s().createElement(p.Flex,{direction:"column"},s().createElement(p.Flex,{direction:"row",justifyContent:"space-between"},s().createElement(w,{type:"Code",size:36}),s().createElement("div",{style:{flexGrow:1,marginLeft:8}},s().createElement(p.Textarea,{ref:_,placeholder:"Write a prompt to generate code",value:n,autoResize:!0,disabled:r,onChange:G,onKeyDown:I}))),s().createElement(p.Flex,{direction:"row",style:{marginTop:16},justifyContent:"space-between"},s().createElement(p.Button,{type:"secondary",size:"large",style:{width:136},onClick:O},"Cancel"),s().createElement(p.Button,{type:"primary",size:"large",style:{color:"#fff",background:!n||r?"#b79df1":"#6F3BE4",width:136},disabled:!n||r,onClick:F},r?s().createElement(s().Fragment,null,s().createElement("span",null,"Generating"),s().createElement(B,{style:{height:16,marginLeft:8}})):"Generate")))))},b=({nbTracker:e,onClose:t})=>{const[n,o]=(0,d.useState)(!1),[a,i]=(0,d.useState)(""),[l,f]=(0,d.useState)(""),u=(0,d.useMemo)((()=>Date.now()),[]);(0,d.useEffect)((()=>{const e=setInterval((()=>{f(l+(l.length%4==0?" ":"."))}),100);return()=>clearInterval(e)}),[l]);const h=x(),{registerFlow:m,runFlow:_}=(0,c.useCopilotContext)(),v=(0,d.useMemo)((()=>h&&new c.CodeExplainFlow({sdk:h})),[h]);(0,d.useEffect)((()=>{if(!v)return;const t=e.activeCell.model.value.text;g("CodeExplainer.Request",{code:t}),o(!0);const n=m({flow:v});return(null==t?void 0:t.trim())?_(v,{code:t}).then((e=>{g("ReceiveExplainCodeResponse",{code:t,response:e,responseSeconds:y(u)}),i(e.content),o(!1)})):(i("This code cell is empty."),o(!1)),n}),[v,m]);const S=(0,d.useCallback)((()=>{r.NotebookActions.insertBelow(e.currentWidget.content);const n=e.currentWidget.content;r.NotebookActions.changeCellType(n,"markdown"),n.activeCell.model.value.text=a,r.NotebookActions.renderAllMarkdown(n),t()}),[a,e,t]),A=(0,d.useCallback)((()=>{n&&g("CodeExplainer.Cancel",{code:e.activeCell.model.value.text,hangSeconds:y(u)}),t()}),[e,n,t]);return s().createElement(C,null,s().createElement(p.Flex,{direction:"column"},s().createElement(p.Flex,{direction:"row",justifyContent:"space-between"},s().createElement(w,{type:"LightBulb",size:36}),s().createElement("div",{style:{marginLeft:8,flexGrow:1,maxWidth:230,maxHeight:"40vh",overflowY:"scroll"}},n?l:a)),s().createElement(p.Flex,{direction:"row",style:{marginTop:16},justifyContent:"space-between"},s().createElement(p.Button,{type:"secondary",size:"large",style:{flexGrow:1,marginRight:8},onClick:A},n?"Cancel":"OK"),n?s().createElement(p.Button,{type:"primary",size:"large",style:{color:"#fff",background:"#b79df1",width:136},disabled:n},s().createElement("span",null,"Generating"),s().createElement(B,{style:{height:16,marginLeft:8}})):s().createElement(p.Button,{type:"primary",size:"large",style:{color:"#fff",background:"#6F3BE4",width:185},disabled:n,onClick:S},s().createElement(p.Icon,{type:"Plus",size:24}),s().createElement("span",{style:{whiteSpace:"nowrap"}},"Add as markdown")))))},E=({nbTracker:e})=>{const[t,n]=(0,d.useState)(!0),[o,r]=(0,d.useState)(!1),[a,i]=(0,d.useState)(!1),l=(0,d.useCallback)((()=>{g("CodeGeneration.Select"),n(!1),r(!0)}),[n,r]),f=(0,d.useCallback)((()=>{g("CodeExplainer.Select"),n(!1),i(!0)}),[n,i]);(0,d.useEffect)((()=>{const e=e=>{"Escape"===e.key&&(n(!1),r(!1),i(!1))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[]);const{right:u,top:h}=(0,d.useMemo)((()=>{const t=e.activeCell.node.getBoundingClientRect();return{right:window.innerWidth-t.width-t.left+187,top:t.top}}),[e]),m=x();return m?s().createElement(c.Copilot,{showChatButton:!1,sdk:m},s().createElement("div",{id:"copilot_menu_root",style:{height:"100vh",width:"100vw",pointerEvents:"none"}},t&&s().createElement(M,{id:"copilot_main_menu",$top:h,$right:u},s().createElement(p.Menu,null,s().createElement(p.Menu.Header,null,"Cognite AI"),s().createElement(p.Menu.Item,{icon:"Code",iconPlacement:"left",onClick:l},"Generate code"),s().createElement(p.Menu.Item,{icon:"LightBulb",iconPlacement:"left",onClick:f},"Explain code"),s().createElement(p.Menu.Item,{icon:"Bug",iconPlacement:"left",disabled:!0},s().createElement(F,null,"Fix code",s().createElement(G,null,"Coming soon"))))),o&&s().createElement(M,{id:"copilot_generator_menu",$top:h,$right:u},s().createElement(k,{nbTracker:e,onClose:()=>r(!1)})),a&&s().createElement(M,{id:"copilot_explainer_menu",$top:h,$right:u},s().createElement(b,{nbTracker:e,onClose:()=>i(!1)})))):s().createElement("div",null)},M=f.styled.div`
  position: absolute;
  top: ${e=>e.$top}px;
  right: ${e=>e.$right}px;
  padding-top: 36px;
  pointer-events: auto;
`,G=f.styled.div`
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f5f5f5;
  height: 20px;
  border-radius: 8px;
  border: 1px solid #e8e8e8;
  font-size: 11px;
  width: 92px;
  color: #696969;
  margin-left: 8px;
`,F=f.styled.div`
  display: flex;
  align-items: center;
`,I=new i.LabIcon({name:"cognite_jupyterlab_copilot:cognite_icon",svgstr:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path\n    d="M7 14C7.3261 14 7.59331 13.7602 7.63859 13.4208C8.08694 10.3982 8.49908 9.97738 11.4067 9.64708C11.7418 9.60635 12 9.32582 12 9.00002C12 8.66968 11.7464 8.3982 11.4112 8.34842C8.52174 7.9457 8.16397 7.59276 7.63859 4.57469C7.57971 4.23984 7.32155 4 7 4C6.6694 4 6.40668 4.23984 6.35236 4.57919C5.91306 7.59731 5.50092 8.01812 2.59782 8.34842C2.25362 8.3937 2 8.66517 2 9.00002C2 9.32582 2.24456 9.5973 2.58877 9.64708C5.48277 10.0588 5.83603 10.4072 6.35236 13.4254C6.42029 13.7647 6.68296 14 7 14Z"\n    fill="#5E28D9" />\n  <path\n    d="M12 6C12.1304 6 12.2373 5.90408 12.2554 5.76833C12.4348 4.55928 12.5996 4.39095 13.7627 4.25883C13.8967 4.24254 14 4.13033 14 4.00001C14 3.86787 13.8986 3.75928 13.7645 3.73937C12.6087 3.57828 12.4656 3.43711 12.2554 2.22987C12.2319 2.09594 12.1286 2 12 2C11.8678 2 11.7627 2.09594 11.7409 2.23167C11.5652 3.43892 11.4004 3.60725 10.2391 3.73937C10.1014 3.75748 10 3.86607 10 4.00001C10 4.13033 10.0978 4.23892 10.2355 4.25883C11.3931 4.42354 11.5344 4.56289 11.7409 5.77014C11.7681 5.90588 11.8732 6 12 6Z"\n    fill="#5E28D9" />\n</svg>\n'});var O;!function(e){e.openCopilotDropdown="jupyterlab:open-copilot-dropdown-menu"}(O||(O={}));const D={id:"cognite_jupyterlab_copilot:button_plugin",autoStart:!0,requires:[r.INotebookTracker,o.IThemeManager],optional:[a.ISettingRegistry],activate:async(e,t)=>{_(),e.commands.addCommand(O.openCopilotDropdown,{label:"Copilot",execute:()=>{const e=(({nbTracker:e})=>o.ReactWidget.create(s().createElement("div",{id:"copilot_widget_root",style:{position:"relative",zIndex:100,height:"100vh",width:"100vw",pointerEvents:"none"}},s().createElement(E,{nbTracker:e}))))({nbTracker:t});l.Widget.attach(e,document.body),g("CopilotWidget.Open");const n=t=>{const o=t.target;o.closest("#copilot_main_menu")||o.closest("#copilot_generator_menu")||o.closest("#copilot_explainer_menu")||(g("CopilotWIdget.Cancel"),e.dispose(),document.body.removeEventListener("mouseup",n))};document.body.addEventListener("mouseup",n)}}),console.log("JupyterLab extension cognite_jupyterlab_copilot is activated!")}},U=D}}]);