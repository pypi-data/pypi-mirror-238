import{cw as ve,cx as be,bO as Et,bP as jt,r as h,j as f,ca as P,al as We,s as W,k as Cr,w as lt,g as pe,a as Ut,ak as Vt,H as Be,cy as Ir,p as Wt,v as Ht,R as N,_ as Ar,K as Tr,h as $r,I as Lr,T as Br}from"./index-abe31643.js";import{b7 as Qe,b as Ke,w as zr,_ as Mr,Z as Nr,q as Ur}from"./index-80724495.js";import{u as Vr}from"./routes-78f0c2d1.js";const Xt=e=>e.type?.startsWith("image")?"IMAGE":e.type?.startsWith("video")?"VIDEO":e.type?.startsWith("audio")?"AUDIO":e.name?.includes(".csv")?"CSV":e.name?.includes(".json")?"JSON":e.name?.includes(".jsonL")?"JSONL":"",Te=e=>e?e.path?e.path:e.originFileObj?e.originFileObj?.webkitRelativePath??e.name:e.webkitRelativePath??e.name:"";function Ot(e){const t={};for(let o=0;o<e.length;o++){const i=Xt(e[o]);t[i]?t[i]++:t[i]=1}let r="",n=0;for(const o in t)t[o]>n&&(r=o,n=t[o]);return r}const Wr=e=>e.reduce((t,r)=>(r.path&&t.push(r.path),r.originFileObj?.webkitRelativePath&&t.push(r.originFileObj?.webkitRelativePath),t),[]);function Je(e){return{...e,path:e.path,originFileObj:e.file,name:e.name,size:e.size,type:e.type,lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,webkitRelativePath:e.webkitRelativePath}}var Hr=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Oe(e,t){var r=Xr(e);if(typeof r.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(r,"path",{value:typeof t=="string"?t:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}function Xr(e){var t=e.name,r=t&&t.lastIndexOf(".")!==-1;if(r&&!e.type){var n=t.split(".").pop().toLowerCase(),o=Hr.get(n);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}var qr=[".DS_Store","Thumbs.db"];function Gr(e){return ve(this,void 0,void 0,function(){return be(this,function(t){return ze(e)&&Yr(e.dataTransfer)?[2,Zr(e.dataTransfer,e.type)]:Qr(e)?[2,Kr(e)]:Array.isArray(e)&&e.every(function(r){return"getFile"in r&&typeof r.getFile=="function"})?[2,Jr(e)]:[2,[]]})})}function Yr(e){return ze(e)}function Qr(e){return ze(e)&&ze(e.target)}function ze(e){return typeof e=="object"&&e!==null}function Kr(e){return tt(e.target.files).map(function(t){return Oe(t)})}function Jr(e){return ve(this,void 0,void 0,function(){var t;return be(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return t=r.sent(),[2,t.map(function(n){return Oe(n)})]}})})}function Zr(e,t){return ve(this,void 0,void 0,function(){var r,n;return be(this,function(o){switch(o.label){case 0:return e.items?(r=tt(e.items).filter(function(i){return i.kind==="file"}),t!=="drop"?[2,r]:[4,Promise.all(r.map(en))]):[3,2];case 1:return n=o.sent(),[2,Rt(qt(n))];case 2:return[2,Rt(tt(e.files).map(function(i){return Oe(i)}))]}})})}function Rt(e){return e.filter(function(t){return qr.indexOf(t.name)===-1})}function tt(e){if(e===null)return[];for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(n)}return t}function en(e){if(typeof e.webkitGetAsEntry!="function")return _t(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?Gt(t):_t(e)}function qt(e){return e.reduce(function(t,r){return Et(Et([],jt(t),!1),jt(Array.isArray(r)?qt(r):[r]),!1)},[])}function _t(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var r=Oe(t);return Promise.resolve(r)}function tn(e){return ve(this,void 0,void 0,function(){return be(this,function(t){return[2,e.isDirectory?Gt(e):rn(e)]})})}function Gt(e){var t=e.createReader();return new Promise(function(r,n){var o=[];function i(){var a=this;t.readEntries(function(s){return ve(a,void 0,void 0,function(){var c,u,d;return be(this,function(b){switch(b.label){case 0:if(s.length)return[3,5];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return c=b.sent(),r(c),[3,4];case 3:return u=b.sent(),n(u),[3,4];case 4:return[3,6];case 5:d=Promise.all(s.map(tn)),o.push(d),i(),b.label=6;case 6:return[2]}})})},function(s){n(s)})}i()})}function rn(e){return ve(this,void 0,void 0,function(){return be(this,function(t){return[2,new Promise(function(r,n){e.file(function(o){var i=Oe(o,e.fullPath);r(i)},function(o){n(o)})})]})})}var nn=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),n=e.name||"",o=(e.type||"").toLowerCase(),i=o.replace(/\/.*$/,"");return r.some(function(a){var s=a.trim().toLowerCase();return s.charAt(0)==="."?n.toLowerCase().endsWith(s):s.endsWith("/*")?i===s.replace(/\/.*$/,""):o===s})}return!0};const on="file-invalid-type",an="file-too-large",sn="file-too-small",un="too-many-files",cn=e=>{e=Array.isArray(e)&&e.length===1?e[0]:e;const t=Array.isArray(e)?`one of ${e.join(", ")}`:e;return{code:on,message:`File type must be ${t}`}},Dt=e=>({code:an,message:`File is larger than ${e} ${e===1?"byte":"bytes"}`}),kt=e=>({code:sn,message:`File is smaller than ${e} ${e===1?"byte":"bytes"}`}),ln={code:un,message:"Too many files"};function Yt(e,t){const r=e.type==="application/x-moz-file"||nn(e,t);return[r,r?null:cn(t)]}function Qt(e,t,r){if(ae(e.size))if(ae(t)&&ae(r)){if(e.size>r)return[!1,Dt(r)];if(e.size<t)return[!1,kt(t)]}else{if(ae(t)&&e.size<t)return[!1,kt(t)];if(ae(r)&&e.size>r)return[!1,Dt(r)]}return[!0,null]}function ae(e){return e!=null}function fn({files:e,accept:t,minSize:r,maxSize:n,multiple:o,maxFiles:i,validator:a}){return!o&&e.length>1||o&&i>=1&&e.length>i?!1:e.every(s=>{const[c]=Yt(s,t),[u]=Qt(s,r,n),d=a?a(s):null;return c&&u&&!d})}function Me(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Ce(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,t=>t==="Files"||t==="application/x-moz-file"):!!e.target&&!!e.target.files}function Ft(e){e.preventDefault()}function dn(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function pn(e){return e.indexOf("Edge/")!==-1}function hn(e=window.navigator.userAgent){return dn(e)||pn(e)}function H(...e){return(t,...r)=>e.some(n=>(!Me(t)&&n&&n(t,...r),Me(t)))}function mn(){return"showOpenFilePicker"in window}function gn(e){return ae(e)?[{description:"Files",accept:Object.entries(e).filter(([r,n])=>{let o=!0;return Kt(r)||(console.warn(`Skipped "${r}" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.`),o=!1),(!Array.isArray(n)||!n.every(Jt))&&(console.warn(`Skipped "${r}" because an invalid file extension was provided.`),o=!1),o}).reduce((r,[n,o])=>({...r,[n]:o}),{})}]:e}function yn(e){if(ae(e))return Object.entries(e).reduce((t,[r,n])=>[...t,r,...n],[]).filter(t=>Kt(t)||Jt(t)).join(",")}function vn(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function bn(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function Kt(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function Jt(e){return/^.*\.[\w]+$/.test(e)}const ft=h.forwardRef(({children:e,...t},r)=>{const{open:n,...o}=er(t);return h.useImperativeHandle(r,()=>({open:n}),[n]),f.jsx(h.Fragment,{children:e({...o,open:n})})});ft.displayName="Dropzone";const Zt={disabled:!1,getFilesFromEvent:Gr,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};ft.defaultProps=Zt;ft.propTypes={children:P.func,accept:P.objectOf(P.arrayOf(P.string)),multiple:P.bool,preventDropOnDocument:P.bool,noClick:P.bool,noKeyboard:P.bool,noDrag:P.bool,noDragEventsBubbling:P.bool,minSize:P.number,maxSize:P.number,maxFiles:P.number,disabled:P.bool,getFilesFromEvent:P.func,onFileDialogCancel:P.func,onFileDialogOpen:P.func,useFsAccessApi:P.bool,autoFocus:P.bool,onDragEnter:P.func,onDragLeave:P.func,onDragOver:P.func,onDrop:P.func,onDropAccepted:P.func,onDropRejected:P.func,onError:P.func,validator:P.func};const rt={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function er(e={}){const{accept:t,disabled:r,getFilesFromEvent:n,maxSize:o,minSize:i,multiple:a,maxFiles:s,onDragEnter:c,onDragLeave:u,onDragOver:d,onDrop:b,onDropAccepted:m,onDropRejected:g,onFileDialogCancel:x,onFileDialogOpen:y,useFsAccessApi:A,autoFocus:O,preventDropOnDocument:R,noClick:$,noKeyboard:L,noDrag:X,noDragEventsBubbling:B,onError:G,validator:q}={...Zt,...e},z=h.useMemo(()=>yn(t),[t]),ee=h.useMemo(()=>gn(t),[t]),Y=h.useMemo(()=>typeof y=="function"?y:Ct,[y]),Q=h.useMemo(()=>typeof x=="function"?x:Ct,[x]),j=h.useRef(null),k=h.useRef(null),[le,F]=h.useReducer(xn,rt),{isFocused:we,isFileDialogActive:te}=le,K=h.useRef(typeof window<"u"&&window.isSecureContext&&A&&mn()),p=()=>{!K.current&&te&&setTimeout(()=>{if(k.current){const{files:l}=k.current;l.length||(F({type:"closeDialog"}),Q())}},300)};h.useEffect(()=>(window.addEventListener("focus",p,!1),()=>{window.removeEventListener("focus",p,!1)}),[k,te,Q,K]);const v=h.useRef([]),S=l=>{j.current&&j.current.contains(l.target)||(l.preventDefault(),v.current=[])};h.useEffect(()=>(R&&(document.addEventListener("dragover",Ft,!1),document.addEventListener("drop",S,!1)),()=>{R&&(document.removeEventListener("dragover",Ft),document.removeEventListener("drop",S))}),[j,R]),h.useEffect(()=>(!r&&O&&j.current&&j.current.focus(),()=>{}),[j,O,r]);const E=h.useCallback(l=>{G?G(l):console.error(l)},[G]),C=h.useCallback(l=>{l.preventDefault(),l.persist(),Fe(l),v.current=[...v.current,l.target],Ce(l)&&Promise.resolve(n(l)).then(w=>{if(Me(l)&&!B)return;const _=w.length,I=_>0&&fn({files:w,accept:z,minSize:i,maxSize:o,multiple:a,maxFiles:s,validator:q}),M=_>0&&!I;F({isDragAccept:I,isDragReject:M,isDragActive:!0,type:"setDraggedFiles"}),c&&c(l)}).catch(w=>E(w))},[n,c,E,B,z,i,o,a,s,q]),fe=h.useCallback(l=>{l.preventDefault(),l.persist(),Fe(l);const w=Ce(l);if(w&&l.dataTransfer)try{l.dataTransfer.dropEffect="copy"}catch{}return w&&d&&d(l),!1},[d,B]),re=h.useCallback(l=>{l.preventDefault(),l.persist(),Fe(l);const w=v.current.filter(I=>j.current&&j.current.contains(I)),_=w.indexOf(l.target);_!==-1&&w.splice(_,1),v.current=w,!(w.length>0)&&(F({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ce(l)&&u&&u(l))},[j,u,B]),ne=h.useCallback((l,w)=>{const _=[],I=[];l.forEach(M=>{const[Xe,qe]=Yt(M,z),[Ge,Ye]=Qt(M,i,o),Pe=q?q(M):null;if(Xe&&Ge&&!Pe)_.push(M);else{let Ee=[qe,Ye];Pe&&(Ee=Ee.concat(Pe)),I.push({file:M,errors:Ee.filter(Fr=>Fr)})}}),(!a&&_.length>1||a&&s>=1&&_.length>s)&&(_.forEach(M=>{I.push({file:M,errors:[ln]})}),_.splice(0)),F({acceptedFiles:_,fileRejections:I,type:"setFiles"}),b&&b(_,I,w),I.length>0&&g&&g(I,w),_.length>0&&m&&m(_,w)},[F,a,z,i,o,s,b,m,g,q]),oe=h.useCallback(l=>{l.preventDefault(),l.persist(),Fe(l),v.current=[],Ce(l)&&Promise.resolve(n(l)).then(w=>{Me(l)&&!B||ne(w,l)}).catch(w=>E(w)),F({type:"reset"})},[n,ne,E,B]),T=h.useCallback(()=>{if(K.current){F({type:"openDialog"}),Y();const l={multiple:a,types:ee};window.showOpenFilePicker(l).then(w=>n(w)).then(w=>{ne(w,null),F({type:"closeDialog"})}).catch(w=>{vn(w)?(Q(w),F({type:"closeDialog"})):bn(w)?(K.current=!1,k.current?(k.current.value=null,k.current.click()):E(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):E(w)});return}k.current&&(F({type:"openDialog"}),Y(),k.current.value=null,k.current.click())},[F,Y,Q,A,ne,E,ee,a]),De=h.useCallback(l=>{!j.current||!j.current.isEqualNode(l.target)||(l.key===" "||l.key==="Enter"||l.keyCode===32||l.keyCode===13)&&(l.preventDefault(),T())},[j,T]),Se=h.useCallback(()=>{F({type:"focus"})},[]),ie=h.useCallback(()=>{F({type:"blur"})},[]),Pt=h.useCallback(()=>{$||(hn()?setTimeout(T,0):T())},[$,T]),de=l=>r?null:l,He=l=>L?null:de(l),ke=l=>X?null:de(l),Fe=l=>{B&&l.stopPropagation()},_r=h.useMemo(()=>({refKey:l="ref",role:w,onKeyDown:_,onFocus:I,onBlur:M,onClick:Xe,onDragEnter:qe,onDragOver:Ge,onDragLeave:Ye,onDrop:Pe,...Ee}={})=>({onKeyDown:He(H(_,De)),onFocus:He(H(I,Se)),onBlur:He(H(M,ie)),onClick:de(H(Xe,Pt)),onDragEnter:ke(H(qe,C)),onDragOver:ke(H(Ge,fe)),onDragLeave:ke(H(Ye,re)),onDrop:ke(H(Pe,oe)),role:typeof w=="string"&&w!==""?w:"presentation",[l]:j,...!r&&!L?{tabIndex:0}:{},...Ee}),[j,De,Se,ie,Pt,C,fe,re,oe,L,X,r]),Dr=h.useCallback(l=>{l.stopPropagation()},[]),kr=h.useMemo(()=>({refKey:l="ref",onChange:w,onClick:_,...I}={})=>({...{accept:z,multiple:a,type:"file",style:{display:"none"},onChange:de(H(w,oe)),onClick:de(H(_,Dr)),tabIndex:-1,[l]:k},...I}),[k,t,a,oe,r]);return{...le,isFocused:we&&!r,getRootProps:_r,getInputProps:kr,rootRef:j,inputRef:k,open:de(T)}}function xn(e,t){switch(t.type){case"focus":return{...e,isFocused:!0};case"blur":return{...e,isFocused:!1};case"openDialog":return{...rt,isFileDialogActive:!0};case"closeDialog":return{...e,isFileDialogActive:!1};case"setDraggedFiles":return{...e,isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject};case"setFiles":return{...e,acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections};case"reset":return{...rt};default:return e}}function Ct(){}async function wn(e,t){return(await We.put("/api/v1/filestorage/signedurl",{files:e,pathPrefix:t})).data}async function Sn(e,t){return(await We.delete("/api/v1/filestorage/file",{data:{files:e,pathPrefix:t}})).data}async function It(){return(await We.get("/api/v1/filestorage/path/apply?flag=ds-build")).data}var nt=function(e,t){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},nt(e,t)};function Re(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");nt(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Pn(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(d){try{u(n.next(d))}catch(b){a(b)}}function c(d){try{u(n.throw(d))}catch(b){a(b)}}function u(d){d.done?i(d.value):o(d.value).then(s,c)}u((n=n.apply(e,t||[])).next())})}function tr(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function ge(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ne(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function Ue(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function me(e){return this instanceof me?(this.v=e,this):new me(e)}function En(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(m){n[m]&&(o[m]=function(g){return new Promise(function(x,y){i.push([m,g,x,y])>1||s(m,g)})})}function s(m,g){try{c(n[m](g))}catch(x){b(i[0][3],x)}}function c(m){m.value instanceof me?Promise.resolve(m.value.v).then(u,d):b(i[0][2],m)}function u(m){s("next",m)}function d(m){s("throw",m)}function b(m,g){m(g),i.shift(),i.length&&s(i[0][0],i[0][1])}}function jn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof ge=="function"?ge(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(a){return new Promise(function(s,c){a=e[i](a),o(s,c,a.done,a.value)})}}function o(i,a,s,c){Promise.resolve(c).then(function(u){i({value:u,done:s})},a)}}function D(e){return typeof e=="function"}function rr(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Ze=rr(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function ot(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var _e=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,o,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=ge(a),c=s.next();!c.done;c=s.next()){var u=c.value;u.remove(this)}}catch(y){t={error:y}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}else a.remove(this);var d=this.initialTeardown;if(D(d))try{d()}catch(y){i=y instanceof Ze?y.errors:[y]}var b=this._finalizers;if(b){this._finalizers=null;try{for(var m=ge(b),g=m.next();!g.done;g=m.next()){var x=g.value;try{At(x)}catch(y){i=i??[],y instanceof Ze?i=Ue(Ue([],Ne(i)),Ne(y.errors)):i.push(y)}}}catch(y){n={error:y}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(n)throw n.error}}}if(i)throw new Ze(i)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)At(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&ot(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&ot(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),nr=_e.EMPTY;function or(e){return e instanceof _e||e&&"closed"in e&&D(e.remove)&&D(e.add)&&D(e.unsubscribe)}function At(e){D(e)?e():e.unsubscribe()}var ir={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},it={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=it.delegate;return o?.setTimeout?o.setTimeout.apply(o,Ue([e,t],Ne(r))):setTimeout.apply(void 0,Ue([e,t],Ne(r)))},clearTimeout:function(e){var t=it.delegate;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function ar(e){it.setTimeout(function(){throw e})}function at(){}function $e(e){e()}var dt=function(e){Re(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,or(r)&&r.add(n)):n.destination=Dn,n}return t.create=function(r,n,o){return new st(r,n,o)},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(_e),On=Function.prototype.bind;function et(e,t){return On.call(e,t)}var Rn=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){Ie(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){Ie(n)}else Ie(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){Ie(r)}},e}(),st=function(e){Re(t,e);function t(r,n,o){var i=e.call(this)||this,a;if(D(r)||!r)a={next:r??void 0,error:n??void 0,complete:o??void 0};else{var s;i&&ir.useDeprecatedNextContext?(s=Object.create(r),s.unsubscribe=function(){return i.unsubscribe()},a={next:r.next&&et(r.next,s),error:r.error&&et(r.error,s),complete:r.complete&&et(r.complete,s)}):a=r}return i.destination=new Rn(a),i}return t}(dt);function Ie(e){ar(e)}function _n(e){throw e}var Dn={closed:!0,next:at,error:_n,complete:at},pt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function kn(e){return e}function Fn(e){return e.length===0?kn:e.length===1?e[0]:function(r){return e.reduce(function(n,o){return o(n)},r)}}var U=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var o=this,i=In(t)?t:new st(t,r,n);return $e(function(){var a=o,s=a.operator,c=a.source;i.add(s?s.call(i,c):c?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=Tt(r),new r(function(o,i){var a=new st({next:function(s){try{t(s)}catch(c){i(c),a.unsubscribe()}},error:i,complete:o});n.subscribe(a)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[pt]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Fn(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=Tt(t),new t(function(n,o){var i;r.subscribe(function(a){return i=a},function(a){return o(a)},function(){return n(i)})})},e.create=function(t){return new e(t)},e}();function Tt(e){var t;return(t=e??ir.Promise)!==null&&t!==void 0?t:Promise}function Cn(e){return e&&D(e.next)&&D(e.error)&&D(e.complete)}function In(e){return e&&e instanceof dt||Cn(e)&&or(e)}function An(e){return D(e?.lift)}function xe(e){return function(t){if(An(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(e,t,r,n,o){return new Tn(e,t,r,n,o)}var Tn=function(e){Re(t,e);function t(r,n,o,i,a,s){var c=e.call(this,r)||this;return c.onFinalize=a,c.shouldUnsubscribe=s,c._next=n?function(u){try{n(u)}catch(d){r.error(d)}}:e.prototype._next,c._error=i?function(u){try{i(u)}catch(d){r.error(d)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=o?function(){try{o()}catch(u){r.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(dt),$n=rr(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Le=function(e){Re(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new $t(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new $n},t.prototype.next=function(r){var n=this;$e(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=ge(n.currentObservers),s=a.next();!s.done;s=a.next()){var c=s.value;c.next(r)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}})},t.prototype.error=function(r){var n=this;$e(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var o=n.observers;o.length;)o.shift().error(r)}})},t.prototype.complete=function(){var r=this;$e(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,o=this,i=o.hasError,a=o.isStopped,s=o.observers;return i||a?nr:(this.currentObservers=null,s.push(r),new _e(function(){n.currentObservers=null,ot(s,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,o=n.hasError,i=n.thrownError,a=n.isStopped;o?r.error(i):a&&r.complete()},t.prototype.asObservable=function(){var r=new U;return r.source=this,r},t.create=function(r,n){return new $t(r,n)},t}(U),$t=function(e){Re(t,e);function t(r,n){var o=e.call(this)||this;return o.destination=r,o.source=n,o}return t.prototype.next=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,r)},t.prototype.error=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&o!==void 0?o:nr},t}(Le);function Ln(e){return e&&D(e.schedule)}function Bn(e){return e[e.length-1]}function zn(e){return Ln(Bn(e))?e.pop():void 0}var sr=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function ur(e){return D(e?.then)}function cr(e){return D(e[pt])}function lr(e){return Symbol.asyncIterator&&D(e?.[Symbol.asyncIterator])}function fr(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Mn(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var dr=Mn();function pr(e){return D(e?.[dr])}function hr(e){return En(this,arguments,function(){var r,n,o,i;return tr(this,function(a){switch(a.label){case 0:r=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,me(r.read())];case 3:return n=a.sent(),o=n.value,i=n.done,i?[4,me(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,me(o)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function mr(e){return D(e?.getReader)}function ce(e){if(e instanceof U)return e;if(e!=null){if(cr(e))return Nn(e);if(sr(e))return Un(e);if(ur(e))return Vn(e);if(lr(e))return gr(e);if(pr(e))return Wn(e);if(mr(e))return Hn(e)}throw fr(e)}function Nn(e){return new U(function(t){var r=e[pt]();if(D(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Un(e){return new U(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function Vn(e){return new U(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,ar)})}function Wn(e){return new U(function(t){var r,n;try{for(var o=ge(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(t.next(a),t.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.complete()})}function gr(e){return new U(function(t){Xn(e,t).catch(function(r){return t.error(r)})})}function Hn(e){return gr(hr(e))}function Xn(e,t){var r,n,o,i;return Pn(this,void 0,void 0,function(){var a,s;return tr(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),r=jn(e),c.label=1;case 1:return[4,r.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(a=n.value,t.next(a),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),o={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function J(e,t,r,n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var i=t.schedule(function(){r(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}function yr(e,t){return t===void 0&&(t=0),xe(function(r,n){r.subscribe(ye(n,function(o){return J(n,e,function(){return n.next(o)},t)},function(){return J(n,e,function(){return n.complete()},t)},function(o){return J(n,e,function(){return n.error(o)},t)}))})}function vr(e,t){return t===void 0&&(t=0),xe(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function qn(e,t){return ce(e).pipe(vr(t),yr(t))}function Gn(e,t){return ce(e).pipe(vr(t),yr(t))}function Yn(e,t){return new U(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}function Qn(e,t){return new U(function(r){var n;return J(r,t,function(){n=e[dr](),J(r,t,function(){var o,i,a;try{o=n.next(),i=o.value,a=o.done}catch(s){r.error(s);return}a?r.complete():r.next(i)},0,!0)}),function(){return D(n?.return)&&n.return()}})}function br(e,t){if(!e)throw new Error("Iterable cannot be null");return new U(function(r){J(r,t,function(){var n=e[Symbol.asyncIterator]();J(r,t,function(){n.next().then(function(o){o.done?r.complete():r.next(o.value)})},0,!0)})})}function Kn(e,t){return br(hr(e),t)}function Jn(e,t){if(e!=null){if(cr(e))return qn(e,t);if(sr(e))return Yn(e,t);if(ur(e))return Gn(e,t);if(lr(e))return br(e,t);if(pr(e))return Qn(e,t);if(mr(e))return Kn(e,t)}throw fr(e)}function xr(e,t){return t?Jn(e,t):ce(e)}function Zn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=zn(e);return xr(e,r)}function eo(e,t){return xe(function(r,n){var o=0;r.subscribe(ye(n,function(i){n.next(e.call(t,i,o++))}))})}function to(e,t,r,n,o,i,a,s){var c=[],u=0,d=0,b=!1,m=function(){b&&!c.length&&!u&&t.complete()},g=function(y){return u<n?x(y):c.push(y)},x=function(y){i&&t.next(y),u++;var A=!1;ce(r(y,d++)).subscribe(ye(t,function(O){o?.(O),i?g(O):t.next(O)},function(){A=!0},void 0,function(){if(A)try{u--;for(var O=function(){var R=c.shift();a?J(t,a,function(){return x(R)}):x(R)};c.length&&u<n;)O();m()}catch(R){t.error(R)}}))};return e.subscribe(ye(t,g,function(){b=!0,m()})),function(){s?.()}}function wr(e,t,r){return r===void 0&&(r=1/0),D(t)?wr(function(n,o){return eo(function(i,a){return t(n,i,o,a)})(ce(e(n,o)))},r):(typeof t=="number"&&(r=t),xe(function(n,o){return to(n,o,e,r)}))}function Sr(e){return xe(function(t,r){var n=null,o=!1,i;n=t.subscribe(ye(r,void 0,void 0,function(a){i=ce(e(a,Sr(e)(t))),n?(n.unsubscribe(),n=null,i.subscribe(r)):o=!0})),o&&(n.unsubscribe(),n=null,i.subscribe(r))})}function ro(e){return xe(function(t,r){ce(e).subscribe(ye(r,function(){return r.complete()},at)),!r.closed&&t.subscribe(r)})}function no({concurrent:e=4,onUpload:t,onDone:r,onError:n}){const o=h.useRef(new Le),i=h.useRef(new Le);return h.useEffect(()=>{const a=new _e,c=o.current.asObservable().pipe(wr(u=>xr(t(u)).pipe(Sr(d=>Zn(d))),e),ro(i.current)).subscribe({next:u=>{const d=u.config?.data;if(d){if(u instanceof Error){n?.(d,u);return}r?.(d)}}});return a.add(c),()=>{a.unsubscribe()}},[i.current]),{uploadQueue:o.current,cancel:()=>{i.current.next(),i.current.complete(),i.current=new Le}}}var Z={small:"small",medium:"medium",large:"large"},je;function Lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lt(Object(r),!0).forEach(function(n){se(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pr(e){var t;return(t={},se(t,Z.small,"2px"),se(t,Z.medium,"4px"),se(t,Z.large,"8px"),t)[e]}var ht=W("div",function(e){return{width:"100%"}});ht.displayName="StyledRoot";ht.displayName="StyledRoot";var mt=W("div",function(e){var t=e.$theme,r=t.sizing;return{display:"flex",marginLeft:r.scale500,marginRight:r.scale500,marginTop:r.scale500,marginBottom:r.scale500}});mt.displayName="StyledBarContainer";mt.displayName="StyledBarContainer";var gt=W("div",function(e){var t=e.$theme,r=e.$size,n=e.$steps,o=t.colors,i=t.sizing,a=t.borders,s=a.useRoundedCorners?i.scale0:0;return ue({borderTopLeftRadius:s,borderTopRightRadius:s,borderBottomRightRadius:s,borderBottomLeftRadius:s,backgroundColor:Cr(o.progressbarTrackFill,"0.16"),height:Pr(r),flex:1,overflow:"hidden"},n<2?{}:{marginLeft:i.scale300,":first-child":{marginLeft:"0"}})});gt.displayName="StyledBar";gt.displayName="StyledBar";var yt=W("div",function(e){var t=e.$theme,r=e.$value,n=e.$successValue,o=e.$steps,i=e.$index,a=e.$maxValue,s=e.$minValue,c=s===void 0?0:s,u=a||n,d=t.colors,b=t.sizing,m=t.borders,g="".concat(100-(r-c)*100/(u-c),"%"),x={default:"default",awaits:"awaits",inProgress:"inProgress",completed:"completed"},y=x.default;if(o>1){var A=(u-c)/o,O=(r-c)/(u-c)*100,R=Math.floor(O/A);i<R?y=x.completed:i===R?y=x.inProgress:y=x.awaits}var $=m.useRoundedCorners?b.scale0:0,L={transform:"translateX(-".concat(g,")")},X=y===x.inProgress?{animationDuration:"2.1s",animationIterationCount:"infinite",animationTimingFunction:t.animation.linearCurve,animationName:{"0%":{transform:"translateX(-102%)",opacity:1},"50%":{transform:"translateX(0%)",opacity:1},"100%":{transform:"translateX(0%)",opacity:0}}}:y===x.completed?{transform:"translateX(0%)"}:{transform:"translateX(-102%)"};return ue({borderTopLeftRadius:$,borderTopRightRadius:$,borderBottomRightRadius:$,borderBottomLeftRadius:$,backgroundColor:d.accent,height:"100%",width:"100%",transform:"translateX(-102%)",transition:"transform 0.5s"},o>1?X:L)});yt.displayName="StyledBarProgress";yt.displayName="StyledBarProgress";var vt=W("div",function(e){var t=e.$theme,r=e.$isLeft,n=r===void 0?!1:r,o=e.$size,i=o===void 0?Z.medium:o,a=t.colors,s=t.sizing,c=t.borders,u=c.useRoundedCorners?s.scale0:0,d=Pr(i),b={display:"inline-block",flex:1,marginLeft:"auto",marginRight:"auto",transitionProperty:"background-position",animationDuration:"1.5s",animationIterationCount:"infinite",animationTimingFunction:t.animation.linearCurve,backgroundSize:"300% auto",backgroundRepeat:"no-repeat",backgroundPositionX:n?"-50%":"150%",backgroundImage:"linear-gradient(".concat(n?"90":"270","deg, transparent 0%, ").concat(a.accent," 25%, ").concat(a.accent," 75%, transparent 100%)"),animationName:n?{"0%":{backgroundPositionX:"-50%"},"33%":{backgroundPositionX:"50%"},"66%":{backgroundPositionX:"50%"},"100%":{backgroundPositionX:"150%"}}:{"0%":{backgroundPositionX:"150%"},"33%":{backgroundPositionX:"50%"},"66%":{backgroundPositionX:"50%"},"100%":{backgroundPositionX:"-50%"}}};return ue(ue({},n?{borderTopLeftRadius:u,borderBottomLeftRadius:u}:{borderTopRightRadius:u,borderBottomRightRadius:u}),{},{height:d},b)});vt.displayName="StyledInfiniteBar";vt.displayName="StyledInfiniteBar";var bt=W("div",function(e){return ue(ue({textAlign:"center"},e.$theme.typography.font150),{},{color:e.$theme.colors.contentTertiary})});bt.displayName="StyledLabel";bt.displayName="StyledLabel";var V=(je={},se(je,Z.large,{d:"M47.5 4H71.5529C82.2933 4 91 12.9543 91 24C91 35.0457 82.2933 44 71.5529 44H23.4471C12.7067 44 4 35.0457 4 24C4 12.9543 12.7067 4 23.4471 4H47.5195",width:95,height:48,strokeWidth:8,typography:"LabelLarge"}),se(je,Z.medium,{d:"M39 2H60.5833C69.0977 2 76 9.16344 76 18C76 26.8366 69.0977 34 60.5833 34H17.4167C8.90228 34 2 26.8366 2 18C2 9.16344 8.90228 2 17.4167 2H39.0195",width:78,height:36,strokeWidth:4,typography:"LabelMedium"}),se(je,Z.small,{d:"M32 1H51.6271C57.9082 1 63 6.37258 63 13C63 19.6274 57.9082 25 51.6271 25H12.3729C6.09181 25 1 19.6274 1 13C1 6.37258 6.09181 1 12.3729 1H32.0195",width:64,height:26,strokeWidth:2,typography:"LabelSmall"}),je),Er=W("div",function(e){var t=e.$size,r=e.$inline;return{width:V[t].width+"px",height:V[t].height+"px",position:"relative",display:r?"inline-flex":"flex",alignItems:"center",justifyContent:"center"}});Er.displayName="StyledProgressBarRoundedRoot";Er.displayName="StyledProgressBarRoundedRoot";var xt=W("svg",function(e){var t=e.$size;return{width:V[t].width+"px",height:V[t].height+"px",position:"absolute",fill:"none"}});xt.displayName="_StyledProgressBarRoundedSvg";xt.displayName="_StyledProgressBarRoundedSvg";lt(xt,function(e){return function(r){return f.jsx(e,{viewBox:"0 0 ".concat(V[r.$size].width," ").concat(V[r.$size].height),xmlns:"http://www.w3.org/2000/svg",...r})}});var wt=W("path",function(e){var t=e.$theme,r=e.$size;return{stroke:t.colors.backgroundTertiary,strokeWidth:V[r].strokeWidth+"px"}});wt.displayName="_StyledProgressBarRoundedTrackBackground";wt.displayName="_StyledProgressBarRoundedTrackBackground";lt(wt,function(e){return function(r){return f.jsx(e,{d:V[r.$size].d,...r})}});var St=W("path",function(e){var t=e.$theme,r=e.$size,n=e.$visible,o=e.$pathLength,i=e.$pathProgress;return{visibility:n?"visible":"hidden",stroke:t.colors.borderAccent,strokeWidth:V[r].strokeWidth+"px",strokeDasharray:o,strokeDashoffset:o*(1-i)+""}});St.displayName="_StyledProgressBarRoundedTrackForeground";St.displayName="_StyledProgressBarRoundedTrackForeground";lt(St,function(e){return function(r){return f.jsx(e,{d:V[r.$size].d,...r})}});var jr=W("div",function(e){var t=e.$theme,r=e.$size;return ue({color:t.colors.contentPrimary},t.typography[V[r].typography])});jr.displayName="StyledProgressBarRoundedText";jr.displayName="StyledProgressBarRoundedText";function ut(e){"@babel/helpers - typeof";return ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(e)}var oo=["overrides","getProgressLabel","value","size","steps","successValue","minValue","maxValue","showLabel","infinite","errorMessage","forwardedRef"];function he(e,t){return uo(e)||so(e,t)||ao(e,t)||io()}function io(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ao(e,t){if(e){if(typeof e=="string")return Bt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bt(e,t)}}function Bt(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function so(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,s;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(c){i=!0,s=c}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw s}}return n}}function uo(e){if(Array.isArray(e))return e}function co(e,t){if(e==null)return{};var r=lo(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lo(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function fo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function po(e,t,r){return t&&zt(e.prototype,t),r&&zt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ho(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ct(e,t)}function ct(e,t){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},ct(e,t)}function mo(e){var t=vo();return function(){var n=Ve(e),o;if(t){var i=Ve(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return go(this,o)}}function go(e,t){if(t&&(ut(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yo(e)}function yo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ve(e)}function bo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Or=function(e){ho(r,e);var t=mo(r);function r(){return fo(this,r),t.apply(this,arguments)}return po(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var o=this.props,i=o.overrides,a=i===void 0?{}:i,s=o.getProgressLabel,c=o.value,u=o.size,d=o.steps,b=o.successValue,m=o.minValue,g=o.maxValue,x=o.showLabel,y=o.infinite,A=o.errorMessage,O=o.forwardedRef,R=co(o,oo),$=this.props["aria-label"]||this.props.ariaLabel,L=g!==100?g:b,X=pe(a.Root,ht),B=he(X,2),G=B[0],q=B[1],z=pe(a.BarContainer,mt),ee=he(z,2),Y=ee[0],Q=ee[1],j=pe(a.Bar,gt),k=he(j,2),le=k[0],F=k[1],we=pe(a.BarProgress,yt),te=he(we,2),K=te[0],p=te[1],v=pe(a.Label,bt),S=he(v,2),E=S[0],C=S[1],fe=pe(a.InfiniteBar,vt),re=he(fe,2),ne=re[0],oe=re[1],T={$infinite:y,$size:u,$steps:d,$successValue:L,$minValue:m,$maxValue:L,$value:c};function De(){for(var Se=[],ie=0;ie<d;ie++)Se.push(f.jsx(le,{...T,...F,children:f.jsx(K,{$index:ie,...T,...p})},ie));return Se}return f.jsxs(G,{ref:O,"data-baseweb":"progress-bar",role:"progressbar","aria-label":$||s(c,L,m),"aria-valuenow":y?null:c,"aria-valuemin":y?null:m,"aria-valuemax":y?null:L,"aria-invalid":A?!0:null,"aria-errormessage":A,...R,...T,...q,children:[f.jsx(Y,{...T,...Q,children:y?f.jsxs(f.Fragment,{children:[f.jsx(ne,{$isLeft:!0,$size:T.$size,...oe}),f.jsx(ne,{$size:T.$size,...oe})]}):De()}),x&&f.jsx(E,{...T,...C,children:s(c,L,m)})]})}}]),r}(h.Component);bo(Or,"defaultProps",{getProgressLabel:function(t,r,n){return"".concat(Math.round((t-n)/(r-n)*100),"% Loaded")},infinite:!1,overrides:{},showLabel:!1,size:Z.medium,steps:1,successValue:100,minValue:0,maxValue:100,value:0});var Rr=h.forwardRef(function(e,t){return f.jsx(Or,{forwardedRef:t,...e})});Rr.displayName="ProgressBar";const xo=Rr,wo={BaseButton:{style:{marginLeft:"16px",backgroundColor:"transparent",color:" rgba(2,16,43,0.40);",":hover .icon-container":{color:"#D65E5E !important",backgroundColor:"transparent"},":focus":{color:"#D65E5E !important",backgroundColor:"transparent"}}}};function Mt({percent:e=-1,file:t,onRemove:r}){const n=Xt(t),o=Te(t),i={IMAGE:"image",VIDEO:"video",AUDIO:"audio",CSV:"txt",JSON:"txt",JSONL:"txt"};return f.jsxs("div",{className:"ant-upload-list-item-container",children:[f.jsxs("div",{className:"ant-upload-list-item",children:[f.jsx("div",{className:"ant-upload-icon",children:f.jsx(Ut,{type:i[n]??"file2"})}),f.jsx("div",{className:"ant-upload-list-item-name",children:o}),f.jsx("div",{className:"ant-upload-list-item-size",children:Vt(t.size??0)}),f.jsx("div",{className:"ant-upload-list-item-actions",children:f.jsx(Be,{as:"link",icon:"delete",onClick:()=>{r?.(t)},overrides:wo})})]}),e>=0&&f.jsx(xo,{value:e,overrides:{BarContainer:{style:{...Ir("0px","0px","0px","0px")}},BarProgress:{style:{height:"1px"}},Bar:{style:{height:"1px"}}}})]})}function So(){const e=h.useRef(""),t=async()=>(e.current||(e.current=await It()),e.current);return h.useEffect(()=>{t()},[]),{getSign:t,resetSign:async()=>{e.current=await It()},signPrefix:e.current}}const Po=Wt({drag:{display:"flex",alignContent:"stretch",alignItems:"flex-start",flexDirection:"column",gap:"8px","& .ant-upload-drag":{backgroundColor:"#FAFBFC !important"},"& .ant-upload-btn":{height:"170px !important",alignItems:"center",justifyContent:"center",":hover":{border:"1px solid #5181E0; !important"}},"& .ant-upload-icon":{margin:"0 8px 0 12px"},"& .ant-upload-drag-icon":{color:"rgba(2,16,43,0.40) !important",marginBottom:"10px !important"},"& .ant-upload-text":{color:"rgba(2,16,43,0.40) !important",marginBottom:"30px !important",fontSize:"14px !important"},"& .ant-upload-action":{gap:"20px",display:"flex",justifyContent:"center",alignContent:"center"},"& .ant-upload-list":{maxHeight:"230px",width:"100%",overflow:"auto"},"& .ant-upload-list-item-container":{height:"32px !important",borderBottom:"1px solid #EEF1F6","&:hover":{backgroundColor:"#EBF1FF !important"}},"& .ant-upload-list-item":{height:"31px !important",display:"flex",alignItems:"center",marginTop:"0px !important",fontSize:"14px !important",paddingRight:"8px"},"& .ant-upload-list-item-name":{flex:1},"& .ant-upload-list-item-size":{color:" rgba(2,16,43,0.40)"}}}),Eo={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:1,borderRadius:2,borderColor:"#CFD7E6;",borderStyle:"dashed",backgroundColor:"#fafbfc",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},jo={borderColor:"#5181E0"},Oo={borderColor:"#5181E0"},Ro={borderColor:"#5181E0"},_o=1e3;function Do({onChange:e}){const t=Po(),[r]=Ht(),{resetSign:n,signPrefix:o}=So(),[i,a]=N.useState([]),[s,c]=N.useState([]),[u,d]=N.useState([]),[b,m]=N.useState([]),g=N.useMemo(()=>Ar.groupBy([...s,...b],"status"),[s,b]),x=N.useMemo(()=>i.length-b.length>_o,[i,b]),y=N.useCallback(p=>s.some(v=>v.path===Te(p)),[s]),A=p=>x?(m(v=>[...v,{...p,status:"errorMax"}]),!1):y(p)?(m(v=>[...v,{...p,status:"errorExist"}]),!1):!0,{uploadQueue:O,cancel:R}=no({onUpload:Qe(p=>{const v=We.create();return d(S=>[...S,{...Je(p.file),status:"uploading"}]),v({method:"PUT",url:p.oss,headers:{"Content-Type":"application/octet-stream","X-Requested-With":"XMLHttpRequest"},data:p.file,onUploadProgress:S=>(d(E=>{const C=E.findIndex(re=>re.path===p.file.path);if(C===-1)return[...E];const fe={...E[C],percent:100*(S.loaded/S.total)};return E.splice(C,1,fe),[...E]}),100*(S.loaded/S.total)),onDownloadProgress:S=>100*(S.loaded/S.total)})}),onDone:p=>{c(v=>[...v,{...Je(p),status:"done"}]),d(v=>v.filter(S=>S.path!==p.path))},onError:p=>{m(v=>[...v,{...Je(p),status:"errorUnknown"}]),d(v=>v.filter(S=>S.path!==p.path))}}),{getRootProps:$,getInputProps:L,isFocused:X,isDragAccept:B,isDragReject:G}=er({onDrop:async p=>{const v=[];if(p.forEach(C=>{A(C)&&v.push(C)}),v.length===0)return;a(C=>[...C,...v]);const S=await Wr(v),E=await wn(S,o);p.forEach(C=>{O.next({file:C,oss:E.signedUrls[C.path]})})}}),q=Qe(()=>{n(),a([]),c([]),m([]),d([]),R()}),z=Qe(async p=>{const v=Te(p);await Sn([v],o),a(S=>S.filter(E=>E.path!==p.path)),c(S=>S.filter(E=>E.path!==p.path)),m(S=>S.filter(E=>E.path!==p.path))}),ee=N.useMemo(()=>s?.length?Ot(s):null,[s]),Y=s?.length??0,Q=Vt(s?.reduce((p,v)=>p+v.size,0)??0),j=p=>Te(p),k=N.useMemo(()=>({...Eo,...X?jo:{},...B?Oo:{},...G?Ro:{}}),[X,B,G]),le={},F=N.useMemo(()=>u.map(p=>f.jsx(Mt,{file:p,percent:p.percent,onRemove:z},p.path)),[u,z]),we=N.useMemo(()=>s.map(p=>f.jsx(Mt,{file:p,onRemove:z},p.path)),[s,z]),te=["done","success"].reduce((p,v)=>p+(g[v]?.length??0),0),K=["error","errorExist","errorMax","errorUnknown"].reduce((p,v)=>p+(g[v]?.length??0),0);return h.useEffect(()=>{const p=setTimeout(()=>{if(!i?.every(E=>E.status!=="uploading"))return;const S=s?Ot(s):"";e?.({storagePath:o,type:S})},1e3);return()=>{clearTimeout(p)}},[i,s,o]),f.jsxs("div",{className:t.drag,children:[f.jsxs("div",{...$({className:"dropzone ant-upload-btn"}),style:{...k,width:"100%",flexShrink:0,flexBasis:"auto"},children:[f.jsx("input",{...L(),multiple:!0,...le}),f.jsx("p",{children:r("dataset.create.upload.drag.desc")})]}),(Y>0||u.length>0)&&f.jsx("div",{style:{display:"flex",width:"100%",flex:1,justifyContent:"flex-end"},children:f.jsx(Be,{kind:"secondary",onClick:q,startEnhancer:f.jsx(Ut,{type:"reset"}),children:r("Reset")})}),f.jsxs("div",{className:"ant-upload-list",children:[F,we]}),Y>0&&f.jsx("div",{style:{width:"100%",display:"flex",gap:"10px",alignItems:"flex-start",marginTop:10},children:f.jsxs("div",{style:{flex:1},children:[f.jsx("p",{style:{color:"rgba(2,16,43,0.60)"},children:r("dataset.create.upload.total.desc",[te,Q])}),K?f.jsxs("p",{style:{color:"#CC3D3D",display:"inline-flex",gap:"5px"},children:[r("dataset.create.upload.error.desc"),g.errorExist&&g.errorExist?.length&&f.jsxs(Ke,{tooltip:f.jsx("pre",{children:g.errorExist.map(j).join(`
`)}),children:[g.errorExist.length,"  (",r("dataset.create.upload.error.exist"),")"]},"exist"),g.errorMax&&g.errorMax?.length&&f.jsxs(Ke,{tooltip:f.jsx("pre",{children:g.errorMax.map(j).join(`
`)}),children:[g.errorMax.length," (",r("dataset.create.upload.error.max"),")"]},"max"),g.errorUnknown&&g.errorUnknown?.length&&f.jsxs(Ke,{tooltip:f.jsx("pre",{children:g.errorUnknown.map(j).join(`
`)}),children:[g.errorUnknown.length," (",r("dataset.create.upload.error.unknown"),")"]},"max")]}):null,!ee&&f.jsx("p",{style:{color:"#CC3D3D"},children:r("dataset.create.upload.error.type")})]})})]})}const{Form:ko,FormItem:Ae,useForm:Fo,FormItemLabel:Nt}=Ur(),Co=Wt({datasetName:{display:"flex",alignContent:"stretch",alignItems:"flex-start",gap:"8px"},shared:{display:"flex",alignItems:"center","& [data-baseweb=form-control-container]":{marginBottom:"0 !important"},"& > div:first-child":{marginLeft:"22px"},marginBottom:"20px"},row:{display:"grid",gap:40,gridTemplateColumns:"660px",gridTemplateRows:"minmax(0px, max-content)",marginBottom:"20px"},upload:{marginBottom:"20px","& .ant-upload-btn":{height:"200px !important"}}});function $o({dataset:e,onSubmit:t}){const[r,n]=h.useState(void 0),{query:o}=Vr(),{currentUser:i}=Tr(),{project:a}=zr(),s=Co(),[c]=Fo(),u=$r();h.useEffect(()=>{e&&n({datasetName:e.name})},[e]);const[d,b]=h.useState(!1),m=h.useCallback((O,R)=>{n(R)},[]),g=h.useCallback(async O=>{b(!0);try{await t(O)}finally{b(!1)}},[t]),[x]=Ht(),y=h.useCallback((O,R)=>{c.setFieldsValue({[O]:R}),n($=>({...$,[O]:R}))},[c]);h.useEffect(()=>{o.datasetName&&y("datasetName",o.datasetName)},[o.datasetName,y]);const A=!r?.datasetName||!r?.upload?.type;return f.jsxs(ko,{form:c,initialValues:r,onFinish:g,onValuesChange:m,children:[f.jsxs("div",{className:s.datasetName,children:[f.jsx(Nt,{label:x("dataset.create.owner"),children:f.jsxs("div",{className:"flex",style:{height:"32px",alignItems:"center",gap:"8px"},children:[f.jsx(Mr,{user:i})," /"]})}),f.jsx(Nt,{label:x("Project Name"),children:f.jsxs("div",{className:"flex",style:{height:"32px",alignItems:"center",gap:"8px"},children:[a?.name," /"]})}),f.jsx(Ae,{name:"datasetName",rules:[{type:"string",min:3,message:x("form.rule.min",[x("sth name",[x("Dataset")])])}],label:x("sth name",[x("Dataset")]),style:{minWidth:280},required:!0,children:f.jsx(Lr,{size:"compact"})})]}),f.jsxs("div",{className:s.shared,children:[x("Shared"),":",f.jsx(Nr,{shared:!!c.getFieldValue("shared")}),f.jsx(Ae,{name:"shared",children:f.jsx(Br,{})})]}),f.jsx("div",{className:s.upload,style:{overflow:"auto",maxWidth:800,width:"100%"},children:f.jsx(Ae,{name:"upload",label:x("dataset.create.files"),required:!0,children:f.jsx(Do,{})})}),f.jsx(Ae,{children:f.jsxs("div",{style:{display:"flex",gap:20,marginTop:20},children:[f.jsx(Be,{kind:"secondary",type:"button",onClick:()=>{u.goBack()},children:x("Cancel")}),f.jsx(Be,{isLoading:d,type:"submit",disabled:A,children:x("submit")})]})})]})}export{$o as default};
