"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[34361,4631],{76680:function(t,e,n){function i(t){return void 0===t||Array.isArray(t)?t:[t]}n.d(e,{r:function(){return i}})},55070:function(t,e,n){n.d(e,{Eu:function(){return r},hZ:function(){return a}});var i=["#44739e","#984ea3","#00d2d5","#ff7f00","#af8d00","#7f80cd","#b3e900","#c42e60","#a65628","#f781bf","#8dd3c7","#bebada","#fb8072","#80b1d3","#fdb462","#fccde5","#bc80bd","#ffed6f","#c4eaff","#cf8c00","#1b9e77","#d95f02","#e7298a","#e6ab02","#a6761d","#0097ff","#00d067","#f43600","#4ba93b","#5779bb","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#d9d9d9","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function r(t){return i[t%i.length]}function a(t,e){return e.getPropertyValue("--graph-color-".concat(t+1))||r(t)}},72043:function(t,e,n){n.d(e,{A:function(){return s},v:function(){return c}});var i=n(23158),r=n(25101),a=n(66477),o=function(t,e,n,a){var o=n((0,i.Z)(t,e),a);return o instanceof Date?(0,r.Z)(o,e):o},s=function(t,e,n,i,r){return n.time_zone===a.c_.server?o(t,i.time_zone,e,r):e(t,r)},c=function(t,e,n,i,r){return n.time_zone===a.c_.server?o(t,i.time_zone,e,r):e(t,r)}},26410:function(t,e,n){n.d(e,{Bt:function(){return o},T8:function(){return s}});var i=n(22075),r=n(66477),a=(n(4631),["sunday","monday","tuesday","wednesday","thursday","friday","saturday"]),o=function(t){return t.first_weekday===r.FS.language?"weekInfo"in Intl.Locale.prototype?new Intl.Locale(t.language).weekInfo.firstDay%7:(0,i.L)(t.language)%7:a.includes(t.first_weekday)?a.indexOf(t.first_weekday):1},s=function(t){var e=o(t);return a[e]}},12198:function(t,e,n){n.d(e,{D_:function(){return w},NC:function(){return p},Nh:function(){return g},U8:function(){return x},WB:function(){return h},mn:function(){return l},p6:function(){return c},pU:function(){return o},ud:function(){return v},yQ:function(){return b}});var i=n(93359),r=n(14516),a=n(66477),o=(n(4631),function(t,e,n){return s(e,n.time_zone).format(t)}),s=(0,r.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{weekday:"long",month:"long",day:"numeric",timeZone:"server"===t.time_zone?e:void 0})})),c=function(t,e,n){return u(e,n.time_zone).format(t)},u=(0,r.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",timeZone:"server"===t.time_zone?e:void 0})})),l=function(t,e,n){return d(e,n.time_zone).format(t)},d=(0,r.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{year:"numeric",month:"short",day:"numeric",timeZone:"server"===t.time_zone?e:void 0})})),h=function(t,e,n){var r,o,s,c,u,l=f(e,n.time_zone);if(e.date_format===a.t6.language||e.date_format===a.t6.system)return l.format(t);var d=l.formatToParts(t),h=null===(r=d.find((function(t){return"literal"===t.type})))||void 0===r?void 0:r.value,v=null===(o=d.find((function(t){return"day"===t.type})))||void 0===o?void 0:o.value,m=null===(s=d.find((function(t){return"month"===t.type})))||void 0===s?void 0:s.value,p=null===(c=d.find((function(t){return"year"===t.type})))||void 0===c?void 0:c.value,y=d.at(d.length-1),g="literal"===(null==y?void 0:y.type)?null==y?void 0:y.value:"";return"bg"===e.language&&e.date_format===a.t6.YMD&&(g=""),(u={},(0,i.Z)(u,a.t6.DMY,"".concat(v).concat(h).concat(m).concat(h).concat(p).concat(g)),(0,i.Z)(u,a.t6.MDY,"".concat(m).concat(h).concat(v).concat(h).concat(p).concat(g)),(0,i.Z)(u,a.t6.YMD,"".concat(p).concat(h).concat(m).concat(h).concat(v).concat(g)),u)[e.date_format]},f=(0,r.Z)((function(t,e){var n=t.date_format===a.t6.system?void 0:t.language;return t.date_format===a.t6.language||(t.date_format,a.t6.system),new Intl.DateTimeFormat(n,{year:"numeric",month:"numeric",day:"numeric",timeZone:"server"===t.time_zone?e:void 0})})),v=function(t,e,n){return m(e,n.time_zone).format(t)},m=(0,r.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{day:"numeric",month:"short",timeZone:"server"===t.time_zone?e:void 0})})),p=function(t,e,n){return y(e,n.time_zone).format(t)},y=(0,r.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{month:"long",year:"numeric",timeZone:"server"===t.time_zone?e:void 0})})),g=function(t,e,n){return _(e,n.time_zone).format(t)},_=(0,r.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{month:"long",timeZone:"server"===t.time_zone?e:void 0})})),b=function(t,e,n){return k(e,n.time_zone).format(t)},k=(0,r.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{year:"numeric",timeZone:"server"===t.time_zone?e:void 0})})),w=function(t,e,n){return Z(e,n.time_zone).format(t)},Z=(0,r.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{weekday:"long",timeZone:"server"===t.time_zone?e:void 0})})),x=function(t,e,n){return D(e,n.time_zone).format(t)},D=(0,r.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{weekday:"short",timeZone:"server"===t.time_zone?e:void 0})}))},44583:function(t,e,n){n.d(e,{DG:function(){return u},E8:function(){return f},NR:function(){return m},o0:function(){return s},yD:function(){return d}});var i=n(14516),r=(n(4631),n(12198)),a=n(49684),o=n(65810),s=function(t,e,n){return c(e,n.time_zone).format(t)},c=(0,i.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",hour:(0,o.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,o.y)(t)?"h12":"h23",timeZone:"server"===t.time_zone?e:void 0})})),u=function(t,e,n){return l(e,n.time_zone).format(t)},l=(0,i.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{year:"numeric",month:"short",day:"numeric",hour:(0,o.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,o.y)(t)?"h12":"h23",timeZone:"server"===t.time_zone?e:void 0})})),d=function(t,e,n){return h(e,n.time_zone).format(t)},h=(0,i.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{month:"short",day:"numeric",hour:(0,o.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,o.y)(t)?"h12":"h23",timeZone:"server"===t.time_zone?e:void 0})})),f=function(t,e,n){return v(e,n.time_zone).format(t)},v=(0,i.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{year:"numeric",month:"long",day:"numeric",hour:(0,o.y)(t)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,o.y)(t)?"h12":"h23",timeZone:"server"===t.time_zone?e:void 0})})),m=function(t,e,n){return"".concat((0,r.WB)(t,e,n),", ").concat((0,a.mr)(t,e,n))}},49684:function(t,e,n){n.d(e,{Vu:function(){return s},Zs:function(){return d},mr:function(){return a},xO:function(){return u}});var i=n(14516),r=(n(4631),n(65810)),a=function(t,e,n){return o(e,n.time_zone).format(t)},o=(0,i.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{hour:"numeric",minute:"2-digit",hourCycle:(0,r.y)(t)?"h12":"h23",timeZone:"server"===t.time_zone?e:void 0})})),s=function(t,e,n){return c(e,n.time_zone).format(t)},c=(0,i.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{hour:(0,r.y)(t)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hourCycle:(0,r.y)(t)?"h12":"h23",timeZone:"server"===t.time_zone?e:void 0})})),u=function(t,e,n){return l(e,n.time_zone).format(t)},l=(0,i.Z)((function(t,e){return new Intl.DateTimeFormat(t.language,{weekday:"long",hour:(0,r.y)(t)?"numeric":"2-digit",minute:"2-digit",hourCycle:(0,r.y)(t)?"h12":"h23",timeZone:"server"===t.time_zone?e:void 0})})),d=function(t,e,n){return h(e,n.time_zone).format(t)},h=(0,i.Z)((function(t,e){return new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"2-digit",hour12:!1,timeZone:"server"===t.time_zone?e:void 0})}))},87367:function(t,e,n){n.d(e,{Z:function(){return r}});var i=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=""+t,i=1;i<e;i++)n=parseInt(n)<Math.pow(10,i)?"0".concat(n):n;return n};function r(t){var e=Math.floor(t/1e3/3600),n=Math.floor(t/1e3%3600/60),r=Math.floor(t/1e3%3600%60),a=Math.floor(t%1e3);return e>0?"".concat(e,":").concat(i(n),":").concat(i(r)):n>0?"".concat(n,":").concat(i(r)):r>0||a>0?"".concat(r).concat(a>0?".".concat(i(a,3)):""):null}},65810:function(t,e,n){n.d(e,{y:function(){return a}});var i=n(14516),r=n(66477),a=(0,i.Z)((function(t){if(t.time_format===r.zt.language||t.time_format===r.zt.system){var e=t.time_format===r.zt.language?t.language:void 0;return new Date("January 1, 2023 22:00:00").toLocaleString(e).includes("10")}return t.time_format===r.zt.am_pm}))},85157:function(t,e,n){n.d(e,{t:function(){return s}});var i=n(71650),r=n(33368),a=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.localStorage;(0,i.Z)(this,t),this.storage=void 0,this._storage={},this._listeners={},this.storage=n,n===window.localStorage&&window.addEventListener("storage",(function(t){t.key&&e.hasKey(t.key)&&(e._storage[t.key]=t.newValue?JSON.parse(t.newValue):t.newValue,e._listeners[t.key]&&e._listeners[t.key].forEach((function(n){return n(t.oldValue?JSON.parse(t.oldValue):t.oldValue,e._storage[t.key])})))}))}return(0,r.Z)(t,[{key:"addFromStorage",value:function(t){if(!this._storage[t]){var e=this.storage.getItem(t);e&&(this._storage[t]=JSON.parse(e))}}},{key:"subscribeChanges",value:function(t,e){var n=this;return this._listeners[t]?this._listeners[t].push(e):this._listeners[t]=[e],function(){n.unsubscribeChanges(t,e)}}},{key:"unsubscribeChanges",value:function(t,e){if(t in this._listeners){var n=this._listeners[t].indexOf(e);-1!==n&&this._listeners[t].splice(n,1)}}},{key:"hasKey",value:function(t){return t in this._storage}},{key:"getValue",value:function(t){return this._storage[t]}},{key:"setValue",value:function(t,e){var n=this._storage[t];this._storage[t]=e;try{void 0===e?this.storage.removeItem(t):this.storage.setItem(t,JSON.stringify(e))}catch(i){}finally{this._listeners[t]&&this._listeners[t].forEach((function(t){return t(n,e)}))}}}]),t}(),o={},s=function(t){return function(e){var n,i=t.storage||"localStorage";i&&i in o?n=o[i]:(n=new a(window[i]),o[i]=n);var r=String(e.key),s=t.key||String(e.key),c=e.initializer?e.initializer():void 0;n.addFromStorage(s);var u=!1!==t.subscribe?function(t){return n.subscribeChanges(s,(function(n,i){t.requestUpdate(e.key,n)}))}:void 0,l=function(){return n.hasKey(s)?n.getValue(s):c};return{kind:"method",placement:"prototype",key:e.key,descriptor:{set:function(i){!function(i,r){var a;t.state&&(a=l()),n.setValue(s,r),t.state&&i.requestUpdate(e.key,a)}(this,i)},get:function(){return l()},enumerable:!0,configurable:!0},finisher:function(n){if(t.state&&t.subscribe){var i=n.prototype.connectedCallback,a=n.prototype.disconnectedCallback;n.prototype.connectedCallback=function(){i.call(this),this["__unbsubLocalStorage".concat(r)]=null==u?void 0:u(this)},n.prototype.disconnectedCallback=function(){var t;a.call(this),null===(t=this["__unbsubLocalStorage".concat(r)])||void 0===t||t.call(this),this["__unbsubLocalStorage".concat(r)]=void 0}}t.state&&n.createProperty(e.key,Object.assign({noAccessor:!0},t.stateOptions))}}}}},41826:function(t,e,n){n.r(e),n.d(e,{computeStateDisplay:function(){return p},computeStateDisplayFromEntityAttributes:function(){return y},computeStateDisplaySingleEntity:function(){return m}});var i=n(56007),r=n(66477),a=n(24833),o=n(87367),s={ms:1,s:1e3,min:6e4,h:36e5,d:864e5},c=n(12198),u=n(44583),l=n(49684),d=n(18457),h=n(68307),f=n(58831),v=n(40095),m=function(t,e,n,i,r,a){return y(t,n,i,r,e.entity_id,e.attributes,void 0!==a?a:e.state)},p=function(t,e,n,i,r,a){var o=null==r?void 0:r[e.entity_id];return y(t,n,i,o,e.entity_id,e.attributes,void 0!==a?a:e.state)},y=function(t,e,n,m,p,y,g){if(g===i.lz||g===i.nZ)return t("state.default.".concat(g));if((0,d.sJ)(y)){if("duration"===y.device_class&&y.unit_of_measurement&&s[y.unit_of_measurement])try{return b=g,k=y.unit_of_measurement,(0,o.Z)(parseFloat(b)*s[k])||"0"}catch(L){}if("monetary"===y.device_class)try{return(0,d.uf)(g,e,Object.assign({style:"currency",currency:y.unit_of_measurement,minimumFractionDigits:2},(0,d.l4)({state:g,attributes:y},m)))}catch(L){}var _=y.unit_of_measurement?"%"===y.unit_of_measurement?(0,h.K)(e)+"%":" ".concat(y.unit_of_measurement):"";return"".concat((0,d.uf)(g,e,(0,d.l4)({state:g,attributes:y},m))).concat(_)}var b,k,w,Z=(0,f.M)(p);if("datetime"===Z){var x=new Date(g);return(0,u.o0)(x,e,n)}if(["date","input_datetime","time"].includes(Z))try{var D=g.split(" ");if(2===D.length)return(0,u.o0)(new Date(D.join("T")),Object.assign(Object.assign({},e),{},{time_zone:r.c_.local}),n);if(1===D.length){if(g.includes("-"))return(0,c.p6)(new Date("".concat(g,"T00:00")),Object.assign(Object.assign({},e),{},{time_zone:r.c_.local}),n);if(g.includes(":")){var z=new Date;return(0,l.mr)(new Date("".concat(z.toISOString().split("T")[0],"T").concat(g)),Object.assign(Object.assign({},e),{},{time_zone:r.c_.local}),n)}}return g}catch(C){return g}if("counter"===Z||"number"===Z||"input_number"===Z)return(0,d.uf)(g,e,(0,d.l4)({state:g,attributes:y},m));if(["button","event","image","input_button","scene","stt","tts","wake_word"].includes(Z)||"sensor"===Z&&"timestamp"===y.device_class)try{return(0,u.o0)(new Date(g),e,n)}catch(L){return g}return"update"===Z?"on"===g?(0,a.X4)(y)?(0,v.f)(y,a.k6)&&"number"==typeof y.in_progress?t("ui.card.update.installing_with_progress",{progress:y.in_progress}):t("ui.card.update.installing"):y.latest_version:y.skipped_version===y.latest_version?null!==(w=y.latest_version)&&void 0!==w?w:t("state.default.unavailable"):t("ui.card.update.up_to_date"):(null==m?void 0:m.translation_key)&&t("component.".concat(m.platform,".entity.").concat(Z,".").concat(m.translation_key,".state.").concat(g))||y.device_class&&t("component.".concat(Z,".entity_component.").concat(y.device_class,".state.").concat(g))||t("component.".concat(Z,".entity_component._.state.").concat(g))||g}},50239:function(t,e,n){n.d(e,{Y:function(){return r},u:function(){return i}});var i=function(t,e,n){return Math.min(Math.max(t,e),n)},r=function(t,e,n){var i;return i=null!=e?Math.max(t,e):t,i=null!=n?Math.min(i,n):i}},18457:function(t,e,n){n.d(e,{Hd:function(){return s},SL:function(){return a},l4:function(){return u},sJ:function(){return o},uf:function(){return c}});var i=n(66477),r=n(27593),a=function(t){return o(t.attributes)},o=function(t){return!!t.unit_of_measurement||!!t.state_class},s=function(t){switch(t.number_format){case i.y4.comma_decimal:return["en-US","en"];case i.y4.decimal_comma:return["de","es","it"];case i.y4.space_comma:return["fr","sv","cs"];case i.y4.system:return;default:return t.language}},c=function(t,e,n){var a=e?s(e):void 0;if(Number.isNaN=Number.isNaN||function t(e){return"number"==typeof e&&t(e)},(null==e?void 0:e.number_format)!==i.y4.none&&!Number.isNaN(Number(t))&&Intl)try{return new Intl.NumberFormat(a,l(t,n)).format(Number(t))}catch(o){return console.error(o),new Intl.NumberFormat(void 0,l(t,n)).format(Number(t))}return!Number.isNaN(Number(t))&&""!==t&&(null==e?void 0:e.number_format)===i.y4.none&&Intl?new Intl.NumberFormat("en-US",l(t,Object.assign(Object.assign({},n),{},{useGrouping:!1}))).format(Number(t)):"string"==typeof t?t:"".concat((0,r.N)(t,null==n?void 0:n.maximumFractionDigits).toString()).concat("currency"===(null==n?void 0:n.style)?" ".concat(n.currency):"")},u=function(t,e){var n,i=null==e?void 0:e.display_precision;return null!=i?{maximumFractionDigits:i,minimumFractionDigits:i}:Number.isInteger(Number(null==t||null===(n=t.attributes)||void 0===n?void 0:n.step))&&Number.isInteger(Number(null==t?void 0:t.state))?{maximumFractionDigits:0}:void 0},l=function(t,e){var n=Object.assign({maximumFractionDigits:2},e);if("string"!=typeof t)return n;if(!e||void 0===e.minimumFractionDigits&&void 0===e.maximumFractionDigits){var i=t.indexOf(".")>-1?t.split(".")[1].length:0;n.minimumFractionDigits=i,n.maximumFractionDigits=i}return n}},68307:function(t,e,n){n.d(e,{K:function(){return i}});var i=function(t){switch(null==t?void 0:t.language){case"cz":case"de":case"fi":case"fr":case"sk":case"sv":return" ";default:return""}}},69934:function(t,e,n){n.d(e,{q:function(){return i}});var i=function(t){var e=window.location.pathname;return t?e+"?"+t:e}},15493:function(t,e,n){n.d(e,{Q2:function(){return a},io:function(){return o},j4:function(){return c},ou:function(){return s},pc:function(){return u}});var i=n(68990),r=n(40039),a=function(){var t,e={},n=new URLSearchParams(location.search),a=(0,r.Z)(n.entries());try{for(a.s();!(t=a.n()).done;){var o=(0,i.Z)(t.value,2),s=o[0],c=o[1];e[s]=c}}catch(u){a.e(u)}finally{a.f()}return e},o=function(t){return new URLSearchParams(window.location.search).get(t)},s=function(t){var e=new URLSearchParams;return Object.entries(t).forEach((function(t){var n=(0,i.Z)(t,2),r=n[0],a=n[1];e.append(r,a)})),e.toString()},c=function(t){var e=new URLSearchParams(window.location.search);return Object.entries(t).forEach((function(t){var n=(0,i.Z)(t,2),r=n[0],a=n[1];e.set(r,a)})),e.toString()},u=function(t){var e=new URLSearchParams(window.location.search);return e.delete(t),e.toString()}},8330:function(t,e,n){n.d(e,{P:function(){return i}});var i=function(t,e){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=0,o=function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];var u=Date.now();a||!1!==i||(a=u);var l=e-(u-a);l<=0||l>e?(n&&(clearTimeout(n),n=void 0),a=u,t.apply(void 0,s)):n||!1===r||(n=window.setTimeout((function(){a=!1===i?0:Date.now(),n=void 0,t.apply(void 0,s)}),l))};return o.cancel=function(){clearTimeout(n),n=void 0,a=0},o}},39258:function(t,e,n){n.d(e,{U:function(){return f}});var i=n(55070),r=n(15838),a=n(89525),o=n(58831),s=n(6229),c=n(56007),u=n(22134),l={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};var d=0,h=new Map;function f(t,e,n){return function(t,e,n){var i;if(!n||t===c.nZ)return(0,u.g)("--history-unavailable-color",e);if(t===c.lz)return(0,u.g)("--history-unknown-color",e);var d=(0,s.tD)(n,t);if(d){var h=(0,u.g)(d,e);if(h){var f=(0,o.M)(n.entity_id),v=null===(i=l[f])||void 0===i?void 0:i[t];return v?(0,r.uO)((0,a.C)((0,r.Rw)((0,r.wK)(h)),v)):h}}}(t,e,n)||function(t,e){if(h.has(t))return h.get(t);var n=(0,i.hZ)(d,e);return d++,h.set(t,n),n}(t,e)}},31206:function(t,e,n){n.r(e),n.d(e,{HaCircularProgress:function(){return p}});var i,r=n(88962),a=n(33368),o=n(71650),s=n(82390),c=n(69205),u=n(70906),l=n(91808),d=n(34541),h=n(47838),f=n(30879),v=n(68144),m=n(79932),p=(0,l.Z)([(0,m.Mo)("ha-circular-progress")],(function(t,e){var n=function(e){(0,c.Z)(i,e);var n=(0,u.Z)(i);function i(){var e;(0,o.Z)(this,i);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=n.call.apply(n,[this].concat(a)),t((0,s.Z)(e)),e}return(0,a.Z)(i)}(e);return{F:n,d:[{kind:"field",decorators:[(0,m.Cb)({type:Boolean})],key:"active",value:function(){return!1}},{kind:"field",decorators:[(0,m.Cb)()],key:"alt",value:function(){return"Loading"}},{kind:"field",decorators:[(0,m.Cb)()],key:"size",value:function(){return"medium"}},{kind:"set",key:"density",value:function(t){}},{kind:"get",key:"density",value:function(){switch(this.size){case"tiny":return-8;case"small":return-5;case"medium":default:return 0;case"large":return 5}}},{kind:"set",key:"indeterminate",value:function(t){}},{kind:"get",key:"indeterminate",value:function(){return this.active}},{kind:"get",static:!0,key:"styles",value:function(){return[(0,d.Z)((0,h.Z)(n),"styles",this),(0,v.iv)(i||(i=(0,r.Z)([":host{overflow:hidden}"])))]}}]}}),f.D)},2315:function(t,e,n){var i,r=n(88962),a=n(33368),o=n(71650),s=n(82390),c=n(69205),u=n(70906),l=n(91808),d=n(68144),h=n(79932);n(10983),(0,l.Z)([(0,h.Mo)("ha-icon-button-arrow-prev")],(function(t,e){var n=function(e){(0,c.Z)(i,e);var n=(0,u.Z)(i);function i(){var e;(0,o.Z)(this,i);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=n.call.apply(n,[this].concat(a)),t((0,s.Z)(e)),e}return(0,a.Z)(i)}(e);return{F:n,d:[{kind:"field",decorators:[(0,h.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,h.Cb)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,h.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,h.SB)()],key:"_icon",value:function(){return"ltr"===document.dir?"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z":"M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z"}},{kind:"method",key:"render",value:function(){var t;return(0,d.dy)(i||(i=(0,r.Z)([' <ha-icon-button .disabled="','" .label="','" .path="','"></ha-icon-button> '])),this.disabled,this.label||(null===(t=this.hass)||void 0===t?void 0:t.localize("ui.common.back"))||"Back",this._icon)}}]}}),d.oi)},10983:function(t,e,n){n.d(e,{$:function(){return y}});var i,r,a,o,s=n(88962),c=n(33368),u=n(71650),l=n(82390),d=n(69205),h=n(70906),f=n(91808),v=(n(20210),n(68144)),m=n(79932),p=n(30153),y=(n(52039),(0,f.Z)([(0,m.Mo)("ha-icon-button")],(function(t,e){var n=function(e){(0,d.Z)(i,e);var n=(0,h.Z)(i);function i(){var e;(0,u.Z)(this,i);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),t((0,l.Z)(e)),e}return(0,c.Z)(i)}(e);return{F:n,d:[{kind:"field",decorators:[(0,m.Cb)({type:Boolean,reflect:!0})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,m.Cb)({type:String})],key:"path",value:void 0},{kind:"field",decorators:[(0,m.Cb)({type:String})],key:"label",value:void 0},{kind:"field",decorators:[(0,m.Cb)({type:String,attribute:"aria-haspopup"})],key:"ariaHasPopup",value:void 0},{kind:"field",decorators:[(0,m.Cb)({type:Boolean})],key:"hideTitle",value:function(){return!1}},{kind:"field",decorators:[(0,m.IO)("mwc-icon-button",!0)],key:"_button",value:void 0},{kind:"method",key:"focus",value:function(){var t;null===(t=this._button)||void 0===t||t.focus()}},{kind:"field",static:!0,key:"shadowRootOptions",value:function(){return{mode:"open",delegatesFocus:!0}}},{kind:"method",key:"render",value:function(){return(0,v.dy)(i||(i=(0,s.Z)([' <mwc-icon-button aria-label="','" title="','" aria-haspopup="','" .disabled="','"> '," </mwc-icon-button> "])),(0,p.o)(this.label),(0,p.o)(this.hideTitle?void 0:this.label),(0,p.o)(this.ariaHasPopup),this.disabled,this.path?(0,v.dy)(r||(r=(0,s.Z)(['<ha-svg-icon .path="','"></ha-svg-icon>'])),this.path):(0,v.dy)(a||(a=(0,s.Z)(["<slot></slot>"]))))}},{kind:"get",static:!0,key:"styles",value:function(){return(0,v.iv)(o||(o=(0,s.Z)([":host{display:inline-block;outline:0}:host([disabled]){pointer-events:none}mwc-icon-button{--mdc-theme-on-primary:currentColor;--mdc-theme-text-disabled-on-light:var(--disabled-text-color)}"])))}}]}}),v.oi))},73366:function(t,e,n){n.d(e,{M:function(){return y}});var i,r=n(88962),a=n(33368),o=n(71650),s=n(82390),c=n(69205),u=n(70906),l=n(91808),d=n(34541),h=n(47838),f=n(61092),v=n(96762),m=n(68144),p=n(79932),y=(0,l.Z)([(0,p.Mo)("ha-list-item")],(function(t,e){var n=function(e){(0,c.Z)(i,e);var n=(0,u.Z)(i);function i(){var e;(0,o.Z)(this,i);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=n.call.apply(n,[this].concat(a)),t((0,s.Z)(e)),e}return(0,a.Z)(i)}(e);return{F:n,d:[{kind:"method",key:"renderRipple",value:function(){return this.noninteractive?"":(0,d.Z)((0,h.Z)(n.prototype),"renderRipple",this).call(this)}},{kind:"get",static:!0,key:"styles",value:function(){return[v.W,(0,m.iv)(i||(i=(0,r.Z)([":host{padding-left:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-right:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px))}:host([graphic=avatar]:not([twoLine])),:host([graphic=icon]:not([twoLine])){height:48px}span.material-icons:first-of-type{margin-inline-start:0px!important;margin-inline-end:var(--mdc-list-item-graphic-margin,16px)!important;direction:var(--direction)}span.material-icons:last-of-type{margin-inline-start:auto!important;margin-inline-end:0px!important;direction:var(--direction)}.mdc-deprecated-list-item__meta{display:var(--mdc-list-item-meta-display);align-items:center}:host([multiline-secondary]){height:auto}:host([multiline-secondary]) .mdc-deprecated-list-item__text{padding:8px 0}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text{text-overflow:initial;white-space:normal;overflow:auto;display:inline-block;margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text{margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text::before{display:none}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text::before{display:none}:host([disabled]){color:var(--disabled-text-color)}:host([noninteractive]){pointer-events:unset}"])))]}}]}}),f.K)},48932:function(t,e,n){var i,r,a,o=n(88962),s=n(33368),c=n(71650),u=n(82390),l=n(69205),d=n(70906),h=n(91808),f=n(34541),v=n(47838),m=n(68144),p=n(79932),y=n(47181),g=n(6936);n(10983),(0,h.Z)([(0,p.Mo)("ha-menu-button")],(function(t,e){var n=function(e){(0,l.Z)(i,e);var n=(0,d.Z)(i);function i(){var e;(0,c.Z)(this,i);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),t((0,u.Z)(e)),e}return(0,s.Z)(i)}(e);return{F:n,d:[{kind:"field",decorators:[(0,p.Cb)({type:Boolean})],key:"hassio",value:function(){return!1}},{kind:"field",decorators:[(0,p.Cb)()],key:"narrow",value:void 0},{kind:"field",decorators:[(0,p.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,p.SB)()],key:"_hasNotifications",value:function(){return!1}},{kind:"field",decorators:[(0,p.SB)()],key:"_show",value:function(){return!1}},{kind:"field",key:"_alwaysVisible",value:function(){return!1}},{kind:"field",key:"_attachNotifOnConnect",value:function(){return!1}},{kind:"field",key:"_unsubNotifications",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,f.Z)((0,v.Z)(n.prototype),"connectedCallback",this).call(this),this._attachNotifOnConnect&&(this._attachNotifOnConnect=!1,this._subscribeNotifications())}},{kind:"method",key:"disconnectedCallback",value:function(){(0,f.Z)((0,v.Z)(n.prototype),"disconnectedCallback",this).call(this),this._unsubNotifications&&(this._attachNotifOnConnect=!0,this._unsubNotifications(),this._unsubNotifications=void 0)}},{kind:"method",key:"render",value:function(){if(!this._show)return m.Ld;var t=this._hasNotifications&&(this.narrow||"always_hidden"===this.hass.dockedSidebar);return(0,m.dy)(i||(i=(0,o.Z)([' <ha-icon-button .label="','" .path="','" @click="','"></ha-icon-button> '," "])),this.hass.localize("ui.sidebar.sidebar_toggle"),"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",this._toggleMenu,t?(0,m.dy)(r||(r=(0,o.Z)(['<div class="dot"></div>']))):"")}},{kind:"method",key:"firstUpdated",value:function(t){(0,f.Z)((0,v.Z)(n.prototype),"firstUpdated",this).call(this,t),this.hassio&&(this._alwaysVisible=(Number(window.parent.frontendVersion)||0)<20190710)}},{kind:"method",key:"willUpdate",value:function(t){if((0,f.Z)((0,v.Z)(n.prototype),"willUpdate",this).call(this,t),t.has("narrow")||t.has("hass")){var e=t.has("hass")?t.get("hass"):this.hass,i=(t.has("narrow")?t.get("narrow"):this.narrow)||"always_hidden"===(null==e?void 0:e.dockedSidebar),r=this.narrow||"always_hidden"===this.hass.dockedSidebar;this.hasUpdated&&i===r||(this._show=r||this._alwaysVisible,r?this._subscribeNotifications():this._unsubNotifications&&(this._unsubNotifications(),this._unsubNotifications=void 0))}}},{kind:"method",key:"_subscribeNotifications",value:function(){var t=this;if(this._unsubNotifications)throw new Error("Already subscribed");this._unsubNotifications=(0,g.r)(this.hass.connection,(function(e){t._hasNotifications=e.length>0}))}},{kind:"method",key:"_toggleMenu",value:function(){(0,y.B)(this,"hass-toggle-menu")}},{kind:"get",static:!0,key:"styles",value:function(){return(0,m.iv)(a||(a=(0,o.Z)([":host{position:relative}.dot{pointer-events:none;position:absolute;background-color:var(--accent-color);width:12px;height:12px;top:9px;right:7px;border-radius:50%;border:2px solid var(--app-header-background-color)}"])))}}]}}),m.oi)},52039:function(t,e,n){n.d(e,{C:function(){return p}});var i,r,a,o,s=n(88962),c=n(33368),u=n(71650),l=n(82390),d=n(69205),h=n(70906),f=n(91808),v=n(68144),m=n(79932),p=(0,f.Z)([(0,m.Mo)("ha-svg-icon")],(function(t,e){var n=function(e){(0,d.Z)(i,e);var n=(0,h.Z)(i);function i(){var e;(0,u.Z)(this,i);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),t((0,l.Z)(e)),e}return(0,c.Z)(i)}(e);return{F:n,d:[{kind:"field",decorators:[(0,m.Cb)()],key:"path",value:void 0},{kind:"field",decorators:[(0,m.Cb)()],key:"secondaryPath",value:void 0},{kind:"field",decorators:[(0,m.Cb)()],key:"viewBox",value:void 0},{kind:"method",key:"render",value:function(){return(0,v.YP)(i||(i=(0,s.Z)([' <svg viewBox="','" preserveAspectRatio="xMidYMid meet" focusable="false" role="img" aria-hidden="true"> <g> '," "," </g> </svg>"])),this.viewBox||"0 0 24 24",this.path?(0,v.YP)(r||(r=(0,s.Z)(['<path class="primary-path" d="','"></path>'])),this.path):v.Ld,this.secondaryPath?(0,v.YP)(a||(a=(0,s.Z)(['<path class="secondary-path" d="','"></path>'])),this.secondaryPath):v.Ld)}},{kind:"get",static:!0,key:"styles",value:function(){return(0,v.iv)(o||(o=(0,s.Z)([":host{display:var(--ha-icon-display,inline-flex);align-items:center;justify-content:center;position:relative;vertical-align:middle;fill:var(--icon-primary-color,currentcolor);width:var(--mdc-icon-size,24px);height:var(--mdc-icon-size,24px)}svg{width:100%;height:100%;pointer-events:none;display:block}path.primary-path{opacity:var(--icon-primary-opactity,1)}path.secondary-path{fill:var(--icon-secondary-color,currentcolor);opacity:var(--icon-secondary-opactity,.5)}"])))}}]}}),v.oi)},36226:function(t,e,n){var i,r=n(88962),a=n(33368),o=n(71650),s=n(82390),c=n(69205),u=n(70906),l=n(91808),d=n(67625),h=n(71711),f=n(68144),v=n(79932);(0,l.Z)([(0,v.Mo)("ha-top-app-bar-fixed")],(function(t,e){var n=function(e){(0,c.Z)(i,e);var n=(0,u.Z)(i);function i(){var e;(0,o.Z)(this,i);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=n.call.apply(n,[this].concat(a)),t((0,s.Z)(e)),e}return(0,a.Z)(i)}(e);return{F:n,d:[{kind:"field",static:!0,key:"styles",value:function(){return[h.W,(0,f.iv)(i||(i=(0,r.Z)([".mdc-top-app-bar__row{height:var(--header-height);border-bottom:var(--app-header-border-bottom)}.mdc-top-app-bar--fixed-adjust{padding-top:var(--header-height)}.mdc-top-app-bar{--mdc-typography-headline6-font-weight:400;color:var(--app-header-text-color,var(--mdc-theme-on-primary,#fff));background-color:var(--app-header-background-color,var(--mdc-theme-primary))}"])))]}}]}}),d.s)},22814:function(t,e,n){n.d(e,{Cp:function(){return c},TZ:function(){return u},W2:function(){return s},YY:function(){return l},iI:function(){return o},oT:function(){return a}});var i=n(99312),r=n(81043),a=("".concat(location.protocol,"//").concat(location.host),function(t){return t.map((function(t){if("string"!==t.type)return t;switch(t.name){case"username":return Object.assign(Object.assign({},t),{},{autocomplete:"username"});case"password":return Object.assign(Object.assign({},t),{},{autocomplete:"current-password"});case"code":return Object.assign(Object.assign({},t),{},{autocomplete:"one-time-code"});default:return t}}))}),o=function(t,e){return t.callWS({type:"auth/sign_path",path:e})},s=function(){var t=(0,r.Z)((0,i.Z)().mark((function t(e,n,r,a){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.callWS({type:"config/auth_provider/homeassistant/create",user_id:n,username:r,password:a}));case 1:case"end":return t.stop()}}),t)})));return function(e,n,i,r){return t.apply(this,arguments)}}(),c=function(t,e,n){return t.callWS({type:"config/auth_provider/homeassistant/change_password",current_password:e,new_password:n})},u=function(t,e,n){return t.callWS({type:"config/auth_provider/homeassistant/admin_change_password",user_id:e,password:n})},l=function(t){return t.callWS({type:"auth/delete_all_refresh_tokens"})}},6936:function(t,e,n){n.d(e,{r:function(){return a}});var i=n(71650),r=n(33368),a=function(t,e){var n=new o,i=t.subscribeMessage((function(t){return e(n.processMessage(t))}),{type:"persistent_notification/subscribe"});return function(){i.then((function(t){return null==t?void 0:t()}))}},o=function(){function t(){(0,i.Z)(this,t),this.notifications=void 0,this.notifications={}}return(0,r.Z)(t,[{key:"processMessage",value:function(t){if("removed"===t.type)for(var e=0,n=Object.keys(t.notifications);e<n.length;e++){var i=n[e];delete this.notifications[i]}else this.notifications=Object.assign(Object.assign({},this.notifications),t.notifications);return Object.values(this.notifications)}}]),t}()},3542:function(t,e,n){n.r(e);var i,r,a,o,s,c,u,l,d=n(53709),h=n(40039),f=n(99312),v=n(81043),m=n(88962),p=n(33368),y=n(71650),g=n(82390),_=n(69205),b=n(70906),k=n(91808),w=n(34541),Z=n(47838),x=n(72277),D=n(68144),z=n(79932),L=n(76680),C=n(85157),S=n(83849),V=n(69934),N=n(15493),I=n(87744),O=n(62336),P=(n(51324),n(31206),n(29272),n(10983),n(2315),n(48932),n(63681),n(36226),n(57066)),F=n(57292),M=n(74186),H=n(58763),T=n(41499),j=n(73826),B=n(11654),E=(0,k.Z)(null,(function(t,e){var n,k=function(e){(0,_.Z)(i,e);var n=(0,b.Z)(i);function i(){var e;(0,y.Z)(this,i),e=n.call(this),t((0,g.Z)(e));var r=new Date;r.setHours(r.getHours()-1,0,0,0),e._startDate=r;var a=new Date;return a.setHours(a.getHours()+2,0,0,0),e._endDate=a,e}return(0,p.Z)(i)}(e);return{F:k,d:[{kind:"field",decorators:[(0,z.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,z.Cb)({reflect:!0,type:Boolean})],key:"narrow",value:void 0},{kind:"field",decorators:[(0,z.Cb)({reflect:!0,type:Boolean})],key:"rtl",value:function(){return!1}},{kind:"field",decorators:[(0,z.SB)()],key:"_startDate",value:void 0},{kind:"field",decorators:[(0,z.SB)()],key:"_endDate",value:void 0},{kind:"field",decorators:[(0,C.t)({key:"historyPickedValue",state:!0,subscribe:!1})],key:"_targetPickerValue",value:void 0},{kind:"field",decorators:[(0,z.SB)()],key:"_isLoading",value:function(){return!1}},{kind:"field",decorators:[(0,z.SB)()],key:"_stateHistory",value:void 0},{kind:"field",decorators:[(0,z.SB)()],key:"_deviceEntityLookup",value:void 0},{kind:"field",decorators:[(0,z.SB)()],key:"_areaEntityLookup",value:void 0},{kind:"field",decorators:[(0,z.SB)()],key:"_areaDeviceLookup",value:void 0},{kind:"field",decorators:[(0,z.SB)()],key:"_showBack",value:void 0},{kind:"field",decorators:[(0,z.IO)("state-history-charts")],key:"_stateHistoryCharts",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,w.Z)((0,Z.Z)(k.prototype),"connectedCallback",this).call(this),this.hasUpdated&&this._getHistory()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,w.Z)((0,Z.Z)(k.prototype),"disconnectedCallback",this).call(this),this._unsubscribeHistory()}},{kind:"method",key:"hassSubscribe",value:function(){var t=this;return[(0,M.LM)(this.hass.connection,(function(e){t._deviceEntityLookup=(0,F.pI)(e),t._areaEntityLookup=(0,P.TD)(e)})),(0,F.q4)(this.hass.connection,(function(e){t._areaDeviceLookup=(0,P.Dl)(e)}))]}},{kind:"method",key:"_goBack",value:function(){history.back()}},{kind:"method",key:"render",value:function(){return(0,D.dy)(i||(i=(0,m.Z)([" <ha-top-app-bar-fixed> ",' <div slot="title">',"</div> ",' <ha-icon-button slot="actionItems" @click="','" .disabled="','" .path="','" .label="','"></ha-icon-button> <div class="flex content"> <div class="filters"> <ha-date-range-picker .hass="','" ?disabled="','" .startDate="','" .endDate="','" @change="','"></ha-date-range-picker> <ha-target-picker .hass="','" .value="','" .disabled="','" addOnTop @value-changed="','"></ha-target-picker> </div> '," </div> </ha-top-app-bar-fixed> "])),this._showBack?(0,D.dy)(r||(r=(0,m.Z)([' <ha-icon-button-arrow-prev slot="navigationIcon" @click="','"></ha-icon-button-arrow-prev> '])),this._goBack):(0,D.dy)(a||(a=(0,m.Z)([' <ha-menu-button slot="navigationIcon" .hass="','" .narrow="','"></ha-menu-button> '])),this.hass,this.narrow),this.hass.localize("panel.history"),this._targetPickerValue?(0,D.dy)(o||(o=(0,m.Z)([' <ha-icon-button slot="actionItems" @click="','" .disabled="','" .path="','" .label="','"></ha-icon-button> '])),this._removeAll,this._isLoading,"M14.76,20.83L17.6,18L14.76,15.17L16.17,13.76L19,16.57L21.83,13.76L23.24,15.17L20.43,18L23.24,20.83L21.83,22.24L19,19.4L16.17,22.24L14.76,20.83M12,12V19.88C12.04,20.18 11.94,20.5 11.71,20.71C11.32,21.1 10.69,21.1 10.3,20.71L8.29,18.7C8.06,18.47 7.96,18.16 8,17.87V12H7.97L2.21,4.62C1.87,4.19 1.95,3.56 2.38,3.22C2.57,3.08 2.78,3 3,3V3H17V3C17.22,3 17.43,3.08 17.62,3.22C18.05,3.56 18.13,4.19 17.79,4.62L12.03,12H12Z",this.hass.localize("ui.panel.history.remove_all")):"",this._getHistory,this._isLoading||!this._targetPickerValue,"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z",this.hass.localize("ui.common.refresh"),this.hass,this._isLoading,this._startDate,this._endDate,this._dateRangeChanged,this.hass,this._targetPickerValue,this._isLoading,this._targetsChanged,this._isLoading?(0,D.dy)(s||(s=(0,m.Z)(['<div class="progress-wrapper"> <ha-circular-progress active alt="','"></ha-circular-progress> </div>'])),this.hass.localize("ui.common.loading")):this._targetPickerValue?(0,D.dy)(u||(u=(0,m.Z)([' <state-history-charts .hass="','" .historyData="','" .startTime="','" .endTime="','"> </state-history-charts> '])),this.hass,this._stateHistory,this._startDate,this._endDate):(0,D.dy)(c||(c=(0,m.Z)(['<div class="start-search"> '," </div>"])),this.hass.localize("ui.panel.history.start_search")))}},{kind:"method",key:"willUpdate",value:function(t){if((0,w.Z)((0,Z.Z)(k.prototype),"willUpdate",this).call(this,t),!this.hasUpdated){var e=(0,N.Q2)(),n=e.entity_id,i=e.device_id,r=e.area_id;if((n||i||r)&&(this._targetPickerValue={}),n){var a=n.split(",");this._targetPickerValue.entity_id=a}if(i){var o=i.split(",");this._targetPickerValue.device_id=o}if(r){var s=r.split(",");this._targetPickerValue.area_id=s}var c=e.start_date;c&&(this._startDate=new Date(c));var u=e.end_date;u&&(this._endDate=new Date(u))}}},{kind:"method",key:"firstUpdated",value:function(t){(0,w.Z)((0,Z.Z)(k.prototype),"firstUpdated",this).call(this,t),"1"===(0,N.Q2)().back&&history.length>1&&(this._showBack=!0,(0,S.c)((0,V.q)((0,N.pc)("back")),{replace:!0}))}},{kind:"method",key:"updated",value:function(t){if(this._targetPickerValue&&(t.has("_startDate")||t.has("_endDate")||t.has("_targetPickerValue")||!this._stateHistory&&(t.has("_deviceEntityLookup")||t.has("_areaEntityLookup")||t.has("_areaDeviceLookup")))&&this._getHistory(),t.has("hass")||t.has("_entities")){var e=t.get("hass");e&&e.language===this.hass.language||(this.rtl=(0,I.HE)(this.hass))}}},{kind:"method",key:"_removeAll",value:function(){this._targetPickerValue=void 0,this._updatePath()}},{kind:"method",key:"_getHistory",value:(n=(0,v.Z)((0,f.Z)().mark((function t(){var e,n,i,r,a=this;return(0,f.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._targetPickerValue){t.next=2;break}return t.abrupt("return");case 2:if(this._isLoading=!0,void 0!==(e=this._getEntityIds())){t.next=8;break}return this._isLoading=!1,this._stateHistory=void 0,t.abrupt("return");case 8:if(0!==e.length){t.next=12;break}return this._isLoading=!1,this._stateHistory={line:[],timeline:[]},t.abrupt("return");case 12:return this._subscribed&&this._unsubscribeHistory(),n=new Date,t.next=16,(0,T.ib)(this.hass);case 16:i=t.sent,r=i.numeric_device_classes,this._subscribed=(0,H.Vk)(this.hass,(function(t){a._isLoading=!1,a._stateHistory=(0,H.Nu)(a.hass,t,a.hass.localize,r)}),this._startDate,this._endDate,e),this._subscribed.catch((function(){a._isLoading=!1,a._unsubscribeHistory()})),this._endDate>n&&this._setRedrawTimer();case 21:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{kind:"method",key:"_setRedrawTimer",value:function(){var t=this;clearInterval(this._interval);var e=new Date,n=this._endDate>e?e:this._endDate,i=(0,x.Z)(n,this._startDate);this._interval=window.setInterval((function(){var e;return null===(e=t._stateHistoryCharts)||void 0===e?void 0:e.requestUpdate()}),i<2?1e4:i<10?6e4:O.Q)}},{kind:"method",key:"_unsubscribeHistory",value:function(){this._interval&&(clearInterval(this._interval),this._interval=void 0),this._subscribed&&(this._subscribed.then((function(t){return null==t?void 0:t()})),this._subscribed=void 0)}},{kind:"method",key:"_getEntityIds",value:function(){if(this._targetPickerValue&&void 0!==this._deviceEntityLookup&&void 0!==this._areaEntityLookup&&void 0!==this._areaDeviceLookup){var t=new Set,e=this._targetPickerValue,n=e.area_id,i=e.device_id,r=e.entity_id;if(n){n=(0,L.r)(n);var a,o=(0,h.Z)(n);try{for(o.s();!(a=o.n()).done;){var s=a.value,c=this._areaEntityLookup[s];if(null!=c&&c.length){var u,l=(0,h.Z)(c);try{for(l.s();!(u=l.n()).done;){var f=u.value;null===f.entity_category&&t.add(f.entity_id)}}catch(O){l.e(O)}finally{l.f()}}var v=this._areaDeviceLookup[s];if(null!=v&&v.length){var m,p=(0,h.Z)(v);try{for(p.s();!(m=p.n()).done;){var y=m.value,g=this._deviceEntityLookup[y.id];if(null!=g&&g.length){var _,b=(0,h.Z)(g);try{for(b.s();!(_=b.n()).done;){var k=_.value;k.area_id&&k.area_id!==s||null!==k.entity_category||t.add(k.entity_id)}}catch(O){b.e(O)}finally{b.f()}}}}catch(O){p.e(O)}finally{p.f()}}}}catch(O){o.e(O)}finally{o.f()}}if(i){i=(0,L.r)(i);var w,Z=(0,h.Z)(i);try{for(Z.s();!(w=Z.n()).done;){var x=w.value,D=this._deviceEntityLookup[x];if(null!=D&&D.length){var z,C=(0,h.Z)(D);try{for(C.s();!(z=C.n()).done;){var S=z.value;null===S.entity_category&&t.add(S.entity_id)}}catch(O){C.e(O)}finally{C.f()}}}}catch(O){Z.e(O)}finally{Z.f()}}if(r){r=(0,L.r)(r);var V,N=(0,h.Z)(r);try{for(N.s();!(V=N.n()).done;){var I=V.value;t.add(I)}}catch(O){N.e(O)}finally{N.f()}}return(0,d.Z)(t)}}},{kind:"method",key:"_dateRangeChanged",value:function(t){this._startDate=t.detail.startDate;var e=t.detail.endDate;0===e.getHours()&&0===e.getMinutes()&&(e.setDate(e.getDate()+1),e.setMilliseconds(e.getMilliseconds()-1)),this._endDate=e,this._updatePath()}},{kind:"method",key:"_targetsChanged",value:function(t){this._targetPickerValue=t.detail.value,this._updatePath()}},{kind:"method",key:"_updatePath",value:function(){var t={};this._targetPickerValue&&(this._targetPickerValue.entity_id&&(t.entity_id=(0,L.r)(this._targetPickerValue.entity_id).join(",")),this._targetPickerValue.area_id&&(t.area_id=(0,L.r)(this._targetPickerValue.area_id).join(",")),this._targetPickerValue.device_id&&(t.device_id=(0,L.r)(this._targetPickerValue.device_id).join(","))),this._startDate&&(t.start_date=this._startDate.toISOString()),this._endDate&&(t.end_date=this._endDate.toISOString()),(0,S.c)("/history?".concat((0,N.ou)(t)),{replace:!0})}},{kind:"get",static:!0,key:"styles",value:function(){return[B.Qx,(0,D.iv)(l||(l=(0,m.Z)([".content{padding:0 16px 16px;padding-bottom:max(env(safe-area-inset-bottom),16px)}:host([virtualize]){height:100%}.progress-wrapper{position:relative;display:flex;align-items:center;flex-direction:column;padding:16px}.filters{display:flex;align-items:flex-start;margin-top:16px}ha-date-range-picker{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;max-width:100%;direction:var(--direction)}@media all and (max-width:1025px){.filters{flex-direction:column}ha-date-range-picker{margin-right:0;margin-inline-end:0;width:100%}}.start-search{padding-top:16px;text-align:center;color:var(--secondary-text-color)}"])))]}}]}}),(0,j.f)(D.oi));customElements.define("ha-panel-history",E)},4631:function(t,e,n){n.r(e);n(7151),n(33633),n(25534),n(64827),n(23044),n(1437),n(87520),n(42661),n(78337),n(87065),n(6042),n(19440),n(50897),n(30056),n(12679)},44281:function(t,e,n){n.d(e,{j:function(){return a}});var i=n(99312),r=n(81043),a=function(){var t=(0,r.Z)((0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,new ResizeObserver((function(){})),t.next=9;break;case 4:return t.prev=4,t.t0=t.catch(0),t.next=8,n.e(5442).then(n.bind(n,5442));case 8:window.ResizeObserver=t.sent.default;case 9:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(){return t.apply(this,arguments)}}()},11654:function(t,e,n){n.d(e,{$c:function(){return f},Qx:function(){return d},k1:function(){return l},yu:function(){return h}});var i,r,a,o,s,c=n(88962),u=n(68144),l=(0,u.iv)(i||(i=(0,c.Z)(["button.link{background:0 0;color:inherit;border:none;padding:0;font:inherit;text-align:left;text-decoration:underline;cursor:pointer;outline:0}"]))),d=(0,u.iv)(r||(r=(0,c.Z)([":host{font-family:var(--paper-font-body1_-_font-family);-webkit-font-smoothing:var(--paper-font-body1_-_-webkit-font-smoothing);font-size:var(--paper-font-body1_-_font-size);font-weight:var(--paper-font-body1_-_font-weight);line-height:var(--paper-font-body1_-_line-height)}app-header div[sticky]{height:48px}app-toolbar [main-title]{margin-left:20px}h1{font-family:var(--paper-font-headline_-_font-family);-webkit-font-smoothing:var(--paper-font-headline_-_-webkit-font-smoothing);white-space:var(--paper-font-headline_-_white-space);overflow:var(--paper-font-headline_-_overflow);text-overflow:var(--paper-font-headline_-_text-overflow);font-size:var(--paper-font-headline_-_font-size);font-weight:var(--paper-font-headline_-_font-weight);line-height:var(--paper-font-headline_-_line-height)}h2{font-family:var(--paper-font-title_-_font-family);-webkit-font-smoothing:var(--paper-font-title_-_-webkit-font-smoothing);white-space:var(--paper-font-title_-_white-space);overflow:var(--paper-font-title_-_overflow);text-overflow:var(--paper-font-title_-_text-overflow);font-size:var(--paper-font-title_-_font-size);font-weight:var(--paper-font-title_-_font-weight);line-height:var(--paper-font-title_-_line-height)}h3{font-family:var(--paper-font-subhead_-_font-family);-webkit-font-smoothing:var(--paper-font-subhead_-_-webkit-font-smoothing);white-space:var(--paper-font-subhead_-_white-space);overflow:var(--paper-font-subhead_-_overflow);text-overflow:var(--paper-font-subhead_-_text-overflow);font-size:var(--paper-font-subhead_-_font-size);font-weight:var(--paper-font-subhead_-_font-weight);line-height:var(--paper-font-subhead_-_line-height)}a{color:var(--primary-color)}.secondary{color:var(--secondary-text-color)}.error{color:var(--error-color)}.warning{color:var(--error-color)}mwc-button.warning{--mdc-theme-primary:var(--error-color)}"," .card-actions a{text-decoration:none}.card-actions .warning{--mdc-theme-primary:var(--error-color)}.layout.horizontal,.layout.vertical{display:flex}.layout.inline{display:inline-flex}.layout.horizontal{flex-direction:row}.layout.vertical{flex-direction:column}.layout.wrap{flex-wrap:wrap}.layout.no-wrap{flex-wrap:nowrap}.layout.center,.layout.center-center{align-items:center}.layout.bottom{align-items:flex-end}.layout.center-center,.layout.center-justified{justify-content:center}.flex{flex:1;flex-basis:.000000001px}.flex-auto{flex:1 1 auto}.flex-none{flex:none}.layout.justified{justify-content:space-between}"])),l),h=(0,u.iv)(a||(a=(0,c.Z)(["ha-dialog{--mdc-dialog-min-width:400px;--mdc-dialog-max-width:600px;--mdc-dialog-max-width:min(600px, 95vw);--justify-action-buttons:space-between}ha-dialog .form{color:var(--primary-text-color)}a{color:var(--primary-color)}@media all and (max-width:450px),all and (max-height:500px){ha-dialog{--mdc-dialog-min-width:calc(\n        100vw - env(safe-area-inset-right) - env(safe-area-inset-left)\n      );--mdc-dialog-max-width:calc(\n        100vw - env(safe-area-inset-right) - env(safe-area-inset-left)\n      );--mdc-dialog-min-height:100%;--mdc-dialog-max-height:100%;--vertical-align-dialog:flex-end;--ha-dialog-border-radius:0}}ha-button.warning,mwc-button.warning{--mdc-theme-primary:var(--error-color)}.error{color:var(--error-color)}"]))),f=(0,u.iv)(o||(o=(0,c.Z)([".ha-scrollbar::-webkit-scrollbar{width:.4rem;height:.4rem}.ha-scrollbar::-webkit-scrollbar-thumb{-webkit-border-radius:4px;border-radius:4px;background:var(--scrollbar-thumb-color)}.ha-scrollbar{overflow-y:auto;scrollbar-color:var(--scrollbar-thumb-color) transparent;scrollbar-width:thin}"])));(0,u.iv)(s||(s=(0,c.Z)(["body{background-color:var(--primary-background-color);color:var(--primary-text-color);height:calc(100vh - 32px);width:100vw}"])))}}]);
//# sourceMappingURL=34361-5ttaamJe5Zo.js.map