import{B as ie}from"./Button-6cfc982c.js";import{B as ae}from"./BlockLabel-174b5ba9.js";import{E as oe}from"./Empty-2249105e.js";import{S as se}from"./Index-3b616ac8.js";import{I as p}from"./Image-eaba773f.js";import{n as T}from"./index-f8f499a4.js";import"./svelte/svelte.js";const{SvelteComponent:ue,append:F,assign:_e,attr:b,check_outros:fe,create_component:j,destroy_component:z,destroy_each:x,detach:d,element:q,empty:re,ensure_array_like:G,get_spread_object:me,get_spread_update:ge,group_outros:ce,init:he,insert:v,listen:E,mount_component:C,noop:U,run_all:be,safe_not_equal:de,set_data:ve,set_style:V,space:L,src_url_equal:H,text:ke,toggle_class:S,transition_in:w,transition_out:I}=window.__gradio__svelte__internal;function W(n,e,t){const l=n.slice();return l[28]=e[t],l[30]=t,l}function X(n,e,t){const l=n.slice();return l[28]=e[t],l[30]=t,l}function we(n){let e,t,l,i,o,a,r=G(n[14]?n[14]?.annotations:[]),m=[];for(let u=0;u<r.length;u+=1)m[u]=Y(X(n,r,u));let g=n[6]&&n[14]&&Z(n);return{c(){e=q("div"),t=q("img"),i=L();for(let u=0;u<m.length;u+=1)m[u].c();o=L(),g&&g.c(),a=re(),b(t,"class","base-image svelte-m3v3vb"),H(t.src,l=n[14]?n[14].image.url:null)||b(t,"src",l),b(t,"alt","the base file that is annotated"),S(t,"fit-height",n[7]),b(e,"class","image-container svelte-m3v3vb")},m(u,c){v(u,e,c),F(e,t),F(e,i);for(let f=0;f<m.length;f+=1)m[f]&&m[f].m(e,null);v(u,o,c),g&&g.m(u,c),v(u,a,c)},p(u,c){if(c[0]&16384&&!H(t.src,l=u[14]?u[14].image.url:null)&&b(t,"src",l),c[0]&128&&S(t,"fit-height",u[7]),c[0]&49680){r=G(u[14]?u[14]?.annotations:[]);let f;for(f=0;f<r.length;f+=1){const k=X(u,r,f);m[f]?m[f].p(k,c):(m[f]=Y(k),m[f].c(),m[f].m(e,null))}for(;f<m.length;f+=1)m[f].d(1);m.length=r.length}u[6]&&u[14]?g?g.p(u,c):(g=Z(u),g.c(),g.m(a.parentNode,a)):g&&(g.d(1),g=null)},i:U,o:U,d(u){u&&(d(e),d(o),d(a)),x(m,u),g&&g.d(u)}}}function Ie(n){let e,t;return e=new oe({props:{size:"large",unpadded_box:!0,$$slots:{default:[Be]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment)},m(l,i){C(e,l,i),t=!0},p(l,i){const o={};i[1]&2&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Y(n){let e,t,l,i;return{c(){e=q("img"),b(e,"alt",t="segmentation mask identifying "+n[4]+" within the uploaded file"),b(e,"class","mask fit-height svelte-m3v3vb"),H(e.src,l=n[28].image.url)||b(e,"src",l),b(e,"style",i=n[9]&&n[28].label in n[9]?null:`filter: hue-rotate(${Math.round(n[30]*360/n[14]?.annotations.length)}deg);`),S(e,"active",n[15]==n[28].label),S(e,"inactive",n[15]!=n[28].label&&n[15]!=null)},m(o,a){v(o,e,a)},p(o,a){a[0]&16&&t!==(t="segmentation mask identifying "+o[4]+" within the uploaded file")&&b(e,"alt",t),a[0]&16384&&!H(e.src,l=o[28].image.url)&&b(e,"src",l),a[0]&16896&&i!==(i=o[9]&&o[28].label in o[9]?null:`filter: hue-rotate(${Math.round(o[30]*360/o[14]?.annotations.length)}deg);`)&&b(e,"style",i),a[0]&49152&&S(e,"active",o[15]==o[28].label),a[0]&49152&&S(e,"inactive",o[15]!=o[28].label&&o[15]!=null)},d(o){o&&d(e)}}}function Z(n){let e,t=G(n[14].annotations),l=[];for(let i=0;i<t.length;i+=1)l[i]=y(W(n,t,i));return{c(){e=q("div");for(let i=0;i<l.length;i+=1)l[i].c();b(e,"class","legend svelte-m3v3vb")},m(i,o){v(i,e,o);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(i,o){if(o[0]&475648){t=G(i[14].annotations);let a;for(a=0;a<t.length;a+=1){const r=W(i,t,a);l[a]?l[a].p(r,o):(l[a]=y(r),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(i){i&&d(e),x(l,i)}}}function y(n){let e,t=n[28].label+"",l,i,o,a;function r(){return n[23](n[28])}function m(){return n[24](n[28])}function g(){return n[27](n[30],n[28])}return{c(){e=q("button"),l=ke(t),i=L(),b(e,"class","legend-item svelte-m3v3vb"),V(e,"background-color",n[9]&&n[28].label in n[9]?n[9][n[28].label]+"88":`hsla(${Math.round(n[30]*360/n[14].annotations.length)}, 100%, 50%, 0.3)`)},m(u,c){v(u,e,c),F(e,l),F(e,i),o||(a=[E(e,"mouseover",r),E(e,"focus",m),E(e,"mouseout",n[25]),E(e,"blur",n[26]),E(e,"click",g)],o=!0)},p(u,c){n=u,c[0]&16384&&t!==(t=n[28].label+"")&&ve(l,t),c[0]&16896&&V(e,"background-color",n[9]&&n[28].label in n[9]?n[9][n[28].label]+"88":`hsla(${Math.round(n[30]*360/n[14].annotations.length)}, 100%, 50%, 0.3)`)},d(u){u&&d(e),o=!1,be(a)}}}function Be(n){let e,t;return e=new p({}),{c(){j(e.$$.fragment)},m(l,i){C(e,l,i),t=!0},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function Me(n){let e,t,l,i,o,a,r,m;const g=[{autoscroll:n[3].autoscroll},{i18n:n[3].i18n},n[13]];let u={};for(let _=0;_<g.length;_+=1)u=_e(u,g[_]);e=new se({props:u}),l=new ae({props:{show_label:n[5],Icon:p,label:n[4]||n[3].i18n("image.image")}});const c=[Ie,we],f=[];function k(_,h){return _[14]==null?0:1}return a=k(n),r=f[a]=c[a](n),{c(){j(e.$$.fragment),t=L(),j(l.$$.fragment),i=L(),o=q("div"),r.c(),b(o,"class","container svelte-m3v3vb")},m(_,h){C(e,_,h),v(_,t,h),C(l,_,h),v(_,i,h),v(_,o,h),f[a].m(o,null),m=!0},p(_,h){const N=h[0]&8200?ge(g,[h[0]&8&&{autoscroll:_[3].autoscroll},h[0]&8&&{i18n:_[3].i18n},h[0]&8192&&me(_[13])]):{};e.$set(N);const B={};h[0]&32&&(B.show_label=_[5]),h[0]&24&&(B.label=_[4]||_[3].i18n("image.image")),l.$set(B);let M=a;a=k(_),a===M?f[a].p(_,h):(ce(),I(f[M],1,1,()=>{f[M]=null}),fe(),r=f[a],r?r.p(_,h):(r=f[a]=c[a](_),r.c()),w(r,1),r.m(o,null))},i(_){m||(w(e.$$.fragment,_),w(l.$$.fragment,_),w(r),m=!0)},o(_){I(e.$$.fragment,_),I(l.$$.fragment,_),I(r),m=!1},d(_){_&&(d(t),d(i),d(o)),z(e,_),z(l,_),f[a].d()}}}function Se(n){let e,t;return e=new ie({props:{visible:n[2],elem_id:n[0],elem_classes:n[1],padding:!1,height:n[7],width:n[8],allow_overflow:!1,container:n[10],scale:n[11],min_width:n[12],$$slots:{default:[Me]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment)},m(l,i){C(e,l,i),t=!0},p(l,i){const o={};i[0]&4&&(o.visible=l[2]),i[0]&1&&(o.elem_id=l[0]),i[0]&2&&(o.elem_classes=l[1]),i[0]&128&&(o.height=l[7]),i[0]&256&&(o.width=l[8]),i[0]&1024&&(o.container=l[10]),i[0]&2048&&(o.scale=l[11]),i[0]&4096&&(o.min_width=l[12]),i[0]&58104|i[1]&2&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function qe(n,e,t){let{elem_id:l=""}=e,{elem_classes:i=[]}=e,{visible:o=!0}=e,{value:a=null}=e,r=null,m=null,{gradio:g}=e,{label:u=g.i18n("annotated_image.annotated_image")}=e,{show_label:c=!0}=e,{show_legend:f=!0}=e,{height:k}=e,{width:_}=e,{color_map:h}=e,{container:N=!0}=e,{scale:B=null}=e,{min_width:M=void 0}=e,{root:A}=e,{proxy_url:D}=e,J=null,{loading_status:P}=e;function K(s){t(15,J=s)}function O(){t(15,J=null)}function Q(s,R){g.dispatch("select",{value:u,index:s})}const $=s=>K(s.label),ee=s=>K(s.label),le=()=>O(),ne=()=>O(),te=(s,R)=>Q(s,R.label);return n.$$set=s=>{"elem_id"in s&&t(0,l=s.elem_id),"elem_classes"in s&&t(1,i=s.elem_classes),"visible"in s&&t(2,o=s.visible),"value"in s&&t(19,a=s.value),"gradio"in s&&t(3,g=s.gradio),"label"in s&&t(4,u=s.label),"show_label"in s&&t(5,c=s.show_label),"show_legend"in s&&t(6,f=s.show_legend),"height"in s&&t(7,k=s.height),"width"in s&&t(8,_=s.width),"color_map"in s&&t(9,h=s.color_map),"container"in s&&t(10,N=s.container),"scale"in s&&t(11,B=s.scale),"min_width"in s&&t(12,M=s.min_width),"root"in s&&t(20,A=s.root),"proxy_url"in s&&t(21,D=s.proxy_url),"loading_status"in s&&t(13,P=s.loading_status)},n.$$.update=()=>{n.$$.dirty[0]&7864328&&(a!==r&&(t(22,r=a),g.dispatch("change")),a?t(14,m={image:T(a.image,A,D),annotations:a.annotations.map(s=>({image:T(s.image,A,D),label:s.label}))}):t(14,m=null))},[l,i,o,g,u,c,f,k,_,h,N,B,M,P,m,J,K,O,Q,a,A,D,r,$,ee,le,ne,te]}class De extends ue{constructor(e){super(),he(this,e,qe,Se,de,{elem_id:0,elem_classes:1,visible:2,value:19,gradio:3,label:4,show_label:5,show_legend:6,height:7,width:8,color_map:9,container:10,scale:11,min_width:12,root:20,proxy_url:21,loading_status:13},null,[-1,-1])}}export{De as default};
//# sourceMappingURL=Index-967d6d71.js.map
