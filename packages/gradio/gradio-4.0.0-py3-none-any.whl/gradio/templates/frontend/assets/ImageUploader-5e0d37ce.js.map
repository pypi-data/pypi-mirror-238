{"version":3,"file":"ImageUploader-5e0d37ce.js","sources":["../../../../js/icons/src/Camera.svelte","../../../../js/icons/src/Circle.svelte","../../../../js/icons/src/ImagePaste.svelte","../../../../js/icons/src/Square.svelte","../../../../js/icons/src/Webcam.svelte","../../../../js/atoms/src/Toolbar.svelte","../../../../js/image/shared/utils.ts","../../../../js/image/shared/ImagePreview.svelte","../../../../js/image/shared/Webcam.svelte","../../../../js/image/shared/ClearImage.svelte","../../../../js/image/shared/ImageUploader.svelte"],"sourcesContent":["<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-camera\"\n>\n\t<path\n\t\td=\"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z\"\n\t/>\n\t<circle cx=\"12\" cy=\"13\" r=\"4\" />\n</svg>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"red\"\n\tstroke=\"red\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-circle\"\n>\n\t<circle cx=\"12\" cy=\"12\" r=\"10\" />\n</svg>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\t><path\n\t\tfill=\"currentColor\"\n\t\td=\"M13.75 2a2.25 2.25 0 0 1 2.236 2.002V4h1.764A2.25 2.25 0 0 1 20 6.25V11h-1.5V6.25a.75.75 0 0 0-.75-.75h-2.129c-.404.603-1.091 1-1.871 1h-3.5c-.78 0-1.467-.397-1.871-1H6.25a.75.75 0 0 0-.75.75v13.5c0 .414.336.75.75.75h4.78a3.99 3.99 0 0 0 .505 1.5H6.25A2.25 2.25 0 0 1 4 19.75V6.25A2.25 2.25 0 0 1 6.25 4h1.764a2.25 2.25 0 0 1 2.236-2h3.5Zm2.245 2.096L16 4.25c0-.052-.002-.103-.005-.154ZM13.75 3.5h-3.5a.75.75 0 0 0 0 1.5h3.5a.75.75 0 0 0 0-1.5ZM15 12a3 3 0 0 0-3 3v5c0 .556.151 1.077.415 1.524l3.494-3.494a2.25 2.25 0 0 1 3.182 0l3.494 3.494c.264-.447.415-.968.415-1.524v-5a3 3 0 0 0-3-3h-5Zm0 11a2.985 2.985 0 0 1-1.524-.415l3.494-3.494a.75.75 0 0 1 1.06 0l3.494 3.494A2.985 2.985 0 0 1 20 23h-5Zm5-7a1 1 0 1 1 0-2a1 1 0 0 1 0 2Z\"\n\t/></svg\n>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\tfill=\"red\"\n\tstroke=\"red\"\n\tstroke-width=\"1.5\"\n\tstroke-linecap=\"round\"\n\tstroke-linejoin=\"round\"\n\tclass=\"feather feather-square\"\n>\n\t<rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\n</svg>\n","<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tviewBox=\"0 0 24 24\"\n\t><path\n\t\tfill=\"currentColor\"\n\t\td=\"M12 2c-4.963 0-9 4.038-9 9c0 3.328 1.82 6.232 4.513 7.79l-2.067 1.378A1 1 0 0 0 6 22h12a1 1 0 0 0 .555-1.832l-2.067-1.378C19.18 17.232 21 14.328 21 11c0-4.962-4.037-9-9-9zm0 16c-3.859 0-7-3.141-7-7c0-3.86 3.141-7 7-7s7 3.14 7 7c0 3.859-3.141 7-7 7z\"\n\t/><path\n\t\tfill=\"currentColor\"\n\t\td=\"M12 6c-2.757 0-5 2.243-5 5s2.243 5 5 5s5-2.243 5-5s-2.243-5-5-5zm0 8c-1.654 0-3-1.346-3-3s1.346-3 3-3s3 1.346 3 3s-1.346 3-3 3z\"\n\t/></svg\n>\n","<script lang=\"ts\">\n\texport let show_border = false;\n</script>\n\n<div class:show_border>\n\t<slot />\n</div>\n\n<style>\n\tdiv {\n\t\tborder-top: 1px solid transparent;\n\t\tdisplay: flex;\n\t\tmax-height: 100%;\n\t\tjustify-content: center;\n\t\tgap: var(--spacing-sm);\n\t\theight: auto;\n\t\talign-items: flex-end;\n\t\tbox-shadow: var(--shadow-drop);\n\t\tpadding: var(--spacing-xl) 0;\n\t\tcolor: var(--block-label-text-color);\n\t\tflex-shrink: 0;\n\t\twidth: 95%;\n\t}\n\n\t.show_border {\n\t\tborder-top: 1px solid var(--block-border-color);\n\t\tmargin-top: var(--spacing-xxl);\n\t}\n</style>\n","export const get_coordinates_of_clicked_image = (\n\tevt: MouseEvent\n): [number, number] | null => {\n\tlet image = evt.currentTarget as HTMLImageElement;\n\n\tconst imageRect = image.getBoundingClientRect();\n\tconst xScale = image.naturalWidth / imageRect.width;\n\tconst yScale = image.naturalHeight / imageRect.height;\n\tif (xScale > yScale) {\n\t\tconst displayed_height = image.naturalHeight / xScale;\n\t\tconst y_offset = (imageRect.height - displayed_height) / 2;\n\t\tvar x = Math.round((evt.clientX - imageRect.left) * xScale);\n\t\tvar y = Math.round((evt.clientY - imageRect.top - y_offset) * xScale);\n\t} else {\n\t\tconst displayed_width = image.naturalWidth / yScale;\n\t\tconst x_offset = (imageRect.width - displayed_width) / 2;\n\t\tvar x = Math.round((evt.clientX - imageRect.left - x_offset) * yScale);\n\t\tvar y = Math.round((evt.clientY - imageRect.top) * yScale);\n\t}\n\tif (x < 0 || x >= image.naturalWidth || y < 0 || y >= image.naturalHeight) {\n\t\treturn null;\n\t}\n\treturn [x, y];\n};\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport type { SelectData } from \"@gradio/utils\";\n\timport { uploadToHuggingFace } from \"@gradio/utils\";\n\timport { BlockLabel, Empty, IconButton, ShareButton } from \"@gradio/atoms\";\n\timport { Download } from \"@gradio/icons\";\n\timport { get_coordinates_of_clicked_image } from \"./utils\";\n\n\timport { Image } from \"@gradio/icons\";\n\timport { type FileData, normalise_file } from \"@gradio/client\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\n\texport let value: null | FileData;\n\texport let label: string | undefined = undefined;\n\texport let show_label: boolean;\n\texport let show_download_button = true;\n\texport let selectable = false;\n\texport let show_share_button = false;\n\texport let root: string;\n\texport let i18n: I18nFormatter;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange: string;\n\t\tselect: SelectData;\n\t}>();\n\n\t$: value = normalise_file(value, root, null);\n\n\tconst handle_click = (evt: MouseEvent): void => {\n\t\tlet coordinates = get_coordinates_of_clicked_image(evt);\n\t\tif (coordinates) {\n\t\t\tdispatch(\"select\", { index: coordinates, value: null });\n\t\t}\n\t};\n</script>\n\n<BlockLabel {show_label} Icon={Image} label={label || i18n(\"image.image\")} />\n{#if value === null || !value.url}\n\t<Empty unpadded_box={true} size=\"large\"><Image /></Empty>\n{:else}\n\t<div class=\"icon-buttons\">\n\t\t{#if show_download_button}\n\t\t\t<a\n\t\t\t\thref={value.url}\n\t\t\t\ttarget={window.__is_colab__ ? \"_blank\" : null}\n\t\t\t\tdownload={\"image\"}\n\t\t\t>\n\t\t\t\t<IconButton Icon={Download} label={i18n(\"common.download\")} />\n\t\t\t</a>\n\t\t{/if}\n\t\t{#if show_share_button}\n\t\t\t<ShareButton\n\t\t\t\t{i18n}\n\t\t\t\ton:share\n\t\t\t\ton:error\n\t\t\t\tformatter={async (value) => {\n\t\t\t\t\tif (!value) return \"\";\n\t\t\t\t\tlet url = await uploadToHuggingFace(value, \"base64\");\n\t\t\t\t\treturn `<img src=\"${url}\" />`;\n\t\t\t\t}}\n\t\t\t\t{value}\n\t\t\t/>\n\t\t{/if}\n\t</div>\n\t<button on:click={handle_click}>\n\t\t<img src={value.url} alt=\"\" class:selectable loading=\"lazy\" />\n\t</button>\n{/if}\n\n<style>\n\timg,\n\tbutton {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tobject-fit: contain;\n\t\tdisplay: block;\n\t}\n\n\t.selectable {\n\t\tcursor: crosshair;\n\t}\n\n\t.icon-buttons {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\ttop: 6px;\n\t\tright: 6px;\n\t\tgap: var(--size-1);\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { createEventDispatcher, onMount, tick } from \"svelte\";\n\timport { Camera, Circle, Square, DropdownArrow } from \"@gradio/icons\";\n\timport type { I18nFormatter } from \"@gradio/utils\";\n\n\tlet video_source: HTMLVideoElement;\n\tlet canvas: HTMLCanvasElement;\n\texport let streaming = false;\n\texport let pending = false;\n\n\texport let mode: \"image\" | \"video\" = \"image\";\n\texport let mirror_webcam: boolean;\n\texport let include_audio: boolean;\n\texport let i18n: I18nFormatter;\n\n\tconst dispatch = createEventDispatcher<{\n\t\tstream: undefined;\n\t\tcapture:\n\t\t\t| {\n\t\t\t\t\tdata: FileReader[\"result\"];\n\t\t\t\t\tname: string;\n\t\t\t\t\tis_example?: boolean;\n\t\t\t\t\tis_file: boolean;\n\t\t\t  }\n\t\t\t| Blob;\n\t\terror: string;\n\t\tstart_recording: undefined;\n\t\tstop_recording: undefined;\n\t}>();\n\n\tonMount(() => (canvas = document.createElement(\"canvas\")));\n\n\tasync function access_webcam(device_id?: string): Promise<void> {\n\t\tif (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n\t\t\tdispatch(\"error\", i18n(\"image.no_webcam_support\"));\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tstream = await navigator.mediaDevices.getUserMedia({\n\t\t\t\tvideo: device_id ? { deviceId: { exact: device_id } } : true,\n\t\t\t\taudio: include_audio\n\t\t\t});\n\t\t\tvideo_source.srcObject = stream;\n\t\t\tvideo_source.muted = true;\n\t\t\tvideo_source.play();\n\t\t} catch (err) {\n\t\t\tif (err instanceof DOMException && err.name == \"NotAllowedError\") {\n\t\t\t\tdispatch(\"error\", i18n(\"image.allow_webcam_access\"));\n\t\t\t} else {\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction take_picture(): void {\n\t\tvar context = canvas.getContext(\"2d\")!;\n\n\t\tif (video_source.videoWidth && video_source.videoHeight) {\n\t\t\tcanvas.width = video_source.videoWidth;\n\t\t\tcanvas.height = video_source.videoHeight;\n\t\t\tcontext.drawImage(\n\t\t\t\tvideo_source,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\tvideo_source.videoWidth,\n\t\t\t\tvideo_source.videoHeight\n\t\t\t);\n\n\t\t\tif (mirror_webcam) {\n\t\t\t\tcontext.scale(-1, 1);\n\t\t\t\tcontext.drawImage(video_source, -video_source.videoWidth, 0);\n\t\t\t}\n\n\t\t\tcanvas.toBlob(\n\t\t\t\t(blob) => {\n\t\t\t\t\tdispatch(streaming ? \"stream\" : \"capture\", blob);\n\t\t\t\t},\n\t\t\t\t\"image/png\",\n\t\t\t\t0.8\n\t\t\t);\n\t\t}\n\t}\n\n\tlet recording = false;\n\tlet recorded_blobs: BlobPart[] = [];\n\tlet stream: MediaStream;\n\tlet mimeType: string;\n\tlet media_recorder: MediaRecorder;\n\n\tfunction take_recording(): void {\n\t\tif (recording) {\n\t\t\tmedia_recorder.stop();\n\t\t\tlet video_blob = new Blob(recorded_blobs, { type: mimeType });\n\t\t\tlet ReaderObj = new FileReader();\n\t\t\tReaderObj.onload = function (e): void {\n\t\t\t\tif (e.target) {\n\t\t\t\t\tdispatch(\"capture\", {\n\t\t\t\t\t\tdata: e.target.result,\n\t\t\t\t\t\tname: \"sample.\" + mimeType.substring(6),\n\t\t\t\t\t\tis_example: false,\n\t\t\t\t\t\tis_file: false\n\t\t\t\t\t});\n\t\t\t\t\tdispatch(\"stop_recording\");\n\t\t\t\t}\n\t\t\t};\n\t\t\tReaderObj.readAsDataURL(video_blob);\n\t\t} else {\n\t\t\tdispatch(\"start_recording\");\n\t\t\trecorded_blobs = [];\n\t\t\tlet validMimeTypes = [\"video/webm\", \"video/mp4\"];\n\t\t\tfor (let validMimeType of validMimeTypes) {\n\t\t\t\tif (MediaRecorder.isTypeSupported(validMimeType)) {\n\t\t\t\t\tmimeType = validMimeType;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (mimeType === null) {\n\t\t\t\tconsole.error(\"No supported MediaRecorder mimeType\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tmedia_recorder = new MediaRecorder(stream, {\n\t\t\t\tmimeType: mimeType\n\t\t\t});\n\t\t\tmedia_recorder.addEventListener(\"dataavailable\", function (e) {\n\t\t\t\trecorded_blobs.push(e.data);\n\t\t\t});\n\t\t\tmedia_recorder.start(200);\n\t\t}\n\t\trecording = !recording;\n\t}\n\n\taccess_webcam();\n\n\tif (streaming && mode === \"image\") {\n\t\twindow.setInterval(() => {\n\t\t\tif (video_source && !pending) {\n\t\t\t\ttake_picture();\n\t\t\t}\n\t\t}, 500);\n\t}\n\n\tasync function select_source(): Promise<void> {\n\t\tconst devices = await navigator.mediaDevices.enumerateDevices();\n\t\tvideo_sources = devices.filter((device) => device.kind === \"videoinput\");\n\t\toptions_open = true;\n\t}\n\n\tlet video_sources: MediaDeviceInfo[] = [];\n\tasync function selectVideoSource(device_id: string): Promise<void> {\n\t\tawait access_webcam(device_id);\n\t\toptions_open = false;\n\t}\n\n\tlet options_open = false;\n\n\texport function click_outside(node: Node, cb: any): any {\n\t\tconst handle_click = (event: MouseEvent): void => {\n\t\t\tif (\n\t\t\t\tnode &&\n\t\t\t\t!node.contains(event.target as Node) &&\n\t\t\t\t!event.defaultPrevented\n\t\t\t) {\n\t\t\t\tcb(event);\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener(\"click\", handle_click, true);\n\n\t\treturn {\n\t\t\tdestroy() {\n\t\t\t\tdocument.removeEventListener(\"click\", handle_click, true);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction handle_click_outside(event: MouseEvent): void {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\toptions_open = false;\n\t}\n</script>\n\n<div class=\"wrap\">\n\t<!-- svelte-ignore a11y-media-has-caption -->\n\t<!-- need to suppress for video streaming https://github.com/sveltejs/svelte/issues/5967 -->\n\t<video bind:this={video_source} class:flip={mirror_webcam} />\n\t{#if !streaming}\n\t\t<div class:capture={!recording} class=\"button-wrap\">\n\t\t\t<button\n\t\t\t\ton:click={mode === \"image\" ? take_picture : take_recording}\n\t\t\t\taria-label={mode === \"image\" ? \"capture photo\" : \"start recording\"}\n\t\t\t>\n\t\t\t\t{#if mode === \"video\"}\n\t\t\t\t\t{#if recording}\n\t\t\t\t\t\t<div class=\"icon\" title=\"stop recording\">\n\t\t\t\t\t\t\t<Square />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\"icon\" title=\"start recording\">\n\t\t\t\t\t\t\t<Circle />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"icon\" title=\"capture photo\">\n\t\t\t\t\t\t<Camera />\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</button>\n\n\t\t\t{#if !recording}\n\t\t\t\t<button\n\t\t\t\t\ton:click={select_source}\n\t\t\t\t\taria-label={mode === \"image\" ? \"capture photo\" : \"start recording\"}\n\t\t\t\t>\n\t\t\t\t\t<div class=\"icon\" title=\"select video source\">\n\t\t\t\t\t\t<DropdownArrow />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if options_open}\n\t\t\t\t\t\t<div class=\"select-wrap\" use:click_outside={handle_click_outside}>\n\t\t\t\t\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events-->\n\t\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions-->\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"inset-icon\"\n\t\t\t\t\t\t\t\ton:click|stopPropagation={() => (options_open = false)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<DropdownArrow />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{#each video_sources as source}\n\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events-->\n\t\t\t\t\t\t\t\t<!-- svelte-ignore a11y-no-static-element-interactions-->\n\t\t\t\t\t\t\t\t<div on:click={() => selectVideoSource(source.deviceId)}>\n\t\t\t\t\t\t\t\t\t{source.label}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</button>\n\t\t\t{/if}\n\t\t</div>\n\t{/if}\n</div>\n\n<style>\n\t.wrap {\n\t\tposition: relative;\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t\tmin-height: var(--size-60);\n\t}\n\n\tvideo {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t}\n\n\t.button-wrap {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\tright: 0px;\n\t\tbottom: var(--size-2);\n\t\tleft: 0px;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmargin: auto;\n\t\tbox-shadow: var(--shadow-drop-lg);\n\t\tborder-radius: var(--radius-xl);\n\t\tbackground-color: rgba(0, 0, 0, 0.9);\n\t\twidth: var(--size-10);\n\t\theight: var(--size-8);\n\t\tpadding: var(--size-2-5);\n\t\tpadding-right: var(--size-1);\n\t\tz-index: var(--layer-3);\n\t}\n\n\t.capture {\n\t\twidth: var(--size-14);\n\t\ttransform: translateX(var(--size-2-5));\n\t}\n\n\t@media (--screen-md) {\n\t\tbutton {\n\t\t\tbottom: var(--size-4);\n\t\t}\n\t}\n\n\t@media (--screen-xl) {\n\t\tbutton {\n\t\t\tbottom: var(--size-8);\n\t\t}\n\t}\n\n\t.icon {\n\t\topacity: 0.8;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tcolor: white;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\n\t.flip {\n\t\ttransform: scaleX(-1);\n\t}\n\n\t.select-wrap {\n\t\t-webkit-appearance: none;\n\t\t-moz-appearance: none;\n\t\tappearance: none;\n\t\tbackground-color: transparent;\n\t\tborder: none;\n\t\twidth: auto;\n\t\tfont-size: 1rem;\n\t\t/* padding: 0.5rem; */\n\t\twidth: max-content;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: 0;\n\t\tbackground-color: var(--block-background-fill);\n\t\tbox-shadow: var(--shadow-drop-lg);\n\t\tborder-radius: var(--radius-xl);\n\t\tz-index: var(--layer-top);\n\t\tborder: 1px solid var(--border-color-accent);\n\t\ttext-align: left;\n\t\toverflow: hidden;\n\t}\n\n\t.select-wrap > div {\n\t\tpadding: 0.25rem 0.5rem;\n\t\tborder-bottom: 1px solid var(--border-color-accent);\n\t\tpadding-right: var(--size-8);\n\t}\n\n\t.select-wrap > div:hover {\n\t\tbackground-color: var(--color-accent);\n\t}\n\n\t.select-wrap > div:last-child {\n\t\tborder: none;\n\t}\n\n\t.inset-icon {\n\t\tposition: absolute;\n\t\ttop: 5px;\n\t\tright: -6.5px;\n\t\twidth: var(--size-10);\n\t\theight: var(--size-5);\n\t\topacity: 0.8;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { createEventDispatcher } from \"svelte\";\n\timport { IconButton } from \"@gradio/atoms\";\n\timport { Clear } from \"@gradio/icons\";\n\n\tconst dispatch = createEventDispatcher();\n</script>\n\n<div>\n\t<IconButton\n\t\tIcon={Clear}\n\t\tlabel=\"Remove Image\"\n\t\ton:click={(event) => {\n\t\t\tdispatch(\"remove_image\");\n\t\t\tevent.stopPropagation();\n\t\t}}\n\t/>\n</div>\n\n<style>\n\tdiv {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\ttop: var(--size-2);\n\t\tright: var(--size-2);\n\t\tjustify-content: flex-end;\n\t\tgap: var(--spacing-sm);\n\t\tz-index: var(--layer-5);\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { createEventDispatcher, tick } from \"svelte\";\n\timport { BlockLabel } from \"@gradio/atoms\";\n\timport { Image } from \"@gradio/icons\";\n\timport type { SelectData, I18nFormatter } from \"@gradio/utils\";\n\timport { get_coordinates_of_clicked_image } from \"./utils\";\n\timport {\n\t\tWebcam as WebcamIcon,\n\t\tImagePaste,\n\t\tUpload as UploadIcon\n\t} from \"@gradio/icons\";\n\timport Webcam from \"./Webcam.svelte\";\n\timport { Toolbar, IconButton } from \"@gradio/atoms\";\n\n\timport { Upload } from \"@gradio/upload\";\n\timport { type FileData, normalise_file } from \"@gradio/client\";\n\timport ClearImage from \"./ClearImage.svelte\";\n\n\texport let value: null | FileData;\n\texport let label: string | undefined = undefined;\n\texport let show_label: boolean;\n\n\texport let sources: (\"clipboard\" | \"webcam\" | \"upload\")[] = [\n\t\t\"upload\",\n\t\t\"clipboard\",\n\t\t\"webcam\"\n\t];\n\texport let streaming = false;\n\texport let pending = false;\n\texport let mirror_webcam: boolean;\n\texport let selectable = false;\n\texport let root: string;\n\texport let i18n: I18nFormatter;\n\n\tlet upload: Upload;\n\texport let active_tool: \"webcam\" | null = null;\n\n\tfunction handle_upload({ detail }: CustomEvent<FileData>): void {\n\t\tvalue = normalise_file(detail, root, null);\n\t}\n\n\tasync function handle_save(img_blob: Blob | any): Promise<void> {\n\t\tpending = true;\n\t\tconst f = await upload.load_files([new File([img_blob], `webcam.png`)]);\n\n\t\tvalue = f?.[0] || null;\n\t\tif (!streaming) active_tool = null;\n\n\t\tawait tick();\n\n\t\tdispatch(streaming ? \"stream\" : \"change\");\n\t\tpending = false;\n\t}\n\n\t$: value && !value.url && (value = normalise_file(value, root, null));\n\n\tconst dispatch = createEventDispatcher<{\n\t\tchange?: never;\n\t\tstream?: never;\n\t\tclear?: never;\n\t\tdrag: boolean;\n\t\tupload?: never;\n\t\tselect: SelectData;\n\t}>();\n\n\tlet dragging = false;\n\n\t$: dispatch(\"drag\", dragging);\n\n\tfunction handle_click(evt: MouseEvent): void {\n\t\tlet coordinates = get_coordinates_of_clicked_image(evt);\n\t\tif (coordinates) {\n\t\t\tdispatch(\"select\", { index: coordinates, value: null });\n\t\t}\n\t}\n\n\tconst sources_meta = {\n\t\tupload: {\n\t\t\ticon: UploadIcon,\n\t\t\tlabel: i18n(\"Upload\"),\n\t\t\torder: 0\n\t\t},\n\t\twebcam: {\n\t\t\ticon: WebcamIcon,\n\t\t\tlabel: i18n(\"Webcam\"),\n\t\t\torder: 1\n\t\t},\n\t\tclipboard: {\n\t\t\ticon: ImagePaste,\n\t\t\tlabel: i18n(\"Paste\"),\n\t\t\torder: 2\n\t\t}\n\t};\n\n\t$: sources_list = sources.sort(\n\t\t(a, b) => sources_meta[a].order - sources_meta[b].order\n\t);\n\n\t$: {\n\t\tif (sources.length === 1 && sources[0] === \"webcam\") {\n\t\t\tactive_tool = \"webcam\";\n\t\t}\n\t}\n\n\tasync function handle_toolbar(\n\t\tsource: (typeof sources)[number]\n\t): Promise<void> {\n\t\tswitch (source) {\n\t\t\tcase \"clipboard\":\n\t\t\t\tnavigator.clipboard.read().then(async (items) => {\n\t\t\t\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\t\t\t\tconst type = items[i].types.find((t) => t.startsWith(\"image/\"));\n\t\t\t\t\t\tif (type) {\n\t\t\t\t\t\t\titems[i].getType(type).then(async (blob) => {\n\t\t\t\t\t\t\t\tconst f = await upload.load_files([\n\t\t\t\t\t\t\t\t\tnew File([blob], `clipboard.${type.replace(\"image/\", \"\")}`)\n\t\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t\tf;\n\t\t\t\t\t\t\t\tvalue = f?.[0] || null;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"webcam\":\n\t\t\t\tactive_tool = \"webcam\";\n\t\t\t\tbreak;\n\t\t\tcase \"upload\":\n\t\t\t\tupload.open_file_upload();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n</script>\n\n<BlockLabel {show_label} Icon={Image} label={label || \"Image\"} />\n\n<div data-testid=\"image\" class=\"image-container\">\n\t{#if value?.url}\n\t\t<ClearImage on:remove_image={() => (value = null)} />\n\t{/if}\n\t<div class=\"upload-container\">\n\t\t<Upload\n\t\t\thidden={value !== null || active_tool === \"webcam\"}\n\t\t\tbind:this={upload}\n\t\t\tbind:dragging\n\t\t\tfiletype=\"image/*\"\n\t\t\ton:load={handle_upload}\n\t\t\ton:error\n\t\t\t{root}\n\t\t\tdisable_click={!sources.includes(\"upload\")}\n\t\t>\n\t\t\t{#if value === null && !active_tool}\n\t\t\t\t<slot />\n\t\t\t{/if}\n\t\t</Upload>\n\t\t{#if active_tool === \"webcam\"}\n\t\t\t<Webcam\n\t\t\t\ton:capture={(e) => handle_save(e.detail)}\n\t\t\t\ton:stream={(e) => handle_save(e.detail)}\n\t\t\t\ton:error\n\t\t\t\ton:drag\n\t\t\t\ton:upload={(e) => handle_save(e.detail)}\n\t\t\t\t{mirror_webcam}\n\t\t\t\t{streaming}\n\t\t\t\tmode=\"image\"\n\t\t\t\tinclude_audio={false}\n\t\t\t\t{i18n}\n\t\t\t/>\n\t\t{:else if value !== null && !streaming}\n\t\t\t<!-- svelte-ignore a11y-click-events-have-key-events-->\n\t\t\t<!-- svelte-ignore a11y-no-noninteractive-element-interactions-->\n\t\t\t<img\n\t\t\t\tsrc={value.url}\n\t\t\t\talt={value.alt_text}\n\t\t\t\ton:click={handle_click}\n\t\t\t\tclass:selectable\n\t\t\t/>\n\t\t{/if}\n\t</div>\n\t{#if sources.length > 1 || sources.includes(\"clipboard\")}\n\t\t<Toolbar show_border={!value?.url}>\n\t\t\t{#each sources_list as source}\n\t\t\t\t<IconButton\n\t\t\t\t\ton:click={() => handle_toolbar(source)}\n\t\t\t\t\tIcon={sources_meta[source].icon}\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\tpadded={false}\n\t\t\t\t/>\n\t\t\t{/each}\n\t\t</Toolbar>\n\t{/if}\n</div>\n\n<style>\n\t/* .image-container {\n\t\theight: auto;\n\t} */\n\timg {\n\t\twidth: var(--size-full);\n\t\theight: var(--size-full);\n\t}\n\n\t.upload-container {\n\t\theight: 100%;\n\t\tflex-shrink: 1;\n\t\tmax-height: 100%;\n\t}\n\n\t.image-container {\n\t\tdisplay: flex;\n\t\theight: 100%;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tmax-height: 100%;\n\t}\n\n\t.selectable {\n\t\tcursor: crosshair;\n\t}\n</style>\n"],"names":["insert","target","svg","anchor","append","path","circle","rect","path0","path1","div","show_border","$$props","get_coordinates_of_clicked_image","evt","image","imageRect","xScale","yScale","displayed_height","y_offset","x","y","displayed_width","x_offset","createEventDispatcher","ctx","create_if_block_2","create_if_block_1","src_url_equal","img","img_src_value","attr","button","current","dirty","Download","a","a_href_value","iconbutton_changes","Image","value","label","show_label","show_download_button","selectable","show_share_button","root","i18n","dispatch","handle_click","coordinates","uploadToHuggingFace","$$invalidate","normalise_file","onMount","tick","button_aria_label_value","is_function","i","span","t0_value","set_data","t0","create_if_block","video","click_outside","node","cb","event","video_source","canvas","streaming","pending","mode","mirror_webcam","include_audio","access_webcam","device_id","stream","err","take_picture","context","blob","recording","recorded_blobs","mimeType","media_recorder","take_recording","video_blob","ReaderObj","e","validMimeTypes","validMimeType","select_source","devices","video_sources","device","options_open","selectVideoSource","handle_click_outside","$$value","click_handler","source","Clear","create_if_block_3","img_alt_value","toolbar_changes","each_blocks","if_block0","create_if_block_4","div1","div0","blocklabel_changes","upload_1_changes","sources","upload","active_tool","handle_upload","detail","handle_save","img_blob","f","dragging","sources_meta","UploadIcon","WebcamIcon","ImagePaste","handle_toolbar","items","type","t","remove_image_handler","capture_handler","stream_handler","upload_handler","sources_list","b"],"mappings":"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"}