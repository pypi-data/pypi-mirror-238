import{B as Tn}from"./Button-89057c03.js";import{u as si}from"./utils-c3e3db58.js";import{B as Wn}from"./BlockLabel-e3b0d1c3.js";import{I as ri}from"./IconButton-16e5dbea.js";import{E as zn}from"./Empty-937365d8.js";import{S as ai}from"./ShareButton-d3fa81fa.js";import{D as li}from"./Download-696bd40c.js";import{S as Bn}from"./Index-37584f50.js";import{a as ui,P as On,T as di}from"./Trim-78ec077e.js";import{U as ci,M as qt}from"./ModifyUpload-87a26b2d.js";import{r as hi}from"./file-url-f4206b44.js";import{_ as tn,p as fi,u as mi,n as _i}from"./index-0526d562.js";import{U as pi}from"./Upload-a4034e93.js";import{a as gi,U as vi}from"./UploadText-232a3213.js";import{default as Hr}from"./Example-1fe376d1.js";import"./Clear-2c7bae91.js";/* empty css                                                   */import"./svelte/svelte.js";const{SvelteComponent:bi,append:wi,attr:x,detach:yi,init:ki,insert:Ci,noop:Rt,safe_not_equal:Ei,svg_element:nn}=window.__gradio__svelte__internal;function Ri(o){let e,t;return{c(){e=nn("svg"),t=nn("path"),x(t,"stroke","currentColor"),x(t,"stroke-width","1.5"),x(t,"stroke-linecap","round"),x(t,"stroke-linejoin","round"),x(t,"d","M21.044 5.704a.6.6 0 0 1 .956.483v11.626a.6.6 0 0 1-.956.483l-7.889-5.813a.6.6 0 0 1 0-.966l7.89-5.813ZM10.044 5.704a.6.6 0 0 1 .956.483v11.626a.6.6 0 0 1-.956.483l-7.888-5.813a.6.6 0 0 1 0-.966l7.888-5.813Z"),x(e,"xmlns","http://www.w3.org/2000/svg"),x(e,"width","24px"),x(e,"height","24px"),x(e,"fill","currentColor"),x(e,"stroke-width","1.5"),x(e,"viewBox","0 0 24 24"),x(e,"color","currentColor")},m(n,i){Ci(n,e,i),wi(e,t)},p:Rt,i:Rt,o:Rt,d(n){n&&yi(e)}}}class Si extends bi{constructor(e){super(),ki(this,e,null,Ri,Ei,{})}}const{SvelteComponent:Di,append:Mi,attr:ee,detach:Li,init:Ai,insert:Pi,noop:St,safe_not_equal:Ti,svg_element:on}=window.__gradio__svelte__internal;function Wi(o){let e,t;return{c(){e=on("svg"),t=on("path"),ee(t,"stroke","currentColor"),ee(t,"stroke-width","1.5"),ee(t,"stroke-linecap","round"),ee(t,"stroke-linejoin","round"),ee(t,"d","M2.956 5.704A.6.6 0 0 0 2 6.187v11.626a.6.6 0 0 0 .956.483l7.889-5.813a.6.6 0 0 0 0-.966l-7.89-5.813ZM13.956 5.704a.6.6 0 0 0-.956.483v11.626a.6.6 0 0 0 .956.483l7.889-5.813a.6.6 0 0 0 0-.966l-7.89-5.813Z"),ee(e,"xmlns","http://www.w3.org/2000/svg"),ee(e,"width","24px"),ee(e,"height","24px"),ee(e,"fill","currentColor"),ee(e,"stroke-width","1.5"),ee(e,"viewBox","0 0 24 24"),ee(e,"color","currentColor")},m(n,i){Pi(n,e,i),Mi(e,t)},p:St,i:St,o:St,d(n){n&&Li(e)}}}class zi extends Di{constructor(e){super(),Ai(this,e,null,Wi,Ti,{})}}const{SvelteComponent:Bi,append:rt,attr:H,detach:Oi,init:Ii,insert:Ni,noop:Dt,safe_not_equal:Hi,svg_element:Je}=window.__gradio__svelte__internal;function qi(o){let e,t,n,i,s;return{c(){e=Je("svg"),t=Je("path"),n=Je("path"),i=Je("line"),s=Je("line"),H(t,"d","M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"),H(n,"d","M19 10v2a7 7 0 0 1-14 0v-2"),H(i,"x1","12"),H(i,"y1","19"),H(i,"x2","12"),H(i,"y2","23"),H(s,"x1","8"),H(s,"y1","23"),H(s,"x2","16"),H(s,"y2","23"),H(e,"xmlns","http://www.w3.org/2000/svg"),H(e,"width","100%"),H(e,"height","100%"),H(e,"viewBox","0 0 24 24"),H(e,"fill","none"),H(e,"stroke","currentColor"),H(e,"stroke-width","2"),H(e,"stroke-linecap","round"),H(e,"stroke-linejoin","round"),H(e,"class","feather feather-mic")},m(a,u){Ni(a,e,u),rt(e,t),rt(e,n),rt(e,i),rt(e,s)},p:Dt,i:Dt,o:Dt,d(a){a&&Oi(e)}}}class Ui extends Bi{constructor(e){super(),Ii(this,e,null,qi,Hi,{})}}const{SvelteComponent:ji,append:Mt,attr:V,detach:Fi,init:Vi,insert:Xi,noop:Lt,safe_not_equal:Gi,svg_element:at}=window.__gradio__svelte__internal;function Yi(o){let e,t,n,i;return{c(){e=at("svg"),t=at("path"),n=at("circle"),i=at("circle"),V(t,"d","M9 18V5l12-2v13"),V(n,"cx","6"),V(n,"cy","18"),V(n,"r","3"),V(i,"cx","18"),V(i,"cy","16"),V(i,"r","3"),V(e,"xmlns","http://www.w3.org/2000/svg"),V(e,"width","100%"),V(e,"height","100%"),V(e,"viewBox","0 0 24 24"),V(e,"fill","none"),V(e,"stroke","currentColor"),V(e,"stroke-width","1.5"),V(e,"stroke-linecap","round"),V(e,"stroke-linejoin","round"),V(e,"class","feather feather-music")},m(s,a){Xi(s,e,a),Mt(e,t),Mt(e,n),Mt(e,i)},p:Lt,i:Lt,o:Lt,d(s){s&&Fi(e)}}}class gt extends ji{constructor(e){super(),Vi(this,e,null,Yi,Gi,{})}}var Zi=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(r){try{d(n.next(r))}catch(c){a(c)}}function l(r){try{d(n.throw(r))}catch(c){a(c)}}function d(r){r.done?s(r.value):i(r.value).then(u,l)}d((n=n.apply(o,e||[])).next())})};function Ji(o,e){return Zi(this,void 0,void 0,function*(){const t=new AudioContext({sampleRate:e});return t.decodeAudioData(o).finally(()=>t.close())})}function Ki(o){const e=o[0];if(e.some(t=>t>1||t<-1)){const t=e.length;let n=0;for(let i=0;i<t;i++){const s=Math.abs(e[i]);s>n&&(n=s)}for(const i of o)for(let s=0;s<t;s++)i[s]/=n}return o}function Qi(o,e){return typeof o[0]=="number"&&(o=[o]),Ki(o),{duration:e,length:o[0].length,sampleRate:o[0].length/e,numberOfChannels:o.length,getChannelData:t=>o?.[t],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}const At={decode:Ji,createBuffer:Qi};var sn=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(r){try{d(n.next(r))}catch(c){a(c)}}function l(r){try{d(n.throw(r))}catch(c){a(c)}}function d(r){r.done?s(r.value):i(r.value).then(u,l)}d((n=n.apply(o,e||[])).next())})};function $i(o,e,t){var n,i;return sn(this,void 0,void 0,function*(){const s=yield fetch(o,t);{const a=(n=s.clone().body)===null||n===void 0?void 0:n.getReader(),u=Number((i=s.headers)===null||i===void 0?void 0:i.get("Content-Length"));let l=0;const d=(r,c)=>sn(this,void 0,void 0,function*(){if(r)return;l+=c?.length||0;const h=Math.round(l/u*100);return e(h),a?.read().then(({done:f,value:m})=>d(f,m))});a?.read().then(({done:r,value:c})=>d(r,c))}return s.blob()})}const xi={fetchBlob:$i};class vt{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),n?.once){const i=()=>{this.removeEventListener(e,i),this.removeEventListener(e,t)};return this.addEventListener(e,i),i}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(n=>n(...t))}}class eo extends vt{constructor(e){super(),this.isExternalMedia=!1,e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onceMediaEvent("canplay",()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)})}onMediaEvent(e,t,n){return this.media.addEventListener(e,t,n),()=>this.media.removeEventListener(e,t)}onceMediaEvent(e,t){return this.onMediaEvent(e,t,{once:!0})}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}setSrc(e,t){if(this.getSrc()===e)return;this.revokeSrc();const i=t instanceof Blob?URL.createObjectURL(t):e;this.media.src=i,this.media.load()}destroy(){this.media.pause(),!this.isExternalMedia&&(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(e){this.media=e}play(){return this.media.play()}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=e}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}function to(o,e,t,n,i=5){let s=()=>{};if(!o)return s;const a=u=>{if(u.button===2)return;u.preventDefault(),u.stopPropagation(),o.style.touchAction="none";let l=u.clientX,d=u.clientY,r=!1;const c=m=>{m.preventDefault(),m.stopPropagation();const _=m.clientX,g=m.clientY;if(r||Math.abs(_-l)>=i||Math.abs(g-d)>=i){const{left:v,top:y}=o.getBoundingClientRect();r||(r=!0,t?.(l-v,d-y)),e(_-l,g-d,_-v,g-y),l=_,d=g}},h=m=>{r&&(m.preventDefault(),m.stopPropagation())},f=()=>{o.style.touchAction="",r&&n?.(),s()};document.addEventListener("pointermove",c),document.addEventListener("pointerup",f),document.addEventListener("pointerleave",f),document.addEventListener("click",h,!0),s=()=>{document.removeEventListener("pointermove",c),document.removeEventListener("pointerup",f),document.removeEventListener("pointerleave",f),setTimeout(()=>{document.removeEventListener("click",h,!0)},10)}};return o.addEventListener("pointerdown",a),()=>{s(),o.removeEventListener("pointerdown",a)}}class bt extends vt{constructor(e,t){super(),this.timeouts=[],this.isScrolling=!1,this.audioData=null,this.resizeObserver=null,this.isDragging=!1,this.options=e;const n=this.parentFromOptionsContainer(e.container);this.parent=n;const[i,s]=this.initHtml();n.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),t&&s.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){const e=n=>{const i=this.wrapper.getBoundingClientRect(),s=n.clientX-i.left,a=n.clientX-i.left,u=s/i.width,l=a/i.height;return[u,l]};this.wrapper.addEventListener("click",n=>{const[i,s]=e(n);this.emit("click",i,s)}),this.wrapper.addEventListener("dblclick",n=>{const[i,s]=e(n);this.emit("dblclick",i,s)}),this.options.dragToSeek&&this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:i,clientWidth:s}=this.scrollContainer,a=n/i,u=(n+s)/i;this.emit("scroll",a,u)});const t=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{t(()=>this.reRender())}),this.resizeObserver.observe(this.scrollContainer)}initDrag(){to(this.wrapper,(e,t,n)=>{this.emit("drag",Math.max(0,Math.min(1,n/this.wrapper.getBoundingClientRect().width)))},()=>this.isDragging=!0,()=>this.isDragging=!1)}getHeight(){return this.options.height==null?128:isNaN(Number(this.options.height))?this.options.height==="auto"&&this.parent.clientHeight||128:Number(this.options.height)}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"});return t.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight()}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek&&!this.options.dragToSeek&&this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}destroy(){var e;this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect()}createDelay(e=10){const t={};return this.timeouts.push(t),n=>{t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(n,e)}}convertColorValues(e){if(!Array.isArray(e))return e||"";if(e.length<2)return e[0]||"";const t=document.createElement("canvas"),i=t.getContext("2d").createLinearGradient(0,0,0,t.height),s=1/(e.length-1);return e.forEach((a,u)=>{const l=u*s;i.addColorStop(l,a)}),i}renderBarWaveform(e,t,n,i){const s=e[0],a=e[1]||e[0],u=s.length,{width:l,height:d}=n.canvas,r=d/2,c=window.devicePixelRatio||1,h=t.barWidth?t.barWidth*c:1,f=t.barGap?t.barGap*c:t.barWidth?h/2:0,m=t.barRadius||0,_=l/(h+f)/u,g=m&&"roundRect"in n?"roundRect":"rect";n.beginPath();let v=0,y=0,k=0;for(let D=0;D<=u;D++){const M=Math.round(D*_);if(M>v){const P=Math.round(y*r*i),T=Math.round(k*r*i),I=P+T||1;let B=r-P;t.barAlign==="top"?B=0:t.barAlign==="bottom"&&(B=d-I),n[g](v*(h+f),B,h,I,m),v=M,y=0,k=0}const A=Math.abs(s[D]||0),E=Math.abs(a[D]||0);A>y&&(y=A),E>k&&(k=E)}n.fill(),n.closePath()}renderLineWaveform(e,t,n,i){const s=a=>{const u=e[a]||e[0],l=u.length,{height:d}=n.canvas,r=d/2,c=n.canvas.width/l;n.moveTo(0,r);let h=0,f=0;for(let m=0;m<=l;m++){const _=Math.round(m*c);if(_>h){const v=Math.round(f*r*i)||1,y=r+v*(a===0?-1:1);n.lineTo(h,y),h=_,f=0}const g=Math.abs(u[m]||0);g>f&&(f=g)}n.lineTo(h,r)};n.beginPath(),s(0),s(1),n.fill(),n.closePath()}renderWaveform(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor),t.renderFunction){t.renderFunction(e,n);return}let i=t.barHeight||1;if(t.normalize){const s=Array.from(e[0]).reduce((a,u)=>Math.max(a,Math.abs(u)),0);i=s?1/s:1}if(t.barWidth||t.barGap||t.barAlign){this.renderBarWaveform(e,t,n,i);return}this.renderLineWaveform(e,t,n,i)}renderSingleCanvas(e,t,n,i,s,a,u,l){const d=window.devicePixelRatio||1,r=document.createElement("canvas"),c=e[0].length;r.width=Math.round(n*(a-s)/c),r.height=i*d,r.style.width=`${Math.floor(r.width/d)}px`,r.style.height=`${i}px`,r.style.left=`${Math.floor(s*n/d/c)}px`,u.appendChild(r);const h=r.getContext("2d");if(this.renderWaveform(e.map(f=>f.slice(s,a)),t,h),r.width>0&&r.height>0){const f=r.cloneNode(),m=f.getContext("2d");m.drawImage(r,0,0),m.globalCompositeOperation="source-in",m.fillStyle=this.convertColorValues(t.progressColor),m.fillRect(0,0,r.width,r.height),l.appendChild(f)}}renderChannel(e,t,n){const i=document.createElement("div"),s=this.getHeight();i.style.height=`${s}px`,this.canvasWrapper.style.minHeight=`${s}px`,this.canvasWrapper.appendChild(i);const a=i.cloneNode();this.progressWrapper.appendChild(a);const{scrollLeft:u,scrollWidth:l,clientWidth:d}=this.scrollContainer,r=e[0].length,c=r/l;let h=Math.min(bt.MAX_CANVAS_WIDTH,d);if(t.barWidth||t.barGap){const M=t.barWidth||.5,A=t.barGap||M/2,E=M+A;h%E!==0&&(h=Math.floor(h/E)*E)}const f=Math.floor(Math.abs(u)*c),m=Math.floor(f+h*c),_=m-f,g=(M,A)=>{this.renderSingleCanvas(e,t,n,s,Math.max(0,M),Math.min(A,r),i,a)},v=this.createDelay(),y=this.createDelay(),k=(M,A)=>{g(M,A),M>0&&v(()=>{k(M-_,A-_)})},D=(M,A)=>{g(M,A),A<r&&y(()=>{D(M+_,A+_)})};k(f,m),m<r&&D(m,m+_)}render(e){this.timeouts.forEach(u=>u.timeout&&clearTimeout(u.timeout)),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.wrapper.style.width="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const t=window.devicePixelRatio||1,n=this.scrollContainer.clientWidth,i=Math.ceil(e.duration*(this.options.minPxPerSec||0));this.isScrolling=i>n;const s=this.options.fillParent&&!this.isScrolling,a=(s?n:i)*t;if(this.wrapper.style.width=s?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrolling?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.options.splitChannels)for(let u=0;u<e.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),this.options.splitChannels[u]);this.renderChannel([e.getChannelData(u)],l,a)}else{const u=[e.getChannelData(0)];e.numberOfChannels>1&&u.push(e.getChannelData(1)),this.renderChannel(u,this.options,a)}this.audioData=e,this.emit("render")}reRender(){if(!this.audioData)return;const e=this.progressWrapper.clientWidth;this.render(this.audioData);const t=this.progressWrapper.clientWidth;this.scrollContainer.scrollLeft+=t-e}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{clientWidth:n,scrollLeft:i,scrollWidth:s}=this.scrollContainer,a=s*e,u=n/2,l=t&&this.options.autoCenter&&!this.isDragging?u:n;if(a>i+l||a<i)if(this.options.autoCenter&&!this.isDragging){const d=u/20;a-(i+u)>=d&&a<i+n?this.scrollContainer.scrollLeft+=d:this.scrollContainer.scrollLeft=a-u}else this.isDragging?this.scrollContainer.scrollLeft=a<i?a-10:a-n+10:this.scrollContainer.scrollLeft=a;{const{scrollLeft:d}=this.scrollContainer,r=d/s,c=(d+n)/s;this.emit("scroll",r,c)}}renderProgress(e,t){if(isNaN(e))return;const n=e*100;this.canvasWrapper.style.clipPath=`polygon(${n}% 0, 100% 0, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.marginLeft=Math.round(n)===100?`-${this.options.cursorWidth}px`:"",this.isScrolling&&this.options.autoScroll&&this.scrollIntoView(e,t)}}bt.MAX_CANVAS_WIDTH=4e3;class no extends vt{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}var Pt=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(r){try{d(n.next(r))}catch(c){a(c)}}function l(r){try{d(n.throw(r))}catch(c){a(c)}}function d(r){r.done?s(r.value):i(r.value).then(u,l)}d((n=n.apply(o,e||[])).next())})};class io extends vt{constructor(e=new AudioContext){super(),this.bufferNode=null,this.autoplay=!1,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Pt(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(e){this.currentSrc=e,fetch(e).then(t=>t.arrayBuffer()).then(t=>this.audioContext.decodeAudioData(t)).then(t=>{this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play()})}_play(){var e;this.paused&&(this.paused=!1,(e=this.bufferNode)===null||e===void 0||e.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.bufferNode.buffer=this.buffer,this.bufferNode.connect(this.gainNode),this.playedDuration>=this.duration&&(this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,this.playedDuration),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))})}_pause(){var e;this.paused||(this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime)}play(){return Pt(this,void 0,void 0,function*(){this._play(),this.emit("play")})}pause(){this._pause(),this.emit("pause")}setSinkId(e){return Pt(this,void 0,void 0,function*(){return this.audioContext.setSinkId(e)})}get playbackRate(){var e,t;return(t=(e=this.bufferNode)===null||e===void 0?void 0:e.playbackRate.value)!==null&&t!==void 0?t:1}set playbackRate(e){this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return this.paused?this.playedDuration:this.playedDuration+this.audioContext.currentTime-this.playStartTime}set currentTime(e){this.emit("seeking"),this.paused?this.playedDuration=e:(this._pause(),this.playedDuration=e,this._play()),this.emit("timeupdate")}get duration(){var e;return((e=this.buffer)===null||e===void 0?void 0:e.duration)||0}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}getGainNode(){return this.gainNode}}var Pe=globalThis&&globalThis.__awaiter||function(o,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function u(r){try{d(n.next(r))}catch(c){a(c)}}function l(r){try{d(n.throw(r))}catch(c){a(c)}}function d(r){r.done?s(r.value):i(r.value).then(u,l)}d((n=n.apply(o,e||[])).next())})};const oo={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class He extends eo{static create(e){return new He(e)}constructor(e){const t=e.media||(e.backend==="WebAudio"?new io:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.options=Object.assign({},oo,e),this.timer=new no;const n=t?void 0:this.getMediaElement();this.renderer=new bt(this.options,n),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc();i?this.load(i,this.options.peaks,this.options.duration):this.options.peaks&&this.options.duration&&this.loadPredecoded()}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{const e=this.getCurrentTime();this.renderer.renderProgress(e/this.getDuration(),!0),this.emit("timeupdate",e),this.emit("audioprocess",e)}))}initPlayerEvents(){this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const e=this.getCurrentTime();this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),this.emit("timeupdate",e)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))}),this.renderer.on("dblclick",(e,t)=>{this.emit("dblclick",e,t)}),this.renderer.on("scroll",(e,t)=>{const n=this.getDuration();this.emit("scroll",e*n,t*n)}),this.renderer.on("render",()=>{this.emit("redraw")}));{let e;this.subscriptions.push(this.renderer.on("drag",t=>{this.options.interact&&(this.renderer.renderProgress(t),clearTimeout(e),e=setTimeout(()=>{this.seekTo(t)},this.isPlaying()?0:200),this.emit("interaction",t*this.getDuration()),this.emit("drag",t))}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach(t=>{this.registerPlugin(t)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(e=>e()),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){return e.init(this),this.plugins.push(e),this.subscriptions.push(e.once("destroy",()=>{this.plugins=this.plugins.filter(t=>t!==e)})),e}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}getActivePlugins(){return this.plugins}loadPredecoded(){return Pe(this,void 0,void 0,function*(){this.options.peaks&&this.options.duration&&(this.decodedData=At.createBuffer(this.options.peaks,this.options.duration),yield Promise.resolve(),this.renderDecoded())})}renderDecoded(){return Pe(this,void 0,void 0,function*(){this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData))})}loadAudio(e,t,n,i){return Pe(this,void 0,void 0,function*(){if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!t&&!n){const s=a=>this.emit("loading",a);t=yield xi.fetchBlob(e,s,this.options.fetchParams)}if(this.setSrc(e,t),i=(yield Promise.resolve(i||this.getDuration()))||(yield new Promise(s=>{this.onceMediaEvent("loadedmetadata",()=>s(this.getDuration()))}))||(yield Promise.resolve(0)),n)this.decodedData=At.createBuffer(n,i);else if(t){const s=yield t.arrayBuffer();this.decodedData=yield At.decode(s,this.options.sampleRate)}this.renderDecoded(),this.emit("ready",this.getDuration())})}load(e,t,n){return Pe(this,void 0,void 0,function*(){yield this.loadAudio(e,void 0,t,n)})}loadBlob(e,t,n){return Pe(this,void 0,void 0,function*(){yield this.loadAudio("blob",e,t,n)})}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:n=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(e,this.decodedData.numberOfChannels),s=[];for(let a=0;a<i;a++){const u=this.decodedData.getChannelData(a),l=[],d=Math.round(u.length/t);for(let r=0;r<t;r++){const c=u.slice(r*d,(r+1)*d),h=Math.max(...c);l.push(Math.round(h*n)/n)}s.push(l)}return s}getDuration(){let e=super.getDuration()||0;return(e===0||e===1/0)&&this.decodedData&&(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}playPause(){return Pe(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}destroy(){this.emit("destroy"),this.plugins.forEach(e=>e.destroy()),this.subscriptions.forEach(e=>e()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}let In=class{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),n?.once){const i=()=>{this.removeEventListener(e,i),this.removeEventListener(e,t)};return this.addEventListener(e,i),i}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(n=>n(...t))}},so=class extends In{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}};function ut(o,e,t,n,i=5){let s=()=>{};if(!o)return s;const a=u=>{if(u.button===2)return;u.preventDefault(),u.stopPropagation(),o.style.touchAction="none";let l=u.clientX,d=u.clientY,r=!1;const c=m=>{m.preventDefault(),m.stopPropagation();const _=m.clientX,g=m.clientY;if(r||Math.abs(_-l)>=i||Math.abs(g-d)>=i){const{left:v,top:y}=o.getBoundingClientRect();r||(r=!0,t?.(l-v,d-y)),e(_-l,g-d,_-v,g-y),l=_,d=g}},h=m=>{r&&(m.preventDefault(),m.stopPropagation())},f=()=>{o.style.touchAction="",r&&n?.(),s()};document.addEventListener("pointermove",c),document.addEventListener("pointerup",f),document.addEventListener("pointerleave",f),document.addEventListener("click",h,!0),s=()=>{document.removeEventListener("pointermove",c),document.removeEventListener("pointerup",f),document.removeEventListener("pointerleave",f),setTimeout(()=>{document.removeEventListener("click",h,!0)},10)}};return o.addEventListener("pointerdown",a),()=>{s(),o.removeEventListener("pointerdown",a)}}class rn extends In{constructor(e,t,n=0){var i,s,a,u,l,d,r;super(),this.totalDuration=t,this.numberOfChannels=n,this.minLength=0,this.maxLength=1/0,this.id=e.id||`region-${Math.random().toString(32).slice(2)}`,this.start=this.clampPosition(e.start),this.end=this.clampPosition((i=e.end)!==null&&i!==void 0?i:e.start),this.drag=(s=e.drag)===null||s===void 0||s,this.resize=(a=e.resize)===null||a===void 0||a,this.color=(u=e.color)!==null&&u!==void 0?u:"rgba(0, 0, 0, 0.1)",this.minLength=(l=e.minLength)!==null&&l!==void 0?l:this.minLength,this.maxLength=(d=e.maxLength)!==null&&d!==void 0?d:this.maxLength,this.channelIdx=(r=e.channelIdx)!==null&&r!==void 0?r:-1,this.element=this.initElement(),this.setContent(e.content),this.setPart(),this.renderPosition(),this.initMouseEvents()}clampPosition(e){return Math.max(0,Math.min(this.totalDuration,e))}setPart(){const e=this.start===this.end;this.element.setAttribute("part",`${e?"marker":"region"} ${this.id}`)}addResizeHandles(e){const t=document.createElement("div");t.setAttribute("data-resize","left"),t.setAttribute("style",`
        position: absolute;
        z-index: 2;
        width: 6px;
        height: 100%;
        top: 0;
        left: 0;
        border-left: 2px solid rgba(0, 0, 0, 0.5);
        border-radius: 2px 0 0 2px;
        cursor: ew-resize;
        word-break: keep-all;
      `),t.setAttribute("part","region-handle region-handle-left");const n=t.cloneNode();n.setAttribute("data-resize","right"),n.style.left="",n.style.right="0",n.style.borderRight=n.style.borderLeft,n.style.borderLeft="",n.style.borderRadius="0 2px 2px 0",n.setAttribute("part","region-handle region-handle-right"),e.appendChild(t),e.appendChild(n),ut(t,i=>this.onResize(i,"start"),()=>null,()=>this.onEndResizing(),1),ut(n,i=>this.onResize(i,"end"),()=>null,()=>this.onEndResizing(),1)}removeResizeHandles(e){const t=e.querySelector('[data-resize="left"]'),n=e.querySelector('[data-resize="right"]');t&&e.removeChild(t),n&&e.removeChild(n)}initElement(){const e=document.createElement("div"),t=this.start===this.end;let n=0,i=100;return this.channelIdx>=0&&this.channelIdx<this.numberOfChannels&&(i=100/this.numberOfChannels,n=i*this.channelIdx),e.setAttribute("style",`
      position: absolute;
      top: ${n}%;
      height: ${i}%;
      background-color: ${t?"none":this.color};
      border-left: ${t?"2px solid "+this.color:"none"};
      border-radius: 2px;
      box-sizing: border-box;
      transition: background-color 0.2s ease;
      cursor: ${this.drag?"grab":"default"};
      pointer-events: all;
    `),!t&&this.resize&&this.addResizeHandles(e),e}renderPosition(){const e=this.start/this.totalDuration,t=(this.totalDuration-this.end)/this.totalDuration;this.element.style.left=100*e+"%",this.element.style.right=100*t+"%"}initMouseEvents(){const{element:e}=this;e&&(e.addEventListener("click",t=>this.emit("click",t)),e.addEventListener("mouseenter",t=>this.emit("over",t)),e.addEventListener("mouseleave",t=>this.emit("leave",t)),e.addEventListener("dblclick",t=>this.emit("dblclick",t)),ut(e,t=>this.onMove(t),()=>this.onStartMoving(),()=>this.onEndMoving()))}onStartMoving(){this.drag&&(this.element.style.cursor="grabbing")}onEndMoving(){this.drag&&(this.element.style.cursor="grab",this.emit("update-end"))}_onUpdate(e,t){if(!this.element.parentElement)return;const n=e/this.element.parentElement.clientWidth*this.totalDuration,i=t&&t!=="start"?this.start:this.start+n,s=t&&t!=="end"?this.end:this.end+n,a=s-i;i>=0&&s<=this.totalDuration&&i<=s&&a>=this.minLength&&a<=this.maxLength&&(this.start=i,this.end=s,this.renderPosition(),this.emit("update"))}onMove(e){this.drag&&this._onUpdate(e)}onResize(e,t){this.resize&&this._onUpdate(e,t)}onEndResizing(){this.resize&&this.emit("update-end")}_setTotalDuration(e){this.totalDuration=e,this.renderPosition()}play(){this.emit("play")}setContent(e){var t;if((t=this.content)===null||t===void 0||t.remove(),e){if(typeof e=="string"){this.content=document.createElement("div");const n=this.start===this.end;this.content.style.padding=`0.2em ${n?.2:.4}em`,this.content.textContent=e}else this.content=e;this.content.setAttribute("part","region-content"),this.element.appendChild(this.content)}else this.content=void 0}setOptions(e){var t,n;if(e.color&&(this.color=e.color,this.element.style.backgroundColor=this.color),e.drag!==void 0&&(this.drag=e.drag,this.element.style.cursor=this.drag?"grab":"default"),e.start!==void 0||e.end!==void 0){const i=this.start===this.end;this.start=this.clampPosition((t=e.start)!==null&&t!==void 0?t:this.start),this.end=this.clampPosition((n=e.end)!==null&&n!==void 0?n:i?this.start:this.end),this.renderPosition(),this.setPart()}if(e.content&&this.setContent(e.content),e.id&&(this.id=e.id,this.setPart()),e.resize!==void 0&&e.resize!==this.resize){const i=this.start===this.end;this.resize=e.resize,this.resize&&!i?this.addResizeHandles(this.element):this.removeResizeHandles(this.element)}}remove(){this.emit("remove"),this.element.remove(),this.element=null}}let ro=class Nn extends so{constructor(e){super(e),this.regions=[],this.regionsContainer=this.initRegionsContainer()}static create(e){return new Nn(e)}onInit(){if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");this.wavesurfer.getWrapper().appendChild(this.regionsContainer);let e=[];this.subscriptions.push(this.wavesurfer.on("timeupdate",t=>{const n=this.regions.filter(i=>i.start<=t&&i.end>=t);n.forEach(i=>{e.includes(i)||this.emit("region-in",i)}),e.forEach(i=>{n.includes(i)||this.emit("region-out",i)}),e=n}))}initRegionsContainer(){const e=document.createElement("div");return e.setAttribute("style",`
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 3;
      pointer-events: none;
    `),e}getRegions(){return this.regions}avoidOverlapping(e){if(!e.content)return;const t=e.content,n=t.getBoundingClientRect().left,i=e.element.scrollWidth,s=this.regions.filter(a=>{if(a===e||!a.content)return!1;const u=a.content.getBoundingClientRect().left,l=a.element.scrollWidth;return n<u+l&&u<n+i}).map(a=>{var u;return((u=a.content)===null||u===void 0?void 0:u.getBoundingClientRect().height)||0}).reduce((a,u)=>a+u,0);t.style.marginTop=`${s}px`}saveRegion(e){this.regionsContainer.appendChild(e.element),this.avoidOverlapping(e),this.regions.push(e);const t=[e.on("update-end",()=>{this.avoidOverlapping(e),this.emit("region-updated",e)}),e.on("play",()=>{var n,i;(n=this.wavesurfer)===null||n===void 0||n.play(),(i=this.wavesurfer)===null||i===void 0||i.setTime(e.start)}),e.on("click",n=>{this.emit("region-clicked",e,n)}),e.on("dblclick",n=>{this.emit("region-double-clicked",e,n)}),e.once("remove",()=>{t.forEach(n=>n()),this.regions=this.regions.filter(n=>n!==e)})];this.subscriptions.push(...t),this.emit("region-created",e)}addRegion(e){var t,n;if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");const i=this.wavesurfer.getDuration(),s=(n=(t=this.wavesurfer)===null||t===void 0?void 0:t.getDecodedData())===null||n===void 0?void 0:n.numberOfChannels,a=new rn(e,i,s);return i?this.saveRegion(a):this.subscriptions.push(this.wavesurfer.once("ready",u=>{a._setTotalDuration(u),this.saveRegion(a)})),a}enableDragSelection(e){var t,n;const i=(n=(t=this.wavesurfer)===null||t===void 0?void 0:t.getWrapper())===null||n===void 0?void 0:n.querySelector("div");if(!i)return()=>{};let s=null,a=0;return ut(i,(u,l,d)=>{s&&s._onUpdate(u,d>a?"end":"start")},u=>{var l,d;if(a=u,!this.wavesurfer)return;const r=this.wavesurfer.getDuration(),c=(d=(l=this.wavesurfer)===null||l===void 0?void 0:l.getDecodedData())===null||d===void 0?void 0:d.numberOfChannels,h=this.wavesurfer.getWrapper().clientWidth,f=u/h*r,m=(u+5)/h*r;s=new rn(Object.assign(Object.assign({},e),{start:f,end:m}),r,c),this.regionsContainer.appendChild(s.element)},()=>{s&&(this.saveRegion(s),s=null)})}clearRegions(){this.regions.forEach(e=>e.remove())}destroy(){this.clearRegions(),super.destroy()}};function ao(o){const e=o.numberOfChannels,t=o.length*e*2+44,n=new ArrayBuffer(t),i=new DataView(n);let s=0;const a=function(u,l,d){for(let r=0;r<d.length;r++)u.setUint8(l+r,d.charCodeAt(r))};a(i,s,"RIFF"),s+=4,i.setUint32(s,t-8,!0),s+=4,a(i,s,"WAVE"),s+=4,a(i,s,"fmt "),s+=4,i.setUint32(s,16,!0),s+=4,i.setUint16(s,1,!0),s+=2,i.setUint16(s,e,!0),s+=2,i.setUint32(s,o.sampleRate,!0),s+=4,i.setUint32(s,o.sampleRate*2*e,!0),s+=4,i.setUint16(s,e*2,!0),s+=2,i.setUint16(s,16,!0),s+=2,a(i,s,"data"),s+=4,i.setUint32(s,o.length*e*2,!0),s+=4;for(let u=0;u<o.numberOfChannels;u++){const l=o.getChannelData(u);for(let d=0;d<l.length;d++)i.setInt16(s,l[d]*65535,!0),s+=2}return new Uint8Array(n)}const Bt=async(o,e,t)=>{const n=new AudioContext,i=o.numberOfChannels,s=o.sampleRate;let a=o.length,u=0;e&&t&&(u=Math.round(e*s),a=Math.round(t*s)-u);const l=n.createBuffer(i,a,s);for(let d=0;d<i;d++){const r=o.getChannelData(d),c=l.getChannelData(d);for(let h=0;h<a;h++)c[h]=r[u+h]}return ao(l)},mt=(o,e)=>{o&&o.skip(e)},ze=(o,e)=>o/100*(e||5);const{SvelteComponent:lo,append:J,attr:O,check_outros:dt,create_component:qe,destroy_component:Ue,detach:Ce,element:te,empty:uo,group_outros:ct,init:co,insert:Ee,listen:be,mount_component:je,noop:xe,run_all:Hn,safe_not_equal:ho,set_data:fo,space:Te,text:an,transition_in:Y,transition_out:K}=window.__gradio__svelte__internal;function mo(o){let e,t;return e=new ui({}),{c(){qe(e.$$.fragment)},m(n,i){je(e,n,i),t=!0},i(n){t||(Y(e.$$.fragment,n),t=!0)},o(n){K(e.$$.fragment,n),t=!1},d(n){Ue(e,n)}}}function _o(o){let e,t;return e=new On({}),{c(){qe(e.$$.fragment)},m(n,i){je(e,n,i),t=!0},i(n){t||(Y(e.$$.fragment,n),t=!0)},o(n){K(e.$$.fragment,n),t=!1},d(n){Ue(e,n)}}}function ln(o){let e,t,n,i,s;return t=new ci({}),{c(){e=te("button"),qe(t.$$.fragment),O(e,"class","action icon svelte-k0z87h"),O(e,"aria-label","Reset audio")},m(a,u){Ee(a,e,u),je(t,e,null),n=!0,i||(s=be(e,"click",o[26]),i=!0)},p:xe,i(a){n||(Y(t.$$.fragment,a),n=!0)},o(a){K(t.$$.fragment,a),n=!1},d(a){a&&Ce(e),Ue(t),i=!1,s()}}}function un(o){let e,t,n,i;const s=[go,po],a=[];function u(l,d){return l[0]===""?0:1}return e=u(o),t=a[e]=s[e](o),{c(){t.c(),n=uo()},m(l,d){a[e].m(l,d),Ee(l,n,d),i=!0},p(l,d){let r=e;e=u(l),e===r?a[e].p(l,d):(ct(),K(a[r],1,1,()=>{a[r]=null}),dt(),t=a[e],t?t.p(l,d):(t=a[e]=s[e](l),t.c()),Y(t,1),t.m(n.parentNode,n))},i(l){i||(Y(t),i=!0)},o(l){K(t),i=!1},d(l){l&&Ce(n),a[e].d(l)}}}function po(o){let e,t,n,i,s;return{c(){e=te("button"),e.textContent="Trim",t=Te(),n=te("button"),n.textContent="Cancel",O(e,"class","text-button svelte-k0z87h"),O(n,"class","text-button svelte-k0z87h")},m(a,u){Ee(a,e,u),Ee(a,t,u),Ee(a,n,u),i||(s=[be(e,"click",o[11]),be(n,"click",o[13])],i=!0)},p:xe,i:xe,o:xe,d(a){a&&(Ce(e),Ce(t),Ce(n)),i=!1,Hn(s)}}}function go(o){let e,t,n,i,s;return t=new di({}),{c(){e=te("button"),qe(t.$$.fragment),O(e,"class","action icon svelte-k0z87h"),O(e,"aria-label","Trim audio to selection")},m(a,u){Ee(a,e,u),je(t,e,null),n=!0,i||(s=be(e,"click",o[13]),i=!0)},p:xe,i(a){n||(Y(t.$$.fragment,a),n=!0)},o(a){K(t.$$.fragment,a),n=!1},d(a){a&&Ce(e),Ue(t),i=!1,s()}}}function vo(o){let e,t,n,i,s,a,u,l,d,r,c,h,f,m,_,g,v,y,k,D,M,A,E,P,T,I;r=new Si({});const B=[_o,mo],W=[];function b(p,z){return p[4]?0:1}m=b(o),_=W[m]=B[m](o),k=new zi({});let L=o[5]&&o[0]===""&&ln(o),S=o[6]&&un(o);return{c(){e=te("div"),t=te("button"),n=te("span"),i=an(o[9]),s=an("x"),u=Te(),l=te("div"),d=te("button"),qe(r.$$.fragment),h=Te(),f=te("button"),_.c(),v=Te(),y=te("button"),qe(k.$$.fragment),M=Te(),A=te("div"),L&&L.c(),E=Te(),S&&S.c(),O(n,"class","svelte-k0z87h"),O(t,"class","playback icon svelte-k0z87h"),O(t,"aria-label",a=`Adjust playback speed to ${o[10][(o[10].indexOf(o[9])+1)%o[10].length]}x`),O(d,"class","rewind icon svelte-k0z87h"),O(d,"aria-label",c=`Skip backwards by ${ze(o[2],o[8].skip_length)} seconds`),O(f,"class","play-pause-button icon svelte-k0z87h"),O(f,"aria-label",g=o[4]?o[3]("common.play"):o[3]("common.pause")),O(y,"class","skip icon svelte-k0z87h"),O(y,"aria-label",D="Skip forward by "+ze(o[2],o[8].skip_length)+" seconds"),O(l,"class","play-pause-wrapper svelte-k0z87h"),O(A,"class","settings-wrapper svelte-k0z87h"),O(e,"class","controls svelte-k0z87h"),O(e,"data-testid","waveform-controls")},m(p,z){Ee(p,e,z),J(e,t),J(t,n),J(n,i),J(n,s),J(e,u),J(e,l),J(l,d),je(r,d,null),J(l,h),J(l,f),W[m].m(f,null),J(l,v),J(l,y),je(k,y,null),J(e,M),J(e,A),L&&L.m(A,null),J(A,E),S&&S.m(A,null),P=!0,T||(I=[be(t,"click",o[22]),be(d,"click",o[23]),be(f,"click",o[24]),be(y,"click",o[25])],T=!0)},p(p,[z]){(!P||z&512)&&fo(i,p[9]),(!P||z&512&&a!==(a=`Adjust playback speed to ${p[10][(p[10].indexOf(p[9])+1)%p[10].length]}x`))&&O(t,"aria-label",a),(!P||z&260&&c!==(c=`Skip backwards by ${ze(p[2],p[8].skip_length)} seconds`))&&O(d,"aria-label",c);let w=m;m=b(p),m!==w&&(ct(),K(W[w],1,1,()=>{W[w]=null}),dt(),_=W[m],_||(_=W[m]=B[m](p),_.c()),Y(_,1),_.m(f,null)),(!P||z&24&&g!==(g=p[4]?p[3]("common.play"):p[3]("common.pause")))&&O(f,"aria-label",g),(!P||z&260&&D!==(D="Skip forward by "+ze(p[2],p[8].skip_length)+" seconds"))&&O(y,"aria-label",D),p[5]&&p[0]===""?L?(L.p(p,z),z&33&&Y(L,1)):(L=ln(p),L.c(),Y(L,1),L.m(A,E)):L&&(ct(),K(L,1,1,()=>{L=null}),dt()),p[6]?S?(S.p(p,z),z&64&&Y(S,1)):(S=un(p),S.c(),Y(S,1),S.m(A,null)):S&&(ct(),K(S,1,1,()=>{S=null}),dt())},i(p){P||(Y(r.$$.fragment,p),Y(_),Y(k.$$.fragment,p),Y(L),Y(S),P=!0)},o(p){K(r.$$.fragment,p),K(_),K(k.$$.fragment,p),K(L),K(S),P=!1},d(p){p&&Ce(e),Ue(r),W[m].d(),Ue(k),L&&L.d(),S&&S.d(),T=!1,Hn(I)}}}function bo(o,e,t){let{waveform:n}=e,{audioDuration:i}=e,{i18n:s}=e,{playing:a}=e,{showRedo:u=!1}=e,{interactive:l=!1}=e,{handle_trim_audio:d}=e,{mode:r=""}=e,{container:c}=e,{handle_reset_value:h}=e,{waveform_settings:f={}}=e,{trimDuration:m=0}=e,_=[.5,1,1.5,2],g=_[1],v,y=null,k,D,M="";const A=()=>{t(18,y=v.addRegion({start:i/4,end:i/2,color:"hsla(15, 85%, 40%, 0.4)",drag:!0,resize:!0})),t(14,m=y.end-y.start)},E=()=>{if(n&&v&&y){const p=y.start,z=y.end;d(p,z),t(0,r=""),t(18,y=null)}},P=()=>{v?.getRegions().forEach(p=>{p.remove()}),v?.clearRegions()},T=()=>{P(),r==="edit"?t(0,r=""):(t(0,r="edit"),A())},I=(p,z)=>{let w,j;y&&(p==="left"?z==="ArrowLeft"?(w=y.start-.05,j=y.end):(w=y.start+.05,j=y.end):z==="ArrowLeft"?(w=y.start,j=y.end-.05):(w=y.start,j=y.end+.05),y.setOptions({start:w,end:j}),t(14,m=y.end-y.start))},B=()=>{t(9,g=_[(_.indexOf(g)+1)%_.length]),n.setPlaybackRate(g)},W=()=>n.skip(ze(i,f.skip_length)*-1),b=()=>n.playPause(),L=()=>n.skip(ze(i,f.skip_length)),S=()=>{h(),P(),t(0,r="")};return o.$$set=p=>{"waveform"in p&&t(1,n=p.waveform),"audioDuration"in p&&t(2,i=p.audioDuration),"i18n"in p&&t(3,s=p.i18n),"playing"in p&&t(4,a=p.playing),"showRedo"in p&&t(5,u=p.showRedo),"interactive"in p&&t(6,l=p.interactive),"handle_trim_audio"in p&&t(15,d=p.handle_trim_audio),"mode"in p&&t(0,r=p.mode),"container"in p&&t(16,c=p.container),"handle_reset_value"in p&&t(7,h=p.handle_reset_value),"waveform_settings"in p&&t(8,f=p.waveform_settings),"trimDuration"in p&&t(14,m=p.trimDuration)},o.$$.update=()=>{if(o.$$.dirty&2&&t(17,v=n.registerPlugin(ro.create())),o.$$.dirty&131072&&v?.on("region-out",p=>{p.play()}),o.$$.dirty&131072&&v?.on("region-updated",p=>{t(14,m=p.end-p.start)}),o.$$.dirty&131072&&v?.on("region-clicked",(p,z)=>{z.stopPropagation(),t(18,y=p),p.play()}),o.$$.dirty&2031616&&y){const p=c.children[0].shadowRoot;t(20,D=p.querySelector('[data-resize="right"]')),t(19,k=p.querySelector('[data-resize="left"]')),k&&D&&(k.setAttribute("role","button"),D.setAttribute("role","button"),k?.setAttribute("aria-label","Drag to adjust start time"),D?.setAttribute("aria-label","Drag to adjust end time"),k?.setAttribute("tabindex","0"),D?.setAttribute("tabindex","0"),k.addEventListener("focus",()=>{v&&t(21,M="left")}),D.addEventListener("focus",()=>{v&&t(21,M="right")}))}o.$$.dirty&2228224&&v&&window.addEventListener("keydown",p=>{p.key==="ArrowLeft"?I(M,"ArrowLeft"):p.key==="ArrowRight"&&I(M,"ArrowRight")})},[r,n,i,s,a,u,l,h,f,g,_,E,P,T,m,d,c,v,y,k,D,M,B,W,b,L,S]}class qn extends lo{constructor(e){super(),co(this,e,bo,vo,ho,{waveform:1,audioDuration:2,i18n:3,playing:4,showRedo:5,interactive:6,handle_trim_audio:15,mode:0,container:16,handle_reset_value:7,waveform_settings:8,trimDuration:14})}}const{SvelteComponent:wo,add_flush_callback:dn,append:se,attr:$,bind:cn,binding_callbacks:et,check_outros:Un,create_component:Ut,destroy_component:jt,detach:Ft,element:ge,empty:yo,group_outros:jn,init:ko,insert:Vt,mount_component:Xt,safe_not_equal:Co,set_data:Eo,space:lt,text:Ro,transition_in:we,transition_out:De}=window.__gradio__svelte__internal,{onMount:So}=window.__gradio__svelte__internal;function Do(o){let e,t,n,i,s,a,u,l,d,r,c,h,f,m=o[0]==="edit"&&o[13]>0&&hn(o),_=o[8]&&fn(o);return{c(){e=ge("div"),t=ge("div"),n=ge("div"),i=lt(),s=ge("div"),a=ge("time"),a.textContent="0:00",u=lt(),l=ge("div"),m&&m.c(),d=lt(),r=ge("time"),r.textContent="0:00",c=lt(),_&&_.c(),$(n,"id","waveform"),$(n,"class","svelte-15pl8d9"),$(t,"class","waveform-container svelte-15pl8d9"),$(a,"id","time"),$(a,"class","svelte-15pl8d9"),$(r,"id","duration"),$(r,"class","svelte-15pl8d9"),$(s,"class","timestamps svelte-15pl8d9"),$(e,"class","component-wrapper svelte-15pl8d9"),$(e,"data-testid",h=o[2]?"waveform-"+o[2]:"unlabelled-audio")},m(g,v){Vt(g,e,v),se(e,t),se(t,n),o[19](n),se(e,i),se(e,s),se(s,a),o[20](a),se(s,u),se(s,l),m&&m.m(l,null),se(l,d),se(l,r),o[21](r),se(e,c),_&&_.m(e,null),f=!0},p(g,v){g[0]==="edit"&&g[13]>0?m?m.p(g,v):(m=hn(g),m.c(),m.m(l,d)):m&&(m.d(1),m=null),g[8]?_?(_.p(g,v),v&256&&we(_,1)):(_=fn(g),_.c(),we(_,1),_.m(e,null)):_&&(jn(),De(_,1,1,()=>{_=null}),Un()),(!f||v&4&&h!==(h=g[2]?"waveform-"+g[2]:"unlabelled-audio"))&&$(e,"data-testid",h)},i(g){f||(we(_),f=!0)},o(g){De(_),f=!1},d(g){g&&Ft(e),o[19](null),o[20](null),m&&m.d(),o[21](null),_&&_.d()}}}function Mo(o){let e,t;return e=new zn({props:{size:"small",$$slots:{default:[Lo]},$$scope:{ctx:o}}}),{c(){Ut(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},p(n,i){const s={};i&67108864&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){De(e.$$.fragment,n),t=!1},d(n){jt(e,n)}}}function hn(o){let e,t=o[14](o[13])+"",n;return{c(){e=ge("time"),n=Ro(t),$(e,"id","trim-duration"),$(e,"class","svelte-15pl8d9")},m(i,s){Vt(i,e,s),se(e,n)},p(i,s){s&8192&&t!==(t=i[14](i[13])+"")&&Eo(n,t)},d(i){i&&Ft(e)}}}function fn(o){let e,t,n,i;function s(l){o[22](l)}function a(l){o[23](l)}let u={container:o[7],waveform:o[8],playing:o[11],audioDuration:o[12],i18n:o[3],interactive:o[4],handle_trim_audio:o[15],showRedo:o[4],handle_reset_value:o[6],waveform_settings:o[5]};return o[0]!==void 0&&(u.mode=o[0]),o[13]!==void 0&&(u.trimDuration=o[13]),e=new qn({props:u}),et.push(()=>cn(e,"mode",s)),et.push(()=>cn(e,"trimDuration",a)),{c(){Ut(e.$$.fragment)},m(l,d){Xt(e,l,d),i=!0},p(l,d){const r={};d&128&&(r.container=l[7]),d&256&&(r.waveform=l[8]),d&2048&&(r.playing=l[11]),d&4096&&(r.audioDuration=l[12]),d&8&&(r.i18n=l[3]),d&16&&(r.interactive=l[4]),d&16&&(r.showRedo=l[4]),d&64&&(r.handle_reset_value=l[6]),d&32&&(r.waveform_settings=l[5]),!t&&d&1&&(t=!0,r.mode=l[0],dn(()=>t=!1)),!n&&d&8192&&(n=!0,r.trimDuration=l[13],dn(()=>n=!1)),e.$set(r)},i(l){i||(we(e.$$.fragment,l),i=!0)},o(l){De(e.$$.fragment,l),i=!1},d(l){jt(e,l)}}}function Lo(o){let e,t;return e=new gt({}),{c(){Ut(e.$$.fragment)},m(n,i){Xt(e,n,i),t=!0},i(n){t||(we(e.$$.fragment,n),t=!0)},o(n){De(e.$$.fragment,n),t=!1},d(n){jt(e,n)}}}function Ao(o){let e,t,n,i;const s=[Mo,Do],a=[];function u(l,d){return l[1]===null?0:1}return e=u(o),t=a[e]=s[e](o),{c(){t.c(),n=yo()},m(l,d){a[e].m(l,d),Vt(l,n,d),i=!0},p(l,[d]){let r=e;e=u(l),e===r?a[e].p(l,d):(jn(),De(a[r],1,1,()=>{a[r]=null}),Un(),t=a[e],t?t.p(l,d):(t=a[e]=s[e](l),t.c()),we(t,1),t.m(n.parentNode,n))},i(l){i||(we(t),i=!0)},o(l){De(t),i=!1},d(l){l&&Ft(n),a[e].d(l)}}}function Po(o,e,t){let{value:n=null}=e,{label:i}=e,{autoplay:s}=e,{i18n:a}=e,{dispatch:u}=e,{dispatch_blob:l=()=>Promise.resolve()}=e,{interactive:d=!1}=e,{waveform_settings:r={}}=e,{mode:c=""}=e,{handle_reset_value:h=()=>{}}=e,f,m,_=!1,g,v,y,k=0;const D=b=>{const L=Math.floor(b/60),p=`0${Math.round(b)%60}`.slice(-2);return`${L}:${p}`},M=()=>{t(8,m=He.create({container:f,url:n?.url,...r}))},A=async(b,L)=>{t(0,c="");const S=m.getDecodedData();S&&await Bt(S,b,L).then(async p=>{await l([p],"change"),m.destroy(),M()}),u("edit")};async function E(b){await hi(b).then(L=>{if(L)return m?.load(L)})}So(()=>{window.addEventListener("keydown",b=>{b.key==="ArrowRight"&&c!=="edit"?mt(m,.1):b.key==="ArrowLeft"&&c!=="edit"&&mt(m,-.1)})});function P(b){et[b?"unshift":"push"](()=>{f=b,t(7,f),t(8,m)})}function T(b){et[b?"unshift":"push"](()=>{g=b,t(9,g),t(8,m)})}function I(b){et[b?"unshift":"push"](()=>{v=b,t(10,v),t(8,m)})}function B(b){c=b,t(0,c)}function W(b){k=b,t(13,k)}return o.$$set=b=>{"value"in b&&t(1,n=b.value),"label"in b&&t(2,i=b.label),"autoplay"in b&&t(16,s=b.autoplay),"i18n"in b&&t(3,a=b.i18n),"dispatch"in b&&t(17,u=b.dispatch),"dispatch_blob"in b&&t(18,l=b.dispatch_blob),"interactive"in b&&t(4,d=b.interactive),"waveform_settings"in b&&t(5,r=b.waveform_settings),"mode"in b&&t(0,c=b.mode),"handle_reset_value"in b&&t(6,h=b.handle_reset_value)},o.$$.update=()=>{o.$$.dirty&384&&f!==void 0&&(m!==void 0&&m.destroy(),t(7,f.innerHTML="",f),M(),t(11,_=!1)),o.$$.dirty&65792&&s&&(m?.play(),t(11,_=!0)),o.$$.dirty&1280&&m?.on("decode",b=>{t(12,y=b),v&&t(10,v.textContent=D(b),v)}),o.$$.dirty&768&&m?.on("timeupdate",b=>g&&t(9,g.textContent=D(b),g)),o.$$.dirty&131328&&m?.on("finish",()=>{t(11,_=!1),u("stop"),u("end")}),o.$$.dirty&131328&&m?.on("pause",()=>{t(11,_=!1),u("pause")}),o.$$.dirty&131328&&m?.on("play",()=>{t(11,_=!0),u("play")}),o.$$.dirty&2&&n?.url&&E(n.url)},[c,n,i,a,d,r,h,f,m,g,v,_,y,k,D,A,s,u,l,P,T,I,B,W]}class To extends wo{constructor(e){super(),ko(this,e,Po,Ao,Co,{value:1,label:2,autoplay:16,i18n:3,dispatch:17,dispatch_blob:18,interactive:4,waveform_settings:5,mode:0,handle_reset_value:6})}}const Fn=To;const{SvelteComponent:Wo,append:zo,attr:We,bubble:mn,check_outros:Ot,create_component:Xe,destroy_component:Ge,detach:tt,element:Vn,empty:Bo,group_outros:It,init:Oo,insert:nt,mount_component:Ye,safe_not_equal:Io,space:Nt,transition_in:Q,transition_out:ie}=window.__gradio__svelte__internal,{createEventDispatcher:No}=window.__gradio__svelte__internal;function Ho(o){let e,t;return e=new zn({props:{size:"small",$$slots:{default:[Uo]},$$scope:{ctx:o}}}),{c(){Xe(e.$$.fragment)},m(n,i){Ye(e,n,i),t=!0},p(n,i){const s={};i&4096&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(Q(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){Ge(e,n)}}}function qo(o){let e,t,n,i,s,a=o[4]&&_n(o),u=o[5]&&pn(o);return i=new Fn({props:{value:o[0],label:o[1],autoplay:o[3],i18n:o[6],dispatch:o[8],waveform_settings:o[7]}}),{c(){e=Vn("div"),a&&a.c(),t=Nt(),u&&u.c(),n=Nt(),Xe(i.$$.fragment),We(e,"class","icon-buttons svelte-rvdo70")},m(l,d){nt(l,e,d),a&&a.m(e,null),zo(e,t),u&&u.m(e,null),nt(l,n,d),Ye(i,l,d),s=!0},p(l,d){l[4]?a?(a.p(l,d),d&16&&Q(a,1)):(a=_n(l),a.c(),Q(a,1),a.m(e,t)):a&&(It(),ie(a,1,1,()=>{a=null}),Ot()),l[5]?u?(u.p(l,d),d&32&&Q(u,1)):(u=pn(l),u.c(),Q(u,1),u.m(e,null)):u&&(It(),ie(u,1,1,()=>{u=null}),Ot());const r={};d&1&&(r.value=l[0]),d&2&&(r.label=l[1]),d&8&&(r.autoplay=l[3]),d&64&&(r.i18n=l[6]),d&128&&(r.waveform_settings=l[7]),i.$set(r)},i(l){s||(Q(a),Q(u),Q(i.$$.fragment,l),s=!0)},o(l){ie(a),ie(u),ie(i.$$.fragment,l),s=!1},d(l){l&&(tt(e),tt(n)),a&&a.d(),u&&u.d(),Ge(i,l)}}}function Uo(o){let e,t;return e=new gt({}),{c(){Xe(e.$$.fragment)},m(n,i){Ye(e,n,i),t=!0},i(n){t||(Q(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){Ge(e,n)}}}function _n(o){let e,t,n,i,s;return t=new ri({props:{Icon:li,label:o[6]("common.download")}}),{c(){e=Vn("a"),Xe(t.$$.fragment),We(e,"href",n=o[0].url),We(e,"target",window.__is_colab__?"_blank":null),We(e,"download",i=o[0].url)},m(a,u){nt(a,e,u),Ye(t,e,null),s=!0},p(a,u){const l={};u&64&&(l.label=a[6]("common.download")),t.$set(l),(!s||u&1&&n!==(n=a[0].url))&&We(e,"href",n),(!s||u&1&&i!==(i=a[0].url))&&We(e,"download",i)},i(a){s||(Q(t.$$.fragment,a),s=!0)},o(a){ie(t.$$.fragment,a),s=!1},d(a){a&&tt(e),Ge(t)}}}function pn(o){let e,t;return e=new ai({props:{i18n:o[6],formatter:o[9],value:o[0]}}),e.$on("error",o[10]),e.$on("share",o[11]),{c(){Xe(e.$$.fragment)},m(n,i){Ye(e,n,i),t=!0},p(n,i){const s={};i&64&&(s.i18n=n[6]),i&1&&(s.value=n[0]),e.$set(s)},i(n){t||(Q(e.$$.fragment,n),t=!0)},o(n){ie(e.$$.fragment,n),t=!1},d(n){Ge(e,n)}}}function jo(o){let e,t,n,i,s,a;e=new Wn({props:{show_label:o[2],Icon:gt,float:!1,label:o[1]||o[6]("audio.audio")}});const u=[qo,Ho],l=[];function d(r,c){return r[0]!==null?0:1}return n=d(o),i=l[n]=u[n](o),{c(){Xe(e.$$.fragment),t=Nt(),i.c(),s=Bo()},m(r,c){Ye(e,r,c),nt(r,t,c),l[n].m(r,c),nt(r,s,c),a=!0},p(r,[c]){const h={};c&4&&(h.show_label=r[2]),c&66&&(h.label=r[1]||r[6]("audio.audio")),e.$set(h);let f=n;n=d(r),n===f?l[n].p(r,c):(It(),ie(l[f],1,1,()=>{l[f]=null}),Ot(),i=l[n],i?i.p(r,c):(i=l[n]=u[n](r),i.c()),Q(i,1),i.m(s.parentNode,s))},i(r){a||(Q(e.$$.fragment,r),Q(i),a=!0)},o(r){ie(e.$$.fragment,r),ie(i),a=!1},d(r){r&&(tt(t),tt(s)),Ge(e,r),l[n].d(r)}}}function Fo(o,e,t){let{value:n=null}=e,{label:i}=e,{show_label:s=!0}=e,{autoplay:a}=e,{show_download_button:u=!0}=e,{show_share_button:l=!1}=e,{i18n:d}=e,{waveform_settings:r={}}=e;const c=No(),h=async _=>_?`<audio controls src="${await si(_.url,"url")}"></audio>`:"";function f(_){mn.call(this,o,_)}function m(_){mn.call(this,o,_)}return o.$$set=_=>{"value"in _&&t(0,n=_.value),"label"in _&&t(1,i=_.label),"show_label"in _&&t(2,s=_.show_label),"autoplay"in _&&t(3,a=_.autoplay),"show_download_button"in _&&t(4,u=_.show_download_button),"show_share_button"in _&&t(5,l=_.show_share_button),"i18n"in _&&t(6,d=_.i18n),"waveform_settings"in _&&t(7,r=_.waveform_settings)},o.$$.update=()=>{o.$$.dirty&1&&n&&c("change",n)},[n,i,s,a,u,l,d,r,c,h,f,m]}class Vo extends Wo{constructor(e){super(),Oo(this,e,Fo,jo,Io,{value:0,label:1,show_label:2,autoplay:3,show_download_button:4,show_share_button:5,i18n:6,waveform_settings:7})}}const Xo=Vo;function Tt(o,e,t,n){return new(t||(t=Promise))(function(i,s){function a(d){try{l(n.next(d))}catch(r){s(r)}}function u(d){try{l(n.throw(d))}catch(r){s(r)}}function l(d){var r;d.done?i(d.value):(r=d.value,r instanceof t?r:new t(function(c){c(r)})).then(a,u)}l((n=n.apply(o,e||[])).next())})}class Go{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),n?.once){const i=()=>{this.removeEventListener(e,i),this.removeEventListener(e,t)};return this.addEventListener(e,i),i}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(n=>n(...t))}}class Yo extends Go{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}}const Zo=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class it extends Yo{constructor(e){var t;super(Object.assign(Object.assign({},e),{audioBitsPerSecond:(t=e.audioBitsPerSecond)!==null&&t!==void 0?t:128e3})),this.stream=null,this.mediaRecorder=null}static create(e){return new it(e||{})}renderMicStream(e){const t=new AudioContext,n=t.createMediaStreamSource(e),i=t.createAnalyser();n.connect(i);const s=i.frequencyBinCount,a=new Float32Array(s),u=s/t.sampleRate;let l;const d=()=>{i.getFloatTimeDomainData(a),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[a],u)),l=requestAnimationFrame(d)};return d(),()=>{cancelAnimationFrame(l),n?.disconnect(),t?.close()}}startMic(e){return Tt(this,void 0,void 0,function*(){let t;try{t=yield navigator.mediaDevices.getUserMedia({audio:!e?.deviceId||{deviceId:e.deviceId}})}catch(i){throw new Error("Error accessing the microphone: "+i.message)}const n=this.renderMicStream(t);return this.subscriptions.push(this.once("destroy",n)),this.stream=t,t})}stopMic(){this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(e){return Tt(this,void 0,void 0,function*(){const t=this.stream||(yield this.startMic(e)),n=this.mediaRecorder||new MediaRecorder(t,{mimeType:this.options.mimeType||Zo.find(s=>MediaRecorder.isTypeSupported(s)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=n,this.stopRecording();const i=[];n.ondataavailable=s=>{s.data.size>0&&i.push(s.data)},n.onstop=()=>{var s;const a=new Blob(i,{type:n.mimeType});this.emit("record-end",a),this.options.renderRecordedAudio!==!1&&((s=this.wavesurfer)===null||s===void 0||s.load(URL.createObjectURL(a)))},n.start(),this.emit("record-start")})}isRecording(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="recording"}isPaused(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="paused"}stopRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.stop())}pauseRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.pause(),this.emit("record-pause"))}resumeRecording(){var e;this.isPaused()&&((e=this.mediaRecorder)===null||e===void 0||e.resume(),this.emit("record-resume"))}static getAvailableAudioDevices(){return Tt(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(e=>e.filter(t=>t.kind==="audioinput"))})}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}}const{SvelteComponent:Jo,append:F,attr:G,create_component:Ko,destroy_component:Qo,destroy_each:$o,detach:wt,element:ae,empty:xo,ensure_array_like:gn,init:es,insert:yt,listen:Ke,mount_component:ts,run_all:ns,safe_not_equal:is,set_data:Be,set_input_value:Ht,space:Qe,text:Oe,transition_in:os,transition_out:ss}=window.__gradio__svelte__internal,{onMount:rs}=window.__gradio__svelte__internal;function vn(o,e,t){const n=o.slice();return n[14]=e[t],n}function as(o){let e,t=gn(o[2]),n=[];for(let i=0;i<t.length;i+=1)n[i]=bn(vn(o,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=xo()},m(i,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,s);yt(i,e,s)},p(i,s){if(s&4){t=gn(i[2]);let a;for(a=0;a<t.length;a+=1){const u=vn(i,t,a);n[a]?n[a].p(u,s):(n[a]=bn(u),n[a].c(),n[a].m(e.parentNode,e))}for(;a<n.length;a+=1)n[a].d(1);n.length=t.length}},d(i){i&&wt(e),$o(n,i)}}}function ls(o){let e,t=o[1]("audio.no_microphone")+"",n;return{c(){e=ae("option"),n=Oe(t),e.__value="",Ht(e,e.__value)},m(i,s){yt(i,e,s),F(e,n)},p(i,s){s&2&&t!==(t=i[1]("audio.no_microphone")+"")&&Be(n,t)},d(i){i&&wt(e)}}}function bn(o){let e,t=o[14].label+"",n,i;return{c(){e=ae("option"),n=Oe(t),e.__value=i=o[14].deviceId,Ht(e,e.__value)},m(s,a){yt(s,e,a),F(e,n)},p(s,a){a&4&&t!==(t=s[14].label+"")&&Be(n,t),a&4&&i!==(i=s[14].deviceId)&&(e.__value=i,Ht(e,e.__value))},d(s){s&&wt(e)}}}function us(o){let e,t,n,i=o[1]("audio.record")+"",s,a,u,l=o[1]("audio.stop")+"",d,r,c,h,f=o[1]("audio.stop")+"",m,_,g,v,y,k,D=o[1]("audio.resume")+"",M,A,E,P,T,I,B;v=new On({});function W(S,p){return S[2].length===0?ls:as}let b=W(o),L=b(o);return{c(){e=ae("div"),t=ae("div"),n=ae("button"),s=Oe(i),a=Qe(),u=ae("button"),d=Oe(l),c=Qe(),h=ae("button"),m=Oe(f),_=Qe(),g=ae("button"),Ko(v.$$.fragment),y=Qe(),k=ae("button"),M=Oe(D),A=Qe(),E=ae("select"),L.c(),G(n,"id","record"),G(n,"class","record-button svelte-pjb0ac"),G(u,"id","stop"),G(u,"class",r="stop-button "+(o[0].isPaused()?"stop-button-paused":"")+" svelte-pjb0ac"),G(h,"id","stop-paused"),G(h,"class","stop-button-paused svelte-pjb0ac"),G(g,"id","pause"),G(g,"class","pause-button svelte-pjb0ac"),G(k,"id","resume"),G(k,"class","resume-button svelte-pjb0ac"),G(t,"class","wrapper svelte-pjb0ac"),G(E,"id","mic-select"),G(E,"aria-label","Select input device"),E.disabled=P=o[2].length===0,G(E,"class","svelte-pjb0ac"),G(e,"class","controls svelte-pjb0ac")},m(S,p){yt(S,e,p),F(e,t),F(t,n),F(n,s),F(t,a),F(t,u),F(u,d),F(t,c),F(t,h),F(h,m),F(t,_),F(t,g),ts(v,g,null),F(t,y),F(t,k),F(k,M),F(e,A),F(e,E),L.m(E,null),T=!0,I||(B=[Ke(n,"click",o[4]),Ke(u,"click",o[5]),Ke(h,"click",o[6]),Ke(g,"click",o[7]),Ke(k,"click",o[8])],I=!0)},p(S,[p]){(!T||p&2)&&i!==(i=S[1]("audio.record")+"")&&Be(s,i),(!T||p&2)&&l!==(l=S[1]("audio.stop")+"")&&Be(d,l),(!T||p&1&&r!==(r="stop-button "+(S[0].isPaused()?"stop-button-paused":"")+" svelte-pjb0ac"))&&G(u,"class",r),(!T||p&2)&&f!==(f=S[1]("audio.stop")+"")&&Be(m,f),(!T||p&2)&&D!==(D=S[1]("audio.resume")+"")&&Be(M,D),b===(b=W(S))&&L?L.p(S,p):(L.d(1),L=b(S),L&&(L.c(),L.m(E,null))),(!T||p&4&&P!==(P=S[2].length===0))&&(E.disabled=P)},i(S){T||(os(v.$$.fragment,S),T=!0)},o(S){ss(v.$$.fragment,S),T=!1},d(S){S&&wt(e),Qo(v),L.d(),I=!1,ns(B)}}}function ds(o,e,t){let{record:n}=e,{i18n:i}=e,{dispatch:s}=e,a=[],u,l,d,r,c;rs(()=>{u=document.getElementById("record"),l=document.getElementById("pause"),d=document.getElementById("resume"),r=document.getElementById("stop"),c=document.getElementById("stop-paused")});const h=()=>n.startRecording(),f=()=>{n.isPaused()&&(n.resumeRecording(),n.stopRecording()),n.stopRecording()},m=()=>{n.isPaused()&&(n.resumeRecording(),n.stopRecording()),n.stopRecording()},_=()=>n.pauseRecording(),g=()=>n.resumeRecording();return o.$$set=v=>{"record"in v&&t(0,n=v.record),"i18n"in v&&t(1,i=v.i18n),"dispatch"in v&&t(3,s=v.dispatch)},o.$$.update=()=>{if(o.$$.dirty&10)try{let v=[];it.getAvailableAudioDevices().then(y=>{t(2,a=y),y.forEach(k=>{k.deviceId&&v.push(k)}),t(2,a=v)})}catch(v){throw v instanceof DOMException&&v.name=="NotAllowedError"&&s("error",i("audio.allow_recording_access")),v}o.$$.dirty&1&&n.on("record-start",()=>{n.startMic(),u.style.display="none",r.style.display="flex",l.style.display="block"}),o.$$.dirty&1&&n.on("record-end",()=>{n.isPaused()&&(n.resumeRecording(),n.stopRecording()),n.stopMic(),u.style.display="flex",r.style.display="none",l.style.display="none",u.disabled=!1}),o.$$.dirty&1&&n.on("record-pause",()=>{l.style.display="none",d.style.display="block",r.style.display="none",c.style.display="flex"}),o.$$.dirty&1&&n.on("record-resume",()=>{l.style.display="block",d.style.display="none",u.style.display="none",r.style.display="flex",c.style.display="none"})},[n,i,a,s,h,f,m,_,g]}class cs extends Jo{constructor(e){super(),es(this,e,ds,us,is,{record:0,i18n:1,dispatch:3})}}const{SvelteComponent:hs,add_flush_callback:ht,append:ne,attr:Z,bind:ft,binding_callbacks:Re,check_outros:wn,create_component:Xn,destroy_component:Gn,detach:ot,element:he,group_outros:yn,init:fs,insert:st,mount_component:Yn,noop:ms,safe_not_equal:_s,set_data:Zn,space:Ie,text:Jn,transition_in:ve,transition_out:Ne}=window.__gradio__svelte__internal,{onMount:ps}=window.__gradio__svelte__internal;function kn(o){let e,t,n,i,s,a=o[0]==="edit"&&o[16]>0&&Cn(o);function u(r,c){return r[15]?vs:gs}let l=u(o),d=l(o);return{c(){e=he("div"),t=he("time"),t.textContent="0:00",n=Ie(),i=he("div"),a&&a.c(),s=Ie(),d.c(),Z(t,"id","time"),Z(t,"class","svelte-imtedr"),Z(e,"id","timestamps"),Z(e,"class","svelte-imtedr")},m(r,c){st(r,e,c),ne(e,t),o[22](t),ne(e,n),ne(e,i),a&&a.m(i,null),ne(i,s),d.m(i,null)},p(r,c){r[0]==="edit"&&r[16]>0?a?a.p(r,c):(a=Cn(r),a.c(),a.m(i,s)):a&&(a.d(1),a=null),l===(l=u(r))&&d?d.p(r,c):(d.d(1),d=l(r),d&&(d.c(),d.m(i,null)))},d(r){r&&ot(e),o[22](null),a&&a.d(),d.d()}}}function Cn(o){let e,t=o[17](o[16])+"",n;return{c(){e=he("time"),n=Jn(t),Z(e,"id","trim-duration"),Z(e,"class","svelte-imtedr")},m(i,s){st(i,e,s),ne(e,n)},p(i,s){s&65536&&t!==(t=i[17](i[16])+"")&&Zn(n,t)},d(i){i&&ot(e)}}}function gs(o){let e;return{c(){e=he("time"),e.textContent="0:00",Z(e,"id","duration"),Z(e,"class","svelte-imtedr")},m(t,n){st(t,e,n),o[23](e)},p:ms,d(t){t&&ot(e),o[23](null)}}}function vs(o){let e,t=o[17](o[14])+"",n;return{c(){e=he("time"),n=Jn(t),Z(e,"id","duration"),Z(e,"class","svelte-imtedr")},m(i,s){st(i,e,s),ne(e,n)},p(i,s){s&16384&&t!==(t=i[17](i[14])+"")&&Zn(n,t)},d(i){i&&ot(e)}}}function En(o){let e,t,n;function i(a){o[24](a)}let s={i18n:o[1],dispatch:o[2]};return o[6]!==void 0&&(s.record=o[6]),e=new cs({props:s}),Re.push(()=>ft(e,"record",i)),{c(){Xn(e.$$.fragment)},m(a,u){Yn(e,a,u),n=!0},p(a,u){const l={};u&2&&(l.i18n=a[1]),u&4&&(l.dispatch=a[2]),!t&&u&64&&(t=!0,l.record=a[6],ht(()=>t=!1)),e.$set(l)},i(a){n||(ve(e.$$.fragment,a),n=!0)},o(a){Ne(e.$$.fragment,a),n=!1},d(a){Gn(e,a)}}}function Rn(o){let e,t,n,i,s;function a(r){o[25](r)}function u(r){o[26](r)}function l(r){o[27](r)}let d={container:o[12],playing:o[11],audioDuration:o[13],i18n:o[1],interactive:!0,handle_trim_audio:o[18],showRedo:!0,handle_reset_value:o[4],waveform_settings:o[3]};return o[5]!==void 0&&(d.waveform=o[5]),o[16]!==void 0&&(d.trimDuration=o[16]),o[0]!==void 0&&(d.mode=o[0]),e=new qn({props:d}),Re.push(()=>ft(e,"waveform",a)),Re.push(()=>ft(e,"trimDuration",u)),Re.push(()=>ft(e,"mode",l)),{c(){Xn(e.$$.fragment)},m(r,c){Yn(e,r,c),s=!0},p(r,c){const h={};c&4096&&(h.container=r[12]),c&2048&&(h.playing=r[11]),c&8192&&(h.audioDuration=r[13]),c&2&&(h.i18n=r[1]),c&16&&(h.handle_reset_value=r[4]),c&8&&(h.waveform_settings=r[3]),!t&&c&32&&(t=!0,h.waveform=r[5],ht(()=>t=!1)),!n&&c&65536&&(n=!0,h.trimDuration=r[16],ht(()=>n=!1)),!i&&c&1&&(i=!0,h.mode=r[0],ht(()=>i=!1)),e.$set(h)},i(r){s||(ve(e.$$.fragment,r),s=!0)},o(r){Ne(e.$$.fragment,r),s=!1},d(r){Gn(e,r)}}}function bs(o){let e,t,n,i,s,a,u,l,d=(o[15]||o[7])&&kn(o),r=o[10]&&!o[7]&&En(o),c=o[5]&&o[7]&&Rn(o);return{c(){e=he("div"),t=he("div"),n=Ie(),i=he("div"),s=Ie(),d&&d.c(),a=Ie(),r&&r.c(),u=Ie(),c&&c.c(),Z(t,"id","microphone"),Z(t,"data-testid","microphone-waveform"),Z(t,"class","svelte-imtedr"),Z(i,"id","recording"),Z(e,"class","component-wrapper svelte-imtedr")},m(h,f){st(h,e,f),ne(e,t),ne(e,n),ne(e,i),o[21](i),ne(e,s),d&&d.m(e,null),ne(e,a),r&&r.m(e,null),ne(e,u),c&&c.m(e,null),l=!0},p(h,[f]){h[15]||h[7]?d?d.p(h,f):(d=kn(h),d.c(),d.m(e,a)):d&&(d.d(1),d=null),h[10]&&!h[7]?r?(r.p(h,f),f&1152&&ve(r,1)):(r=En(h),r.c(),ve(r,1),r.m(e,u)):r&&(yn(),Ne(r,1,1,()=>{r=null}),wn()),h[5]&&h[7]?c?(c.p(h,f),f&160&&ve(c,1)):(c=Rn(h),c.c(),ve(c,1),c.m(e,null)):c&&(yn(),Ne(c,1,1,()=>{c=null}),wn())},i(h){l||(ve(r),ve(c),l=!0)},o(h){Ne(r),Ne(c),l=!1},d(h){h&&ot(e),o[21](null),d&&d.d(),r&&r.d(),c&&c.d()}}}function ws(o,e,t){let{mode:n}=e,{i18n:i}=e,{dispatch:s}=e,{dispatch_blob:a}=e,{waveform_settings:u={}}=e,{handle_reset_value:l}=e,d,r,c=!1,h,f,m=null,_,g,v,y=0,k,D=!1,M=0;const A=()=>{clearInterval(k),t(20,k=setInterval(()=>{t(14,y++,y)},1e3))},E=w=>{const j=Math.floor(w/60),re=`0${Math.round(w)%60}`.slice(-2);return`${j}:${re}`},P=()=>{const w=document.getElementById("microphone");w&&(w.innerHTML=""),d!==void 0&&d.destroy(),w&&(t(10,d=He.create({...u,container:w})),t(6,f=d.registerPlugin(it.create())),f.startMic())},T=()=>{let w=document.getElementById("recording");!m||!w||t(5,r=He.create({container:w,url:m,...u}))},I=async(w,j)=>{t(0,n="edit");const oe=r.getDecodedData();oe&&await Bt(oe,w,j).then(async re=>{await a([re],"change"),r.destroy(),T()}),s("edit")};ps(()=>{P(),window.addEventListener("keydown",w=>{w.key==="ArrowRight"?mt(r,.1):w.key==="ArrowLeft"&&mt(r,-.1)})});function B(w){Re[w?"unshift":"push"](()=>{h=w,t(12,h)})}function W(w){Re[w?"unshift":"push"](()=>{_=w,t(8,_),t(5,r)})}function b(w){Re[w?"unshift":"push"](()=>{g=w,t(9,g),t(5,r)})}function L(w){f=w,t(6,f)}function S(w){r=w,t(5,r)}function p(w){M=w,t(16,M)}function z(w){n=w,t(0,n)}return o.$$set=w=>{"mode"in w&&t(0,n=w.mode),"i18n"in w&&t(1,i=w.i18n),"dispatch"in w&&t(2,s=w.dispatch),"dispatch_blob"in w&&t(19,a=w.dispatch_blob),"waveform_settings"in w&&t(3,u=w.waveform_settings),"handle_reset_value"in w&&t(4,l=w.handle_reset_value)},o.$$.update=()=>{o.$$.dirty&68&&f?.on("record-start",()=>{A(),t(15,D=!0),s("start_recording");let w=document.getElementById("microphone");w&&(w.style.display="block")}),o.$$.dirty&1572932&&f?.on("record-end",async w=>{t(14,y=0),t(15,D=!1),clearInterval(k),s("stop_recording");const j=await w.arrayBuffer(),re=await new AudioContext().decodeAudioData(j);re&&await Bt(re).then(async Ze=>{await a([Ze],"change")})}),o.$$.dirty&1048644&&f?.on("record-pause",()=>{s("pause_recording"),clearInterval(k)}),o.$$.dirty&64&&f?.on("record-resume",()=>{A()}),o.$$.dirty&544&&r?.on("decode",w=>{t(13,v=w),g&&t(9,g.textContent=E(w),g)}),o.$$.dirty&288&&r?.on("timeupdate",w=>_&&t(8,_.textContent=E(w),_)),o.$$.dirty&36&&r?.on("pause",()=>{s("pause"),t(11,c=!1)}),o.$$.dirty&36&&r?.on("play",()=>{s("play"),t(11,c=!0)}),o.$$.dirty&36&&r?.on("finish",()=>{s("stop"),s("end"),t(11,c=!1)}),o.$$.dirty&192&&f?.on("record-end",w=>{t(7,m=URL.createObjectURL(w));const j=document.getElementById("microphone"),oe=document.getElementById("recording");j&&(j.style.display="none"),oe&&m&&(oe.innerHTML="",T())})},[n,i,s,u,l,r,f,m,_,g,d,c,h,v,y,D,M,E,I,a,k,B,W,b,L,S,p,z]}class ys extends hs{constructor(e){super(),fs(this,e,ws,bs,_s,{mode:0,i18n:1,dispatch:2,dispatch_blob:19,waveform_settings:3,handle_reset_value:4})}}const{SvelteComponent:ks,append:ye,attr:Se,detach:Gt,element:Fe,init:Cs,insert:Yt,listen:Kn,noop:Sn,null_to_empty:Dn,safe_not_equal:Es,set_data:Qn,set_style:Mn,space:Zt,text:$n}=window.__gradio__svelte__internal,{onMount:Rs}=window.__gradio__svelte__internal;function Ss(o){let e,t,n,i=o[4]("audio.record")+"",s,a,u;return{c(){e=Fe("button"),t=Fe("span"),t.innerHTML='<span class="dot"></span>',n=Zt(),s=$n(i),Se(t,"class","record-icon"),Se(e,"class","record-button svelte-16e5vwh")},m(l,d){Yt(l,e,d),ye(e,t),ye(e,n),ye(e,s),a||(u=Kn(e,"click",o[8]),a=!0)},p(l,d){d&16&&i!==(i=l[4]("audio.record")+"")&&Qn(s,i)},d(l){l&&Gt(e),a=!1,u()}}}function Ds(o){let e,t,n,i=(o[1]?o[4]("audio.pause"):o[4]("audio.stop"))+"",s,a,u,l;return{c(){e=Fe("button"),t=Fe("span"),t.innerHTML='<span class="pinger"></span> <span class="dot"></span>',n=Zt(),s=$n(i),Se(t,"class","record-icon"),Se(e,"class",a=Dn(o[1]?"stop-button-paused":"stop-button")+" svelte-16e5vwh")},m(d,r){Yt(d,e,r),ye(e,t),ye(e,n),ye(e,s),u||(l=Kn(e,"click",o[7]),u=!0)},p(d,r){r&18&&i!==(i=(d[1]?d[4]("audio.pause"):d[4]("audio.stop"))+"")&&Qn(s,i),r&2&&a!==(a=Dn(d[1]?"stop-button-paused":"stop-button")+" svelte-16e5vwh")&&Se(e,"class",a)},d(d){d&&Gt(e),u=!1,l()}}}function Ms(o){let e,t,n;function i(u,l){return u[0]?Ds:Ss}let s=i(o),a=s(o);return{c(){e=Fe("div"),t=Fe("div"),n=Zt(),a.c(),Se(t,"id","microphone"),Mn(t,"display",o[0]?"block":"none"),Se(e,"class","mic-wrap svelte-16e5vwh")},m(u,l){Yt(u,e,l),ye(e,t),ye(e,n),a.m(e,null)},p(u,[l]){l&1&&Mn(t,"display",u[0]?"block":"none"),s===(s=i(u))&&a?a.p(u,l):(a.d(1),a=s(u),a&&(a.c(),a.m(e,null)))},i:Sn,o:Sn,d(u){u&&Gt(e),a.d()}}}function Ls(o,e,t){let{recording:n=!1}=e,{paused_recording:i=!1}=e,{stop:s}=e,{record:a}=e,{i18n:u}=e,{waveform_settings:l={}}=e,d,r;Rs(()=>{c()});const c=()=>{d!==void 0&&d.destroy(),d=He.create({...l,height:100,container:"#microphone"}),t(5,r=d.registerPlugin(it.create()))},h=()=>{r.stopMic(),s()},f=()=>{r.startMic(),a()};return o.$$set=m=>{"recording"in m&&t(0,n=m.recording),"paused_recording"in m&&t(1,i=m.paused_recording),"stop"in m&&t(2,s=m.stop),"record"in m&&t(3,a=m.record),"i18n"in m&&t(4,u=m.i18n),"waveform_settings"in m&&t(6,l=m.waveform_settings)},[n,i,s,a,u,r,l,h,f]}class As extends ks{constructor(e){super(),Cs(this,e,Ls,Ms,Es,{recording:0,paused_recording:1,stop:2,record:3,i18n:4,waveform_settings:6})}}const{SvelteComponent:Ps,add_flush_callback:Jt,append:Wt,attr:$e,bind:Kt,binding_callbacks:Qt,check_outros:_t,create_component:le,create_slot:Ts,destroy_component:ue,detach:fe,element:zt,empty:$t,get_all_dirty_from_scope:Ws,get_slot_changes:zs,group_outros:pt,init:Bs,insert:me,listen:Ln,mount_component:de,noop:Os,run_all:Is,safe_not_equal:Ns,space:Ve,transition_in:q,transition_out:U,update_slot_base:Hs}=window.__gradio__svelte__internal,{onDestroy:qs,createEventDispatcher:Us}=window.__gradio__svelte__internal;function js(o){let e,t,n,i,s;e=new qt({props:{i18n:o[9],absolute:!0}}),e.$on("clear",o[17]),e.$on("edit",o[27]);function a(l){o[28](l)}let u={value:o[1],label:o[3],autoplay:o[8],i18n:o[9],dispatch:o[14],dispatch_blob:o[15],waveform_settings:o[10],handle_reset_value:o[11],interactive:!0};return o[13]!==void 0&&(u.mode=o[13]),n=new Fn({props:u}),Qt.push(()=>Kt(n,"mode",a)),{c(){le(e.$$.fragment),t=Ve(),le(n.$$.fragment)},m(l,d){de(e,l,d),me(l,t,d),de(n,l,d),s=!0},p(l,d){const r={};d[0]&512&&(r.i18n=l[9]),e.$set(r);const c={};d[0]&2&&(c.value=l[1]),d[0]&8&&(c.label=l[3]),d[0]&256&&(c.autoplay=l[8]),d[0]&512&&(c.i18n=l[9]),d[0]&1024&&(c.waveform_settings=l[10]),d[0]&2048&&(c.handle_reset_value=l[11]),!i&&d[0]&8192&&(i=!0,c.mode=l[13],Jt(()=>i=!1)),n.$set(c)},i(l){s||(q(e.$$.fragment,l),q(n.$$.fragment,l),s=!0)},o(l){U(e.$$.fragment,l),U(n.$$.fragment,l),s=!1},d(l){l&&fe(t),ue(e,l),ue(n,l)}}}function Fs(o){let e,t,n,i;const s=[Xs,Vs],a=[];function u(l,d){return l[2]==="microphone"?0:l[2]==="upload"?1:-1}return~(e=u(o))&&(t=a[e]=s[e](o)),{c(){t&&t.c(),n=$t()},m(l,d){~e&&a[e].m(l,d),me(l,n,d),i=!0},p(l,d){let r=e;e=u(l),e===r?~e&&a[e].p(l,d):(t&&(pt(),U(a[r],1,1,()=>{a[r]=null}),_t()),~e?(t=a[e],t?t.p(l,d):(t=a[e]=s[e](l),t.c()),q(t,1),t.m(n.parentNode,n)):t=null)},i(l){i||(q(t),i=!0)},o(l){U(t),i=!1},d(l){l&&fe(n),~e&&a[e].d(l)}}}function Vs(o){let e,t,n,i,s;e=new qt({props:{i18n:o[9],absolute:!0}}),e.$on("clear",o[17]);function a(l){o[26](l)}let u={filetype:"audio/aac,audio/midi,audio/mpeg,audio/ogg,audio/wav,audio/x-wav,audio/opus,audio/webm,audio/flac,audio/vnd.rn-realaudio,audio/x-ms-wma,audio/x-aiff,audio/amr,audio/*",root:o[4],$$slots:{default:[Gs]},$$scope:{ctx:o}};return o[0]!==void 0&&(u.dragging=o[0]),n=new pi({props:u}),Qt.push(()=>Kt(n,"dragging",a)),n.$on("load",o[18]),{c(){le(e.$$.fragment),t=Ve(),le(n.$$.fragment)},m(l,d){de(e,l,d),me(l,t,d),de(n,l,d),s=!0},p(l,d){const r={};d[0]&512&&(r.i18n=l[9]),e.$set(r);const c={};d[0]&16&&(c.root=l[4]),d[1]&1&&(c.$$scope={dirty:d,ctx:l}),!i&&d[0]&1&&(i=!0,c.dragging=l[0],Jt(()=>i=!1)),n.$set(c)},i(l){s||(q(e.$$.fragment,l),q(n.$$.fragment,l),s=!0)},o(l){U(e.$$.fragment,l),U(n.$$.fragment,l),s=!1},d(l){l&&fe(t),ue(e,l),ue(n,l)}}}function Xs(o){let e,t,n,i,s,a;e=new qt({props:{i18n:o[9],absolute:!0}}),e.$on("clear",o[17]);const u=[Zs,Ys],l=[];function d(r,c){return r[7]?0:1}return n=d(o),i=l[n]=u[n](o),{c(){le(e.$$.fragment),t=Ve(),i.c(),s=$t()},m(r,c){de(e,r,c),me(r,t,c),l[n].m(r,c),me(r,s,c),a=!0},p(r,c){const h={};c[0]&512&&(h.i18n=r[9]),e.$set(h);let f=n;n=d(r),n===f?l[n].p(r,c):(pt(),U(l[f],1,1,()=>{l[f]=null}),_t(),i=l[n],i?i.p(r,c):(i=l[n]=u[n](r),i.c()),q(i,1),i.m(s.parentNode,s))},i(r){a||(q(e.$$.fragment,r),q(i),a=!0)},o(r){U(e.$$.fragment,r),U(i),a=!1},d(r){r&&(fe(t),fe(s)),ue(e,r),l[n].d(r)}}}function Gs(o){let e;const t=o[24].default,n=Ts(t,o,o[31],null);return{c(){n&&n.c()},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s[1]&1)&&Hs(n,t,i,i[31],e?zs(t,i[31],s,null):Ws(i[31]),null)},i(i){e||(q(n,i),e=!0)},o(i){U(n,i),e=!1},d(i){n&&n.d(i)}}}function Ys(o){let e,t,n;function i(a){o[25](a)}let s={i18n:o[9],dispatch:o[14],dispatch_blob:o[15],waveform_settings:o[10],handle_reset_value:o[11]};return o[13]!==void 0&&(s.mode=o[13]),e=new ys({props:s}),Qt.push(()=>Kt(e,"mode",i)),{c(){le(e.$$.fragment)},m(a,u){de(e,a,u),n=!0},p(a,u){const l={};u[0]&512&&(l.i18n=a[9]),u[0]&1024&&(l.waveform_settings=a[10]),u[0]&2048&&(l.handle_reset_value=a[11]),!t&&u[0]&8192&&(t=!0,l.mode=a[13],Jt(()=>t=!1)),e.$set(l)},i(a){n||(q(e.$$.fragment,a),n=!0)},o(a){U(e.$$.fragment,a),n=!1},d(a){ue(e,a)}}}function Zs(o){let e,t;return e=new As({props:{record:o[16],recording:o[12],stop:o[19],i18n:o[9],waveform_settings:o[10]}}),{c(){le(e.$$.fragment)},m(n,i){de(e,n,i),t=!0},p(n,i){const s={};i[0]&4096&&(s.recording=n[12]),i[0]&512&&(s.i18n=n[9]),i[0]&1024&&(s.waveform_settings=n[10]),e.$set(s)},i(n){t||(q(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function An(o){let e,t,n,i,s,a,u,l,d;return n=new gi({}),a=new Ui({}),{c(){e=zt("span"),t=zt("button"),le(n.$$.fragment),i=Ve(),s=zt("button"),le(a.$$.fragment),$e(t,"class","icon svelte-10shjqk"),$e(t,"aria-label","Upload audio"),$e(s,"class","icon svelte-10shjqk"),$e(s,"aria-label","Record audio"),$e(e,"class","source-selection svelte-10shjqk")},m(r,c){me(r,e,c),Wt(e,t),de(n,t,null),Wt(e,i),Wt(e,s),de(a,s,null),u=!0,l||(d=[Ln(t,"click",o[29]),Ln(s,"click",o[30])],l=!0)},p:Os,i(r){u||(q(n.$$.fragment,r),q(a.$$.fragment,r),u=!0)},o(r){U(n.$$.fragment,r),U(a.$$.fragment,r),u=!1},d(r){r&&fe(e),ue(n),ue(a),l=!1,Is(d)}}}function Js(o){let e,t,n,i,s,a,u;e=new Wn({props:{show_label:o[5],Icon:gt,float:o[2]==="upload"&&o[1]===null,label:o[3]||o[9]("audio.audio")}});const l=[Fs,js],d=[];function r(h,f){return h[1]===null||h[7]?0:1}n=r(o),i=d[n]=l[n](o);let c=o[6].length>1&&An(o);return{c(){le(e.$$.fragment),t=Ve(),i.c(),s=Ve(),c&&c.c(),a=$t()},m(h,f){de(e,h,f),me(h,t,f),d[n].m(h,f),me(h,s,f),c&&c.m(h,f),me(h,a,f),u=!0},p(h,f){const m={};f[0]&32&&(m.show_label=h[5]),f[0]&6&&(m.float=h[2]==="upload"&&h[1]===null),f[0]&520&&(m.label=h[3]||h[9]("audio.audio")),e.$set(m);let _=n;n=r(h),n===_?d[n].p(h,f):(pt(),U(d[_],1,1,()=>{d[_]=null}),_t(),i=d[n],i?i.p(h,f):(i=d[n]=l[n](h),i.c()),q(i,1),i.m(s.parentNode,s)),h[6].length>1?c?(c.p(h,f),f[0]&64&&q(c,1)):(c=An(h),c.c(),q(c,1),c.m(a.parentNode,a)):c&&(pt(),U(c,1,1,()=>{c=null}),_t())},i(h){u||(q(e.$$.fragment,h),q(i),q(c),u=!0)},o(h){U(e.$$.fragment,h),U(i),U(c),u=!1},d(h){h&&(fe(t),fe(s),fe(a)),ue(e,h),d[n].d(h),c&&c.d(h)}}}const Ks=500,Pn=44;function Qs(o,e,t){let{$$slots:n={},$$scope:i}=e,{value:s=null}=e,{label:a}=e,{root:u}=e,{show_label:l=!0}=e,{sources:d=["microphone","upload"]}=e,{pending:r=!1}=e,{streaming:c=!1}=e,{autoplay:h=!1}=e,{i18n:f}=e,{waveform_settings:m={}}=e,{dragging:_}=e,{active_source:g}=e,{handle_reset_value:v=()=>{}}=e,y=!1,k,D="",M,A=[],E=!1,P=!1,T=[],I;function B(){I=[tn(()=>import("./module-94200622.js"),["assets/module-94200622.js","assets/Index-37584f50.js","assets/index-0526d562.js","assets/index-02e0d00d.css","assets/Index-5cf1892e.css"]),tn(()=>import("./module-1791af61.js"),[])]}c&&B();const W=Us(),b=async(R,X)=>{let ce=new File(R,"audio.wav");const ke=await fi([ce],X==="stream");t(1,s=(await mi(ke,u))?.filter(Boolean)[0]),W(X,s)};qs(()=>{c&&k&&k.state!=="inactive"&&k.stop()});async function L(){let R;try{R=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(X){if(!navigator.mediaDevices){W("error",f("audio.no_device_support"));return}if(X instanceof DOMException&&X.name=="NotAllowedError"){W("error",f("audio.allow_recording_access"));return}throw X}if(R!=null){if(c){const[{MediaRecorder:X,register:ce},{connect:ke}]=await Promise.all(I);await ce(await ke()),k=new X(R,{mimeType:"audio/wav"}),k.addEventListener("dataavailable",S)}else k=new MediaRecorder(R),k.addEventListener("dataavailable",X=>{T.push(X.data)}),k.addEventListener("stop",async()=>{t(12,y=!1),await b(T,"change"),await b(T,"stop_recording"),T=[]});P=!0}}async function S(R){let X=await R.data.arrayBuffer(),ce=new Uint8Array(X);if(M||(t(21,M=new Uint8Array(X.slice(0,Pn))),ce=new Uint8Array(X.slice(Pn))),r)A.push(ce);else{let ke=[M].concat(A,[ce]);b(ke,"stream"),t(22,A=[])}}async function p(){t(12,y=!0),W("start_recording"),P||await L(),t(21,M=void 0),c&&k.start(Ks)}function z(){W("change",null),W("clear"),t(13,D=""),t(1,s=null)}function w({detail:R}){t(1,s=R),W("change",R),W("upload",R)}function j(){t(12,y=!1),c&&(W("stop_recording"),k.stop(),r&&t(23,E=!0),b(T,"change"),W("clear"),t(13,D=""))}function oe(R){D=R,t(13,D)}function re(R){_=R,t(0,_)}const Ze=()=>t(13,D="edit");function kt(R){D=R,t(13,D)}const Ct=()=>{z(),t(2,g="upload")},Et=()=>{z(),t(2,g="microphone")};return o.$$set=R=>{"value"in R&&t(1,s=R.value),"label"in R&&t(3,a=R.label),"root"in R&&t(4,u=R.root),"show_label"in R&&t(5,l=R.show_label),"sources"in R&&t(6,d=R.sources),"pending"in R&&t(20,r=R.pending),"streaming"in R&&t(7,c=R.streaming),"autoplay"in R&&t(8,h=R.autoplay),"i18n"in R&&t(9,f=R.i18n),"waveform_settings"in R&&t(10,m=R.waveform_settings),"dragging"in R&&t(0,_=R.dragging),"active_source"in R&&t(2,g=R.active_source),"handle_reset_value"in R&&t(11,v=R.handle_reset_value),"$$scope"in R&&t(31,i=R.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&1&&W("drag",_),o.$$.dirty[0]&15728640&&E&&r===!1&&(t(23,E=!1),M&&A)){let R=[M].concat(A);t(22,A=[]),b(R,"stream")}},[_,s,g,a,u,l,d,c,h,f,m,v,y,D,W,b,p,z,w,j,r,M,A,E,n,oe,re,Ze,kt,Ct,Et,i]}class $s extends Ps{constructor(e){super(),Bs(this,e,Qs,Js,Ns,{value:1,label:3,root:4,show_label:5,sources:6,pending:20,streaming:7,autoplay:8,i18n:9,waveform_settings:10,dragging:0,active_source:2,handle_reset_value:11},null,[-1,-1])}}const xs=$s,{SvelteComponent:er,add_flush_callback:tr,assign:xn,bind:nr,binding_callbacks:ir,check_outros:or,create_component:Me,destroy_component:Le,detach:xt,empty:sr,flush:N,get_spread_object:ei,get_spread_update:ti,group_outros:rr,init:ar,insert:en,mount_component:Ae,safe_not_equal:lr,space:ni,transition_in:_e,transition_out:pe}=window.__gradio__svelte__internal;function ur(o){let e,t;return e=new Tn({props:{variant:o[0]===null&&o[20]==="upload"?"dashed":"solid",border_mode:o[21]?"focus":"base",padding:!1,elem_id:o[2],elem_classes:o[3],visible:o[4],container:o[10],scale:o[11],min_width:o[12],$$slots:{default:[hr]},$$scope:{ctx:o}}}),{c(){Me(e.$$.fragment)},m(n,i){Ae(e,n,i),t=!0},p(n,i){const s={};i[0]&1048577&&(s.variant=n[0]===null&&n[20]==="upload"?"dashed":"solid"),i[0]&2097152&&(s.border_mode=n[21]?"focus":"base"),i[0]&4&&(s.elem_id=n[2]),i[0]&8&&(s.elem_classes=n[3]),i[0]&16&&(s.visible=n[4]),i[0]&1024&&(s.container=n[10]),i[0]&2048&&(s.scale=n[11]),i[0]&4096&&(s.min_width=n[12]),i[0]&4137923|i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(_e(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Le(e,n)}}}function dr(o){let e,t;return e=new Tn({props:{variant:"solid",border_mode:o[21]?"focus":"base",padding:!1,elem_id:o[2],elem_classes:o[3],visible:o[4],container:o[10],scale:o[11],min_width:o[12],$$slots:{default:[fr]},$$scope:{ctx:o}}}),{c(){Me(e.$$.fragment)},m(n,i){Ae(e,n,i),t=!0},p(n,i){const s={};i[0]&2097152&&(s.border_mode=n[21]?"focus":"base"),i[0]&4&&(s.elem_id=n[2]),i[0]&8&&(s.elem_classes=n[3]),i[0]&16&&(s.visible=n[4]),i[0]&1024&&(s.container=n[10]),i[0]&2048&&(s.scale=n[11]),i[0]&4096&&(s.min_width=n[12]),i[0]&844418|i[1]&16384&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(_e(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Le(e,n)}}}function cr(o){let e,t;return e=new vi({props:{i18n:o[18].i18n,type:"audio"}}),{c(){Me(e.$$.fragment)},m(n,i){Ae(e,n,i),t=!0},p(n,i){const s={};i[0]&262144&&(s.i18n=n[18].i18n),e.$set(s)},i(n){t||(_e(e.$$.fragment,n),t=!0)},o(n){pe(e.$$.fragment,n),t=!1},d(n){Le(e,n)}}}function hr(o){let e,t,n,i,s;const a=[{autoscroll:o[18].autoscroll},{i18n:o[18].i18n},o[1]];let u={};for(let r=0;r<a.length;r+=1)u=xn(u,a[r]);e=new Bn({props:u});function l(r){o[30](r)}let d={label:o[7],show_label:o[9],value:o[19],root:o[8],sources:o[6],active_source:o[20],pending:o[16],streaming:o[17],autoplay:o[13],handle_reset_value:o[22],i18n:o[18].i18n,waveform_settings:o[23],$$slots:{default:[cr]},$$scope:{ctx:o}};return o[21]!==void 0&&(d.dragging=o[21]),n=new xs({props:d}),ir.push(()=>nr(n,"dragging",l)),n.$on("change",o[31]),n.$on("stream",o[32]),n.$on("drag",o[33]),n.$on("edit",o[34]),n.$on("play",o[35]),n.$on("pause",o[36]),n.$on("stop",o[37]),n.$on("end",o[38]),n.$on("start_recording",o[39]),n.$on("pause_recording",o[40]),n.$on("stop_recording",o[41]),n.$on("upload",o[42]),n.$on("clear",o[43]),n.$on("error",o[44]),{c(){Me(e.$$.fragment),t=ni(),Me(n.$$.fragment)},m(r,c){Ae(e,r,c),en(r,t,c),Ae(n,r,c),s=!0},p(r,c){const h=c[0]&262146?ti(a,[c[0]&262144&&{autoscroll:r[18].autoscroll},c[0]&262144&&{i18n:r[18].i18n},c[0]&2&&ei(r[1])]):{};e.$set(h);const f={};c[0]&128&&(f.label=r[7]),c[0]&512&&(f.show_label=r[9]),c[0]&524288&&(f.value=r[19]),c[0]&256&&(f.root=r[8]),c[0]&64&&(f.sources=r[6]),c[0]&1048576&&(f.active_source=r[20]),c[0]&65536&&(f.pending=r[16]),c[0]&131072&&(f.streaming=r[17]),c[0]&8192&&(f.autoplay=r[13]),c[0]&262144&&(f.i18n=r[18].i18n),c[0]&262144|c[1]&16384&&(f.$$scope={dirty:c,ctx:r}),!i&&c[0]&2097152&&(i=!0,f.dragging=r[21],tr(()=>i=!1)),n.$set(f)},i(r){s||(_e(e.$$.fragment,r),_e(n.$$.fragment,r),s=!0)},o(r){pe(e.$$.fragment,r),pe(n.$$.fragment,r),s=!1},d(r){r&&xt(t),Le(e,r),Le(n,r)}}}function fr(o){let e,t,n,i;const s=[{autoscroll:o[18].autoscroll},{i18n:o[18].i18n},o[1]];let a={};for(let u=0;u<s.length;u+=1)a=xn(a,s[u]);return e=new Bn({props:a}),n=new Xo({props:{i18n:o[18].i18n,autoplay:o[13],show_label:o[9],show_download_button:o[14],show_share_button:o[15],value:o[19],label:o[7],waveform_settings:o[23]}}),n.$on("share",o[28]),n.$on("error",o[29]),{c(){Me(e.$$.fragment),t=ni(),Me(n.$$.fragment)},m(u,l){Ae(e,u,l),en(u,t,l),Ae(n,u,l),i=!0},p(u,l){const d=l[0]&262146?ti(s,[l[0]&262144&&{autoscroll:u[18].autoscroll},l[0]&262144&&{i18n:u[18].i18n},l[0]&2&&ei(u[1])]):{};e.$set(d);const r={};l[0]&262144&&(r.i18n=u[18].i18n),l[0]&8192&&(r.autoplay=u[13]),l[0]&512&&(r.show_label=u[9]),l[0]&16384&&(r.show_download_button=u[14]),l[0]&32768&&(r.show_share_button=u[15]),l[0]&524288&&(r.value=u[19]),l[0]&128&&(r.label=u[7]),n.$set(r)},i(u){i||(_e(e.$$.fragment,u),_e(n.$$.fragment,u),i=!0)},o(u){pe(e.$$.fragment,u),pe(n.$$.fragment,u),i=!1},d(u){u&&xt(t),Le(e,u),Le(n,u)}}}function mr(o){let e,t,n,i;const s=[dr,ur],a=[];function u(l,d){return l[5]?1:0}return e=u(o),t=a[e]=s[e](o),{c(){t.c(),n=sr()},m(l,d){a[e].m(l,d),en(l,n,d),i=!0},p(l,d){let r=e;e=u(l),e===r?a[e].p(l,d):(rr(),pe(a[r],1,1,()=>{a[r]=null}),or(),t=a[e],t?t.p(l,d):(t=a[e]=s[e](l),t.c()),_e(t,1),t.m(n.parentNode,n))},i(l){i||(_e(t),i=!0)},o(l){pe(t),i=!1},d(l){l&&xt(n),a[e].d(l)}}}function _r(o,e,t){let{elem_id:n=""}=e,{elem_classes:i=[]}=e,{visible:s=!0}=e,{interactive:a}=e,{value:u=null}=e,{sources:l}=e,{label:d}=e,{root:r}=e,{show_label:c}=e,{proxy_url:h}=e,{container:f=!0}=e,{scale:m=null}=e,{min_width:_=void 0}=e,{loading_status:g}=e,{autoplay:v=!1}=e,{show_download_button:y=!0}=e,{show_share_button:k=!1}=e,{waveform_options:D={}}=e,{pending:M}=e,{streaming:A}=e,{gradio:E}=e,P=null,T,I,B=u;const W=()=>{B===null||u===B||t(0,u=B)};let b;const L={height:50,waveColor:D.waveform_color||"#9ca3af",progressColor:D.waveform_progress_color||"#f97316",barWidth:2,barGap:3,barHeight:4,cursorWidth:2,cursorColor:"#ddd5e9",barRadius:10,dragToSeek:!0,mediaControls:D.show_controls},S=C=>E.dispatch("share",C.detail),p=C=>E.dispatch("error",C.detail);function z(C){b=C,t(21,b)}const w=({detail:C})=>t(0,u=C),j=({detail:C})=>{t(0,u=C),E.dispatch("stream",u)},oe=({detail:C})=>t(21,b=C),re=()=>E.dispatch("edit"),Ze=()=>E.dispatch("play"),kt=()=>E.dispatch("pause"),Ct=()=>E.dispatch("stop"),Et=()=>E.dispatch("end"),R=()=>E.dispatch("start_recording"),X=()=>E.dispatch("pause_recording"),ce=()=>E.dispatch("stop_recording"),ke=()=>E.dispatch("upload"),ii=()=>E.dispatch("clear"),oi=({detail:C})=>{t(1,g=g||{}),t(1,g.status="error",g),E.dispatch("error",C)};return o.$$set=C=>{"elem_id"in C&&t(2,n=C.elem_id),"elem_classes"in C&&t(3,i=C.elem_classes),"visible"in C&&t(4,s=C.visible),"interactive"in C&&t(5,a=C.interactive),"value"in C&&t(0,u=C.value),"sources"in C&&t(6,l=C.sources),"label"in C&&t(7,d=C.label),"root"in C&&t(8,r=C.root),"show_label"in C&&t(9,c=C.show_label),"proxy_url"in C&&t(24,h=C.proxy_url),"container"in C&&t(10,f=C.container),"scale"in C&&t(11,m=C.scale),"min_width"in C&&t(12,_=C.min_width),"loading_status"in C&&t(1,g=C.loading_status),"autoplay"in C&&t(13,v=C.autoplay),"show_download_button"in C&&t(14,y=C.show_download_button),"show_share_button"in C&&t(15,k=C.show_share_button),"waveform_options"in C&&t(25,D=C.waveform_options),"pending"in C&&t(16,M=C.pending),"streaming"in C&&t(17,A=C.streaming),"gradio"in C&&t(18,E=C.gradio)},o.$$.update=()=>{o.$$.dirty[0]&16777473&&t(19,T=_i(u,r,h)),o.$$.dirty[0]&134217729&&u&&B===null&&t(27,B=u),o.$$.dirty[0]&67371009&&JSON.stringify(u)!==JSON.stringify(P)&&(t(26,P=u),E.dispatch("change")),o.$$.dirty[0]&64&&l&&t(20,I=l[0])},[u,g,n,i,s,a,l,d,r,c,f,m,_,v,y,k,M,A,E,T,I,b,W,L,h,D,P,B,S,p,z,w,j,oe,re,Ze,kt,Ct,Et,R,X,ce,ke,ii,oi]}class pr extends er{constructor(e){super(),ar(this,e,_r,mr,lr,{elem_id:2,elem_classes:3,visible:4,interactive:5,value:0,sources:6,label:7,root:8,show_label:9,proxy_url:24,container:10,scale:11,min_width:12,loading_status:1,autoplay:13,show_download_button:14,show_share_button:15,waveform_options:25,pending:16,streaming:17,gradio:18},null,[-1,-1])}get elem_id(){return this.$$.ctx[2]}set elem_id(e){this.$$set({elem_id:e}),N()}get elem_classes(){return this.$$.ctx[3]}set elem_classes(e){this.$$set({elem_classes:e}),N()}get visible(){return this.$$.ctx[4]}set visible(e){this.$$set({visible:e}),N()}get interactive(){return this.$$.ctx[5]}set interactive(e){this.$$set({interactive:e}),N()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),N()}get sources(){return this.$$.ctx[6]}set sources(e){this.$$set({sources:e}),N()}get label(){return this.$$.ctx[7]}set label(e){this.$$set({label:e}),N()}get root(){return this.$$.ctx[8]}set root(e){this.$$set({root:e}),N()}get show_label(){return this.$$.ctx[9]}set show_label(e){this.$$set({show_label:e}),N()}get proxy_url(){return this.$$.ctx[24]}set proxy_url(e){this.$$set({proxy_url:e}),N()}get container(){return this.$$.ctx[10]}set container(e){this.$$set({container:e}),N()}get scale(){return this.$$.ctx[11]}set scale(e){this.$$set({scale:e}),N()}get min_width(){return this.$$.ctx[12]}set min_width(e){this.$$set({min_width:e}),N()}get loading_status(){return this.$$.ctx[1]}set loading_status(e){this.$$set({loading_status:e}),N()}get autoplay(){return this.$$.ctx[13]}set autoplay(e){this.$$set({autoplay:e}),N()}get show_download_button(){return this.$$.ctx[14]}set show_download_button(e){this.$$set({show_download_button:e}),N()}get show_share_button(){return this.$$.ctx[15]}set show_share_button(e){this.$$set({show_share_button:e}),N()}get waveform_options(){return this.$$.ctx[25]}set waveform_options(e){this.$$set({waveform_options:e}),N()}get pending(){return this.$$.ctx[16]}set pending(e){this.$$set({pending:e}),N()}get streaming(){return this.$$.ctx[17]}set streaming(e){this.$$set({streaming:e}),N()}get gradio(){return this.$$.ctx[18]}set gradio(e){this.$$set({gradio:e}),N()}}const Or=pr;export{Hr as BaseExample,xs as BaseInteractiveAudio,Fn as BasePlayer,Xo as BaseStaticAudio,Or as default};
//# sourceMappingURL=index-fef9d5f8.js.map
