import{B as cl}from"./Button-457a32dd.js";import{u as qe,c as ml}from"./utils-c3e3db58.js";import{d as dl}from"./index-2f00b72c.js";import{S as bl}from"./ShareButton-acf24595.js";import{S as hl}from"./Index-9fafc20c.js";import"./Index.svelte_svelte_type_style_lang-56e0bd3b.js";import{M as gl}from"./Example.svelte_svelte_type_style_lang-716d1a8b.js";import{g as ze,n as wl}from"./index-8eca98d5.js";import{C as kl,a as vl}from"./Copy-1b5c0932.js";import{B as pl}from"./BlockLabel-f021f41d.js";import"./IconButton-25095eed.js";import"./svelte/svelte.js";const{SvelteComponent:Cl,append:Be,attr:M,detach:yl,init:jl,insert:Sl,noop:ve,safe_not_equal:ql,svg_element:pe}=window.__gradio__svelte__internal;function zl(t){let e,i,l;return{c(){e=pe("svg"),i=pe("path"),l=pe("path"),M(i,"fill","currentColor"),M(i,"d","M17.74 30L16 29l4-7h6a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h9v2H6a4 4 0 0 1-4-4V8a4 4 0 0 1 4-4h20a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4h-4.84Z"),M(l,"fill","currentColor"),M(l,"d","M8 10h16v2H8zm0 6h10v2H8z"),M(e,"xmlns","http://www.w3.org/2000/svg"),M(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),M(e,"aria-hidden","true"),M(e,"role","img"),M(e,"class","iconify iconify--carbon"),M(e,"width","100%"),M(e,"height","100%"),M(e,"preserveAspectRatio","xMidYMid meet"),M(e,"viewBox","0 0 32 32")},m(n,r){Sl(n,e,r),Be(e,i),Be(e,l)},p:ve,i:ve,o:ve,d(n){n&&yl(e)}}}class Bl extends Cl{constructor(e){super(),jl(this,e,null,zl,ql,{})}}const{SvelteComponent:Hl,append:He,attr:y,detach:Ml,init:Ll,insert:Tl,noop:Me,safe_not_equal:El,svg_element:Ce}=window.__gradio__svelte__internal;function Al(t){let e,i,l,n;return{c(){e=Ce("svg"),i=Ce("path"),l=Ce("path"),y(i,"stroke","currentColor"),y(i,"stroke-width","1.5"),y(i,"stroke-linecap","round"),y(i,"d","M16.472 3.5H4.1a.6.6 0 0 0-.6.6v9.8a.6.6 0 0 0 .6.6h2.768a2 2 0 0 1 1.715.971l2.71 4.517a1.631 1.631 0 0 0 2.961-1.308l-1.022-3.408a.6.6 0 0 1 .574-.772h4.575a2 2 0 0 0 1.93-2.526l-1.91-7A2 2 0 0 0 16.473 3.5Z"),y(l,"stroke","currentColor"),y(l,"stroke-width","1.5"),y(l,"stroke-linecap","round"),y(l,"stroke-linejoin","round"),y(l,"d","M7 14.5v-11"),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"width","15px"),y(e,"height","15px"),y(e,"viewBox","0 0 24 24"),y(e,"fill",n=t[0]?"currentColor":"none"),y(e,"stroke-width","1.5"),y(e,"color","currentColor")},m(r,o){Tl(r,e,o),He(e,i),He(e,l)},p(r,[o]){o&1&&n!==(n=r[0]?"currentColor":"none")&&y(e,"fill",n)},i:Me,o:Me,d(r){r&&Ml(e)}}}function Dl(t,e,i){let{actioned:l}=e;return t.$$set=n=>{"actioned"in n&&i(0,l=n.actioned)},[l]}class Nl extends Hl{constructor(e){super(),Ll(this,e,Dl,Al,El,{actioned:0})}}const{SvelteComponent:Pl,append:Le,attr:j,detach:Il,init:Ul,insert:Vl,noop:Te,safe_not_equal:Zl,svg_element:ye}=window.__gradio__svelte__internal;function Fl(t){let e,i,l,n;return{c(){e=ye("svg"),i=ye("path"),l=ye("path"),j(i,"stroke","currentColor"),j(i,"stroke-width","1.5"),j(i,"stroke-linecap","round"),j(i,"d","M16.472 20H4.1a.6.6 0 0 1-.6-.6V9.6a.6.6 0 0 1 .6-.6h2.768a2 2 0 0 0 1.715-.971l2.71-4.517a1.631 1.631 0 0 1 2.961 1.308l-1.022 3.408a.6.6 0 0 0 .574.772h4.575a2 2 0 0 1 1.93 2.526l-1.91 7A2 2 0 0 1 16.473 20Z"),j(l,"stroke","currentColor"),j(l,"stroke-width","1.5"),j(l,"stroke-linecap","round"),j(l,"stroke-linejoin","round"),j(l,"d","M7 20V9"),j(e,"xmlns","http://www.w3.org/2000/svg"),j(e,"width","15px"),j(e,"height","15px"),j(e,"viewBox","0 0 24 24"),j(e,"fill",n=t[0]?"currentColor":"none"),j(e,"stroke-width","1.5"),j(e,"color","currentColor")},m(r,o){Vl(r,e,o),Le(e,i),Le(e,l)},p(r,[o]){o&1&&n!==(n=r[0]?"currentColor":"none")&&j(e,"fill",n)},i:Te,o:Te,d(r){r&&Il(e)}}}function Ol(t,e,i){let{actioned:l}=e;return t.$$set=n=>{"actioned"in n&&i(0,l=n.actioned)},[l]}class Rl extends Pl{constructor(e){super(),Ul(this,e,Ol,Fl,Zl,{actioned:0})}}const Yl=async t=>(await Promise.all(t.map(async i=>await Promise.all(i.map(async(l,n)=>{if(l===null)return"";let r=n===0?"ðŸ˜ƒ":"ðŸ¤–",o="";if(typeof l=="string"){const s={audio:/<audio.*?src="(\/file=.*?)"/g,video:/<video.*?src="(\/file=.*?)"/g,image:/<img.*?src="(\/file=.*?)".*?\/>|!\[.*?\]\((\/file=.*?)\)/g};o=l;for(let[a,u]of Object.entries(s)){let f;for(;(f=u.exec(l))!==null;){const w=f[1]||f[2],L=await qe(w,"url");o=o.replace(w,L)}}}else{if(!l?.url)return"";const s=await qe(l.url,"url");l.mime_type?.includes("audio")?o=`<audio controls src="${s}"></audio>`:l.mime_type?.includes("video")?o=s:l.mime_type?.includes("image")&&(o=`<img src="${s}" />`)}return`${r}: ${o}`}))))).map(i=>i.join(i[0]!==""&&i[1]!==""?`
`:"")).join(`
`);const{SvelteComponent:Gl,append:Jl,attr:se,check_outros:Ee,create_component:ol,destroy_component:rl,detach:Kl,element:Ql,group_outros:Ae,init:Wl,insert:Xl,listen:$l,mount_component:sl,safe_not_equal:xl,space:et,transition_in:J,transition_out:$}=window.__gradio__svelte__internal,{onDestroy:lt}=window.__gradio__svelte__internal;function De(t){let e,i;return e=new kl({}),{c(){ol(e.$$.fragment)},m(l,n){sl(e,l,n),i=!0},i(l){i||(J(e.$$.fragment,l),i=!0)},o(l){$(e.$$.fragment,l),i=!1},d(l){rl(e,l)}}}function Ne(t){let e,i;return e=new vl({}),{c(){ol(e.$$.fragment)},m(l,n){sl(e,l,n),i=!0},i(l){i||(J(e.$$.fragment,l),i=!0)},o(l){$(e.$$.fragment,l),i=!1},d(l){rl(e,l)}}}function tt(t){let e,i,l,n,r,o,s=!t[0]&&De(),a=t[0]&&Ne();return{c(){e=Ql("button"),s&&s.c(),i=et(),a&&a.c(),se(e,"title","copy"),se(e,"aria-label",l=t[0]?"Copied message":"Copy message"),se(e,"class","svelte-11hlfrc")},m(u,f){Xl(u,e,f),s&&s.m(e,null),Jl(e,i),a&&a.m(e,null),n=!0,r||(o=$l(e,"click",t[1]),r=!0)},p(u,[f]){u[0]?s&&(Ae(),$(s,1,1,()=>{s=null}),Ee()):s?f&1&&J(s,1):(s=De(),s.c(),J(s,1),s.m(e,i)),u[0]?a?f&1&&J(a,1):(a=Ne(),a.c(),J(a,1),a.m(e,null)):a&&(Ae(),$(a,1,1,()=>{a=null}),Ee()),(!n||f&1&&l!==(l=u[0]?"Copied message":"Copy message"))&&se(e,"aria-label",l)},i(u){n||(J(s),J(a),n=!0)},o(u){$(s),$(a),n=!1},d(u){u&&Kl(e),s&&s.d(),a&&a.d(),r=!1,o()}}}function nt(t,e,i){let l=!1,{value:n}=e,r;function o(){i(0,l=!0),r&&clearTimeout(r),r=setTimeout(()=>{i(0,l=!1)},2e3)}async function s(){if("clipboard"in navigator)await navigator.clipboard.writeText(n),o();else{const a=document.createElement("textarea");a.value=n,a.style.position="absolute",a.style.left="-999999px",document.body.prepend(a),a.select();try{document.execCommand("copy"),o()}catch(u){console.error(u)}finally{a.remove()}}}return lt(()=>{r&&clearTimeout(r)}),t.$$set=a=>{"value"in a&&i(2,n=a.value)},[l,s,n]}class it extends Gl{constructor(e){super(),Wl(this,e,nt,tt,xl,{value:2})}}const{SvelteComponent:at,attr:ie,create_component:ot,destroy_component:rt,detach:st,element:ut,init:ft,insert:_t,listen:Pe,mount_component:ct,run_all:mt,safe_not_equal:dt,transition_in:bt,transition_out:ht}=window.__gradio__svelte__internal;function gt(t){let e,i,l,n,r,o,s;return i=new t[3]({props:{actioned:t[2]}}),{c(){e=ut("button"),ot(i.$$.fragment),ie(e,"title",l=t[0]+" message"),ie(e,"aria-label",n=t[2]?`clicked ${t[0]}`:t[0]),ie(e,"class","svelte-3snf3m")},m(a,u){_t(a,e,u),ct(i,e,null),r=!0,o||(s=[Pe(e,"click",t[5]),Pe(e,"keydown",t[6])],o=!0)},p(a,[u]){const f={};u&4&&(f.actioned=a[2]),i.$set(f),(!r||u&1&&l!==(l=a[0]+" message"))&&ie(e,"title",l),(!r||u&5&&n!==(n=a[2]?`clicked ${a[0]}`:a[0]))&&ie(e,"aria-label",n)},i(a){r||(bt(i.$$.fragment,a),r=!0)},o(a){ht(i.$$.fragment,a),r=!1},d(a){a&&st(e),rt(i),o=!1,mt(s)}}}function wt(t,e,i){let{action:l}=e,{handle_action:n}=e,r=!1,o=l==="like"?Rl:Nl;function s(){i(2,r=!0)}const a=()=>{s(),n()},u=f=>{f.key==="Enter"&&(s(),n())};return t.$$set=f=>{"action"in f&&i(0,l=f.action),"handle_action"in f&&i(1,n=f.handle_action)},[l,n,r,o,s,a,u]}class Ie extends at{constructor(e){super(),ft(this,e,wt,gt,dt,{action:0,handle_action:1})}}const{SvelteComponent:kt,attr:ue,detach:vt,element:pt,init:Ct,insert:yt,noop:Ue,safe_not_equal:jt,set_style:Ve}=window.__gradio__svelte__internal;function St(t){let e;return{c(){e=pt("div"),e.innerHTML=`<span class="sr-only">Loading content</span> <div class="dot-flashing svelte-1ofy3w8"></div>
	Â 
	<div class="dot-flashing svelte-1ofy3w8"></div>
	Â 
	<div class="dot-flashing svelte-1ofy3w8"></div>`,ue(e,"class","message pending svelte-1ofy3w8"),ue(e,"role","status"),ue(e,"aria-label","Loading response"),ue(e,"aria-live","polite"),Ve(e,"border-radius",t[0]==="bubble"?"var(--radius-xxl)":"none")},m(i,l){yt(i,e,l)},p(i,[l]){l&1&&Ve(e,"border-radius",i[0]==="bubble"?"var(--radius-xxl)":"none")},i:Ue,o:Ue,d(i){i&&vt(e)}}}function qt(t,e,i){let{layout:l="bubble"}=e;return t.$$set=n=>{"layout"in n&&i(0,l=n.layout)},[l]}class zt extends kt{constructor(e){super(),Ct(this,e,qt,St,jt,{layout:0})}}const{SvelteComponent:Bt,action_destroyer:Ht,append:N,attr:m,binding_callbacks:Mt,bubble:G,check_outros:U,create_component:ee,destroy_component:le,destroy_each:ul,detach:B,element:z,empty:je,ensure_array_like:fe,group_outros:V,init:Lt,insert:H,listen:Q,mount_component:te,noop:W,null_to_empty:Ze,run_all:Se,safe_not_equal:Tt,set_data:Et,set_style:At,space:x,src_url_equal:X,text:Dt,toggle_class:C,transition_in:d,transition_out:k}=window.__gradio__svelte__internal,{beforeUpdate:Nt,afterUpdate:Pt,createEventDispatcher:It}=window.__gradio__svelte__internal;function Fe(t,e,i){const l=t.slice();return l[37]=e[i],l[39]=i,l}function Oe(t,e,i){const l=t.slice();return l[40]=e[i],l[42]=i,l}function Re(t){let e,i,l;return i=new bl({props:{i18n:t[15],formatter:Yl,value:t[0]}}),i.$on("error",t[28]),i.$on("share",t[29]),{c(){e=z("div"),ee(i.$$.fragment),m(e,"class","share-button svelte-1pjfiar")},m(n,r){H(n,e,r),te(i,e,null),l=!0},p(n,r){const o={};r[0]&32768&&(o.i18n=n[15]),r[0]&1&&(o.value=n[0]),i.$set(o)},i(n){l||(d(i.$$.fragment,n),l=!0)},o(n){k(i.$$.fragment,n),l=!1},d(n){n&&B(e),le(i)}}}function Ye(t){let e,i,l=fe(t[0]),n=[];for(let o=0;o<l.length;o+=1)n[o]=$e(Fe(t,l,o));const r=o=>k(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=je()},m(o,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,s);H(o,e,s),i=!0},p(o,s){if(s[0]&1933279){l=fe(o[0]);let a;for(a=0;a<l.length;a+=1){const u=Fe(o,l,a);n[a]?(n[a].p(u,s),d(n[a],1)):(n[a]=$e(u),n[a].c(),d(n[a],1),n[a].m(e.parentNode,e))}for(V(),a=l.length;a<n.length;a+=1)r(a);U()}},i(o){if(!i){for(let s=0;s<l.length;s+=1)d(n[s]);i=!0}},o(o){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)k(n[s]);i=!1},d(o){o&&B(e),ul(n,o)}}}function Ge(t){let e,i,l,n,r,o,s,a,u,f,w,L,P,A,v,I,Z,p=t[8][t[42]]!==null&&Je(t);const F=[Rt,Ot,Ft,Zt,Vt,Ut],q=[];function S(g,h){return h[0]&1&&(r=null),h[0]&1&&(o=null),h[0]&1&&(s=null),typeof g[40]=="string"?0:(r==null&&(r=!!(g[40]!==null&&g[40].file?.mime_type?.includes("audio"))),r?1:(o==null&&(o=!!(g[40]!==null&&g[40].file?.mime_type?.includes("video"))),o?2:(s==null&&(s=!!(g[40]!==null&&g[40].file?.mime_type?.includes("image"))),s?3:g[40]!==null&&g[40].file?.url!==null?4:g[2]&&g[42]===1?5:-1)))}~(a=S(t,[-1,-1]))&&(u=q[a]=F[a](t));function O(){return t[30](t[39],t[42],t[40])}function R(...g){return t[31](t[39],t[42],t[40],...g)}let b=(t[4]&&t[42]!==0||t[7]&&t[40]&&typeof t[40]=="string")&&Ke(t);return{c(){e=z("div"),p&&p.c(),i=x(),l=z("div"),n=z("button"),u&&u.c(),L=x(),b&&b.c(),P=x(),m(n,"data-testid",t[42]==0?"user":"bot"),m(n,"dir",f=t[6]?"rtl":"ltr"),m(n,"aria-label",w=(t[42]==0?"user":"bot")+"'s message:' "+t[40]),m(n,"class","svelte-1pjfiar"),C(n,"latest",t[39]===t[0].length-1),C(n,"message-markdown-disabled",!t[11]),C(n,"selectable",t[3]),At(n,"text-align","left"),m(l,"class","message "+(t[42]==0?"user":"bot")+" svelte-1pjfiar"),C(l,"message-fit",t[16]==="bubble"&&!t[10]),C(l,"panel-full-width",t[16]==="panel"),C(l,"message-bubble-border",t[16]==="bubble"),C(l,"message-markdown-disabled",!t[11]),m(e,"class",A="message-row "+t[16]+" "+(t[42]==0?"user-row":"bot-row")+" svelte-1pjfiar")},m(g,h){H(g,e,h),p&&p.m(e,null),N(e,i),N(e,l),N(l,n),~a&&q[a].m(n,null),N(e,L),b&&b.m(e,null),N(e,P),v=!0,I||(Z=[Q(n,"click",O),Q(n,"keydown",R)],I=!0)},p(g,h){t=g,t[8][t[42]]!==null?p?p.p(t,h):(p=Je(t),p.c(),p.m(e,i)):p&&(p.d(1),p=null);let Y=a;a=S(t,h),a===Y?~a&&q[a].p(t,h):(u&&(V(),k(q[Y],1,1,()=>{q[Y]=null}),U()),~a?(u=q[a],u?u.p(t,h):(u=q[a]=F[a](t),u.c()),d(u,1),u.m(n,null)):u=null),(!v||h[0]&64&&f!==(f=t[6]?"rtl":"ltr"))&&m(n,"dir",f),(!v||h[0]&1&&w!==(w=(t[42]==0?"user":"bot")+"'s message:' "+t[40]))&&m(n,"aria-label",w),(!v||h[0]&1)&&C(n,"latest",t[39]===t[0].length-1),(!v||h[0]&2048)&&C(n,"message-markdown-disabled",!t[11]),(!v||h[0]&8)&&C(n,"selectable",t[3]),(!v||h[0]&66560)&&C(l,"message-fit",t[16]==="bubble"&&!t[10]),(!v||h[0]&65536)&&C(l,"panel-full-width",t[16]==="panel"),(!v||h[0]&65536)&&C(l,"message-bubble-border",t[16]==="bubble"),(!v||h[0]&2048)&&C(l,"message-markdown-disabled",!t[11]),t[4]&&t[42]!==0||t[7]&&t[40]&&typeof t[40]=="string"?b?(b.p(t,h),h[0]&145&&d(b,1)):(b=Ke(t),b.c(),d(b,1),b.m(e,P)):b&&(V(),k(b,1,1,()=>{b=null}),U()),(!v||h[0]&65536&&A!==(A="message-row "+t[16]+" "+(t[42]==0?"user-row":"bot-row")+" svelte-1pjfiar"))&&m(e,"class",A)},i(g){v||(d(u),d(b),v=!0)},o(g){k(u),k(b),v=!1},d(g){g&&B(e),p&&p.d(),~a&&q[a].d(),b&&b.d(),I=!1,Se(Z)}}}function Je(t){let e,i,l;return{c(){e=z("div"),i=z("img"),m(i,"class","avatar-image svelte-1pjfiar"),X(i.src,l=ze(t[8][t[42]],t[13],t[14]))||m(i,"src",l),m(i,"alt",(t[42]==0?"user":"bot")+" avatar"),m(e,"class","avatar-container svelte-1pjfiar")},m(n,r){H(n,e,r),N(e,i)},p(n,r){r[0]&24832&&!X(i.src,l=ze(n[8][n[42]],n[13],n[14]))&&m(i,"src",l)},d(n){n&&B(e)}}}function Ut(t){let e,i;return e=new zt({props:{layout:t[16]}}),{c(){ee(e.$$.fragment)},m(l,n){te(e,l,n),i=!0},p(l,n){const r={};n[0]&65536&&(r.layout=l[16]),e.$set(r)},i(l){i||(d(e.$$.fragment,l),i=!0)},o(l){k(e.$$.fragment,l),i=!1},d(l){le(e,l)}}}function Vt(t){let e,i=(t[40].file?.orig_name||t[40].file?.path)+"",l,n,r;return{c(){e=z("a"),l=Dt(i),m(e,"data-testid","chatbot-file"),m(e,"href",n=t[40].file?.url),m(e,"target","_blank"),m(e,"download",r=window.__is_colab__?null:t[40].file?.orig_name||t[40].file?.path),m(e,"class","svelte-1pjfiar")},m(o,s){H(o,e,s),N(e,l)},p(o,s){s[0]&1&&i!==(i=(o[40].file?.orig_name||o[40].file?.path)+"")&&Et(l,i),s[0]&1&&n!==(n=o[40].file?.url)&&m(e,"href",n),s[0]&1&&r!==(r=window.__is_colab__?null:o[40].file?.orig_name||o[40].file?.path)&&m(e,"download",r)},i:W,o:W,d(o){o&&B(e)}}}function Zt(t){let e,i,l;return{c(){e=z("img"),m(e,"data-testid","chatbot-image"),X(e.src,i=t[40].file?.url)||m(e,"src",i),m(e,"alt",l=t[40].alt_text),m(e,"class","svelte-1pjfiar")},m(n,r){H(n,e,r)},p(n,r){r[0]&1&&!X(e.src,i=n[40].file?.url)&&m(e,"src",i),r[0]&1&&l!==(l=n[40].alt_text)&&m(e,"alt",l)},i:W,o:W,d(n){n&&B(e)}}}function Ft(t){let e,i,l,n,r,o;return{c(){e=z("video"),i=z("track"),m(i,"kind","captions"),m(i,"class","svelte-1pjfiar"),m(e,"data-testid","chatbot-video"),e.controls=!0,X(e.src,l=t[40].file?.url)||m(e,"src",l),m(e,"title",n=t[40].alt_text),m(e,"preload","auto"),m(e,"class","svelte-1pjfiar")},m(s,a){H(s,e,a),N(e,i),r||(o=[Q(e,"play",t[25]),Q(e,"pause",t[26]),Q(e,"ended",t[27])],r=!0)},p(s,a){a[0]&1&&!X(e.src,l=s[40].file?.url)&&m(e,"src",l),a[0]&1&&n!==(n=s[40].alt_text)&&m(e,"title",n)},i:W,o:W,d(s){s&&B(e),r=!1,Se(o)}}}function Ot(t){let e,i,l,n,r;return{c(){e=z("audio"),m(e,"data-testid","chatbot-audio"),e.controls=!0,m(e,"preload","metadata"),X(e.src,i=t[40].file?.url)||m(e,"src",i),m(e,"title",l=t[40].alt_text),m(e,"class","svelte-1pjfiar")},m(o,s){H(o,e,s),n||(r=[Q(e,"play",t[22]),Q(e,"pause",t[23]),Q(e,"ended",t[24])],n=!0)},p(o,s){s[0]&1&&!X(e.src,i=o[40].file?.url)&&m(e,"src",i),s[0]&1&&l!==(l=o[40].alt_text)&&m(e,"title",l)},i:W,o:W,d(o){o&&B(e),n=!1,Se(r)}}}function Rt(t){let e,i;return e=new gl({props:{message:t[40],latex_delimiters:t[1],sanitize_html:t[9],render_markdown:t[11],line_breaks:t[12]}}),e.$on("load",t[18]),{c(){ee(e.$$.fragment)},m(l,n){te(e,l,n),i=!0},p(l,n){const r={};n[0]&1&&(r.message=l[40]),n[0]&2&&(r.latex_delimiters=l[1]),n[0]&512&&(r.sanitize_html=l[9]),n[0]&2048&&(r.render_markdown=l[11]),n[0]&4096&&(r.line_breaks=l[12]),e.$set(r)},i(l){i||(d(e.$$.fragment,l),i=!0)},o(l){k(e.$$.fragment,l),i=!1},d(l){le(e,l)}}}function Ke(t){let e,i,l,n,r=t[4]&&t[42]==1&&Qe(t),o=t[7]&&t[40]&&typeof t[40]=="string"&&We(t);return{c(){e=z("div"),r&&r.c(),i=x(),o&&o.c(),m(e,"class",l="message-buttons-"+(t[42]==0?"user":"bot")+" message-buttons-"+t[16]+" "+(t[8][t[42]]!==null&&"with-avatar")+" svelte-1pjfiar"),C(e,"message-buttons-fit",t[16]==="bubble"&&!t[10]),C(e,"bubble-buttons-user",t[16]==="bubble")},m(s,a){H(s,e,a),r&&r.m(e,null),N(e,i),o&&o.m(e,null),n=!0},p(s,a){s[4]&&s[42]==1?r?(r.p(s,a),a[0]&16&&d(r,1)):(r=Qe(s),r.c(),d(r,1),r.m(e,i)):r&&(V(),k(r,1,1,()=>{r=null}),U()),s[7]&&s[40]&&typeof s[40]=="string"?o?(o.p(s,a),a[0]&129&&d(o,1)):(o=We(s),o.c(),d(o,1),o.m(e,null)):o&&(V(),k(o,1,1,()=>{o=null}),U()),(!n||a[0]&65792&&l!==(l="message-buttons-"+(s[42]==0?"user":"bot")+" message-buttons-"+s[16]+" "+(s[8][s[42]]!==null&&"with-avatar")+" svelte-1pjfiar"))&&m(e,"class",l),(!n||a[0]&66816)&&C(e,"message-buttons-fit",s[16]==="bubble"&&!s[10]),(!n||a[0]&65792)&&C(e,"bubble-buttons-user",s[16]==="bubble")},i(s){n||(d(r),d(o),n=!0)},o(s){k(r),k(o),n=!1},d(s){s&&B(e),r&&r.d(),o&&o.d()}}}function Qe(t){let e,i,l,n;function r(){return t[32](t[39],t[42],t[40])}e=new Ie({props:{action:"like",handle_action:r}});function o(){return t[33](t[39],t[42],t[40])}return l=new Ie({props:{action:"dislike",handle_action:o}}),{c(){ee(e.$$.fragment),i=x(),ee(l.$$.fragment)},m(s,a){te(e,s,a),H(s,i,a),te(l,s,a),n=!0},p(s,a){t=s;const u={};a[0]&1&&(u.handle_action=r),e.$set(u);const f={};a[0]&1&&(f.handle_action=o),l.$set(f)},i(s){n||(d(e.$$.fragment,s),d(l.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),k(l.$$.fragment,s),n=!1},d(s){s&&B(i),le(e,s),le(l,s)}}}function We(t){let e,i;return e=new it({props:{value:t[40]}}),{c(){ee(e.$$.fragment)},m(l,n){te(e,l,n),i=!0},p(l,n){const r={};n[0]&1&&(r.value=l[40]),e.$set(r)},i(l){i||(d(e.$$.fragment,l),i=!0)},o(l){k(e.$$.fragment,l),i=!1},d(l){le(e,l)}}}function Xe(t){let e,i,l=(t[40]!==null||t[2])&&Ge(t);return{c(){l&&l.c(),e=je()},m(n,r){l&&l.m(n,r),H(n,e,r),i=!0},p(n,r){n[40]!==null||n[2]?l?(l.p(n,r),r[0]&5&&d(l,1)):(l=Ge(n),l.c(),d(l,1),l.m(e.parentNode,e)):l&&(V(),k(l,1,1,()=>{l=null}),U())},i(n){i||(d(l),i=!0)},o(n){k(l),i=!1},d(n){n&&B(e),l&&l.d(n)}}}function $e(t){let e,i,l=fe(t[37]),n=[];for(let o=0;o<l.length;o+=1)n[o]=Xe(Oe(t,l,o));const r=o=>k(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=je()},m(o,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,s);H(o,e,s),i=!0},p(o,s){if(s[0]&1933279){l=fe(o[37]);let a;for(a=0;a<l.length;a+=1){const u=Oe(o,l,a);n[a]?(n[a].p(u,s),d(n[a],1)):(n[a]=Xe(u),n[a].c(),d(n[a],1),n[a].m(e.parentNode,e))}for(V(),a=l.length;a<n.length;a+=1)r(a);U()}},i(o){if(!i){for(let s=0;s<l.length;s+=1)d(n[s]);i=!0}},o(o){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)k(n[s]);i=!1},d(o){o&&B(e),ul(n,o)}}}function Yt(t){let e,i,l,n,r,o,s,a=t[5]&&t[0]!==null&&t[0].length>0&&Re(t),u=t[0]!==null&&Ye(t);return{c(){a&&a.c(),e=x(),i=z("div"),l=z("div"),u&&u.c(),m(l,"class","message-wrap svelte-1pjfiar"),C(l,"bubble-gap",t[16]==="bubble"),m(i,"class",n=Ze(t[16]==="bubble"?"bubble-wrap":"panel-wrap")+" svelte-1pjfiar"),m(i,"role","log"),m(i,"aria-label","chatbot conversation"),m(i,"aria-live","polite")},m(f,w){a&&a.m(f,w),H(f,e,w),H(f,i,w),N(i,l),u&&u.m(l,null),t[34](i),r=!0,o||(s=Ht(ml.call(null,l)),o=!0)},p(f,w){f[5]&&f[0]!==null&&f[0].length>0?a?(a.p(f,w),w[0]&33&&d(a,1)):(a=Re(f),a.c(),d(a,1),a.m(e.parentNode,e)):a&&(V(),k(a,1,1,()=>{a=null}),U()),f[0]!==null?u?(u.p(f,w),w[0]&1&&d(u,1)):(u=Ye(f),u.c(),d(u,1),u.m(l,null)):u&&(V(),k(u,1,1,()=>{u=null}),U()),(!r||w[0]&65536)&&C(l,"bubble-gap",f[16]==="bubble"),(!r||w[0]&65536&&n!==(n=Ze(f[16]==="bubble"?"bubble-wrap":"panel-wrap")+" svelte-1pjfiar"))&&m(i,"class",n)},i(f){r||(d(a),d(u),r=!0)},o(f){k(a),k(u),r=!1},d(f){f&&(B(e),B(i)),a&&a.d(f),u&&u.d(),t[34](null),o=!1,s()}}}function Gt(t,e,i){let{value:l}=e,n=null,{latex_delimiters:r}=e,{pending_message:o=!1}=e,{selectable:s=!1}=e,{likeable:a=!1}=e,{show_share_button:u=!1}=e,{rtl:f=!1}=e,{show_copy_button:w=!1}=e,{avatar_images:L=[null,null]}=e,{sanitize_html:P=!0}=e,{bubble_full_width:A=!0}=e,{render_markdown:v=!0}=e,{line_breaks:I=!0}=e,{root:Z}=e,{proxy_url:p}=e,{i18n:F}=e,{layout:q="bubble"}=e,S,O;const R=It();Nt(()=>{O=S&&S.offsetHeight+S.scrollTop>S.scrollHeight-100});const b=()=>{O&&S.scrollTo(0,S.scrollHeight)};Pt(()=>{O&&(b(),S.querySelectorAll("img").forEach(c=>{c.addEventListener("load",()=>{b()})}))});function g(c,T,E){R("select",{index:[c,T],value:E})}function h(c,T,E,ke){R("like",{index:[c,T],value:E,liked:ke})}function Y(c){G.call(this,t,c)}function ae(c){G.call(this,t,c)}function oe(c){G.call(this,t,c)}function re(c){G.call(this,t,c)}function de(c){G.call(this,t,c)}function be(c){G.call(this,t,c)}function he(c){G.call(this,t,c)}function ge(c){G.call(this,t,c)}const we=(c,T,E)=>g(c,T,E),_=(c,T,E,ke)=>{ke.key==="Enter"&&g(c,T,E)},ne=(c,T,E)=>h(c,T,E,!0),fl=(c,T,E)=>h(c,T,E,!1);function _l(c){Mt[c?"unshift":"push"](()=>{S=c,i(17,S)})}return t.$$set=c=>{"value"in c&&i(0,l=c.value),"latex_delimiters"in c&&i(1,r=c.latex_delimiters),"pending_message"in c&&i(2,o=c.pending_message),"selectable"in c&&i(3,s=c.selectable),"likeable"in c&&i(4,a=c.likeable),"show_share_button"in c&&i(5,u=c.show_share_button),"rtl"in c&&i(6,f=c.rtl),"show_copy_button"in c&&i(7,w=c.show_copy_button),"avatar_images"in c&&i(8,L=c.avatar_images),"sanitize_html"in c&&i(9,P=c.sanitize_html),"bubble_full_width"in c&&i(10,A=c.bubble_full_width),"render_markdown"in c&&i(11,v=c.render_markdown),"line_breaks"in c&&i(12,I=c.line_breaks),"root"in c&&i(13,Z=c.root),"proxy_url"in c&&i(14,p=c.proxy_url),"i18n"in c&&i(15,F=c.i18n),"layout"in c&&i(16,q=c.layout)},t.$$.update=()=>{t.$$.dirty[0]&2097153&&(dl(l,n)||(i(21,n=l),R("change")))},[l,r,o,s,a,u,f,w,L,P,A,v,I,Z,p,F,q,S,b,g,h,n,Y,ae,oe,re,de,be,he,ge,we,_,ne,fl,_l]}class Jt extends Bt{constructor(e){super(),Lt(this,e,Gt,Yt,Tt,{value:0,latex_delimiters:1,pending_message:2,selectable:3,likeable:4,show_share_button:5,rtl:6,show_copy_button:7,avatar_images:8,sanitize_html:9,bubble_full_width:10,render_markdown:11,line_breaks:12,root:13,proxy_url:14,i18n:15,layout:16},null,[-1,-1])}}const Kt=Jt;const{SvelteComponent:Qt,append:Wt,assign:Xt,attr:$t,check_outros:xe,create_component:_e,destroy_component:ce,detach:el,element:xt,get_spread_object:en,get_spread_update:ln,group_outros:ll,init:tn,insert:tl,mount_component:me,safe_not_equal:nn,space:nl,transition_in:D,transition_out:K}=window.__gradio__svelte__internal;function il(t){let e,i;const l=[{autoscroll:t[21].autoscroll},{i18n:t[21].i18n},t[23],{show_progress:t[23].show_progress==="hidden"?"hidden":"minimal"}];let n={};for(let r=0;r<l.length;r+=1)n=Xt(n,l[r]);return e=new hl({props:n}),{c(){_e(e.$$.fragment)},m(r,o){me(e,r,o),i=!0},p(r,o){const s=o[0]&10485760?ln(l,[o[0]&2097152&&{autoscroll:r[21].autoscroll},o[0]&2097152&&{i18n:r[21].i18n},o[0]&8388608&&en(r[23]),o[0]&8388608&&{show_progress:r[23].show_progress==="hidden"?"hidden":"minimal"}]):{};e.$set(s)},i(r){i||(D(e.$$.fragment,r),i=!0)},o(r){K(e.$$.fragment,r),i=!1},d(r){ce(e,r)}}}function al(t){let e,i;return e=new pl({props:{show_label:t[7],Icon:Bl,float:!1,label:t[6]||"Chatbot"}}),{c(){_e(e.$$.fragment)},m(l,n){me(e,l,n),i=!0},p(l,n){const r={};n[0]&128&&(r.show_label=l[7]),n[0]&64&&(r.label=l[6]||"Chatbot"),e.$set(r)},i(l){i||(D(e.$$.fragment,l),i=!0)},o(l){K(e.$$.fragment,l),i=!1},d(l){ce(e,l)}}}function an(t){let e,i,l,n,r,o=t[23]&&il(t),s=t[7]&&al(t);return n=new Kt({props:{i18n:t[21].i18n,selectable:t[10],likeable:t[11],show_share_button:t[12],value:t[25],latex_delimiters:t[20],render_markdown:t[18],pending_message:t[23]?.status==="pending",rtl:t[13],show_copy_button:t[14],avatar_images:t[22],sanitize_html:t[15],bubble_full_width:t[16],line_breaks:t[19],layout:t[17],proxy_url:t[9],root:t[8]}}),n.$on("change",t[26]),n.$on("select",t[27]),n.$on("like",t[28]),n.$on("share",t[29]),n.$on("error",t[30]),{c(){o&&o.c(),e=nl(),i=xt("div"),s&&s.c(),l=nl(),_e(n.$$.fragment),$t(i,"class","wrapper svelte-nab2ao")},m(a,u){o&&o.m(a,u),tl(a,e,u),tl(a,i,u),s&&s.m(i,null),Wt(i,l),me(n,i,null),r=!0},p(a,u){a[23]?o?(o.p(a,u),u[0]&8388608&&D(o,1)):(o=il(a),o.c(),D(o,1),o.m(e.parentNode,e)):o&&(ll(),K(o,1,1,()=>{o=null}),xe()),a[7]?s?(s.p(a,u),u[0]&128&&D(s,1)):(s=al(a),s.c(),D(s,1),s.m(i,l)):s&&(ll(),K(s,1,1,()=>{s=null}),xe());const f={};u[0]&2097152&&(f.i18n=a[21].i18n),u[0]&1024&&(f.selectable=a[10]),u[0]&2048&&(f.likeable=a[11]),u[0]&4096&&(f.show_share_button=a[12]),u[0]&33554432&&(f.value=a[25]),u[0]&1048576&&(f.latex_delimiters=a[20]),u[0]&262144&&(f.render_markdown=a[18]),u[0]&8388608&&(f.pending_message=a[23]?.status==="pending"),u[0]&8192&&(f.rtl=a[13]),u[0]&16384&&(f.show_copy_button=a[14]),u[0]&4194304&&(f.avatar_images=a[22]),u[0]&32768&&(f.sanitize_html=a[15]),u[0]&65536&&(f.bubble_full_width=a[16]),u[0]&524288&&(f.line_breaks=a[19]),u[0]&131072&&(f.layout=a[17]),u[0]&512&&(f.proxy_url=a[9]),u[0]&256&&(f.root=a[8]),n.$set(f)},i(a){r||(D(o),D(s),D(n.$$.fragment,a),r=!0)},o(a){K(o),K(s),K(n.$$.fragment,a),r=!1},d(a){a&&(el(e),el(i)),o&&o.d(a),s&&s.d(),ce(n)}}}function on(t){let e,i;return e=new cl({props:{elem_id:t[0],elem_classes:t[1],visible:t[2],padding:!1,scale:t[4],min_width:t[5],height:t[24],allow_overflow:!1,$$slots:{default:[an]},$$scope:{ctx:t}}}),{c(){_e(e.$$.fragment)},m(l,n){me(e,l,n),i=!0},p(l,n){const r={};n[0]&1&&(r.elem_id=l[0]),n[0]&2&&(r.elem_classes=l[1]),n[0]&4&&(r.visible=l[2]),n[0]&16&&(r.scale=l[4]),n[0]&32&&(r.min_width=l[5]),n[0]&16777216&&(r.height=l[24]),n[0]&50331592|n[1]&4&&(r.$$scope={dirty:n,ctx:l}),e.$set(r)},i(l){i||(D(e.$$.fragment,l),i=!0)},o(l){K(e.$$.fragment,l),i=!1},d(l){ce(e,l)}}}function rn(t,e,i){let{elem_id:l=""}=e,{elem_classes:n=[]}=e,{visible:r=!0}=e,{value:o=[]}=e,{scale:s=null}=e,{min_width:a=void 0}=e,{label:u}=e,{show_label:f=!0}=e,{root:w}=e,{proxy_url:L}=e,{_selectable:P=!1}=e,{likeable:A=!1}=e,{show_share_button:v=!1}=e,{rtl:I=!1}=e,{show_copy_button:Z=!1}=e,{sanitize_html:p=!0}=e,{bubble_full_width:F=!0}=e,{layout:q="bubble"}=e,{render_markdown:S=!0}=e,{line_breaks:O=!0}=e,{latex_delimiters:R}=e,{gradio:b}=e,{avatar_images:g=[null,null]}=e,h;const Y=_=>_.replace('src="/file',`src="${w}file`);function ae(_){return _===null?_:{file:wl(_?.file,w,L),alt_text:_?.alt_text}}let{loading_status:oe=void 0}=e,{height:re=400}=e;const de=()=>b.dispatch("change",o),be=_=>b.dispatch("select",_.detail),he=_=>b.dispatch("like",_.detail),ge=_=>b.dispatch("share",_.detail),we=_=>b.dispatch("error",_.detail);return t.$$set=_=>{"elem_id"in _&&i(0,l=_.elem_id),"elem_classes"in _&&i(1,n=_.elem_classes),"visible"in _&&i(2,r=_.visible),"value"in _&&i(3,o=_.value),"scale"in _&&i(4,s=_.scale),"min_width"in _&&i(5,a=_.min_width),"label"in _&&i(6,u=_.label),"show_label"in _&&i(7,f=_.show_label),"root"in _&&i(8,w=_.root),"proxy_url"in _&&i(9,L=_.proxy_url),"_selectable"in _&&i(10,P=_._selectable),"likeable"in _&&i(11,A=_.likeable),"show_share_button"in _&&i(12,v=_.show_share_button),"rtl"in _&&i(13,I=_.rtl),"show_copy_button"in _&&i(14,Z=_.show_copy_button),"sanitize_html"in _&&i(15,p=_.sanitize_html),"bubble_full_width"in _&&i(16,F=_.bubble_full_width),"layout"in _&&i(17,q=_.layout),"render_markdown"in _&&i(18,S=_.render_markdown),"line_breaks"in _&&i(19,O=_.line_breaks),"latex_delimiters"in _&&i(20,R=_.latex_delimiters),"gradio"in _&&i(21,b=_.gradio),"avatar_images"in _&&i(22,g=_.avatar_images),"loading_status"in _&&i(23,oe=_.loading_status),"height"in _&&i(24,re=_.height)},t.$$.update=()=>{t.$$.dirty[0]&8&&i(25,h=o?o.map(([_,ne])=>[typeof _=="string"?Y(_):ae(_),typeof ne=="string"?Y(ne):ae(ne)]):[])},[l,n,r,o,s,a,u,f,w,L,P,A,v,I,Z,p,F,q,S,O,R,b,g,oe,re,h,de,be,he,ge,we]}class vn extends Qt{constructor(e){super(),tn(this,e,rn,on,nn,{elem_id:0,elem_classes:1,visible:2,value:3,scale:4,min_width:5,label:6,show_label:7,root:8,proxy_url:9,_selectable:10,likeable:11,show_share_button:12,rtl:13,show_copy_button:14,sanitize_html:15,bubble_full_width:16,layout:17,render_markdown:18,line_breaks:19,latex_delimiters:20,gradio:21,avatar_images:22,loading_status:23,height:24},null,[-1,-1])}}export{Kt as BaseChatBot,vn as default};
//# sourceMappingURL=Index-c8cc5e34.js.map
