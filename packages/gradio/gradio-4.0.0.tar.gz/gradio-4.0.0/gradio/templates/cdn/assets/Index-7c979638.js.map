{"version":3,"file":"Index-7c979638.js","sources":["../../../../js/uploadbutton/shared/UploadButton.svelte","../../../../js/uploadbutton/Index.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { tick, createEventDispatcher } from \"svelte\";\n\timport { BaseButton } from \"@gradio/button\";\n\timport { upload, prepare_files, type FileData } from \"@gradio/client\";\n\n\texport let elem_id = \"\";\n\texport let elem_classes: string[] = [];\n\texport let visible = true;\n\texport let label: string;\n\texport let value: null | FileData | FileData[];\n\texport let file_count: string;\n\texport let file_types: string[] = [];\n\texport let root: string;\n\texport let size: \"sm\" | \"lg\" = \"lg\";\n\texport let scale: number | null = null;\n\texport let min_width: number | undefined = undefined;\n\texport let variant: \"primary\" | \"secondary\" | \"stop\" = \"secondary\";\n\texport let disabled = false;\n\n\tconst dispatch = createEventDispatcher();\n\n\tlet hidden_upload: HTMLInputElement;\n\tlet accept_file_types: string | null;\n\n\tif (file_types == null) {\n\t\taccept_file_types = null;\n\t} else {\n\t\tfile_types = file_types.map((x) => {\n\t\t\tif (x.startsWith(\".\")) {\n\t\t\t\treturn x;\n\t\t\t}\n\t\t\treturn x + \"/*\";\n\t\t});\n\t\taccept_file_types = file_types.join(\", \");\n\t}\n\n\tfunction openFileUpload(): void {\n\t\thidden_upload.click();\n\t}\n\n\tasync function loadFiles(files: FileList): Promise<void> {\n\t\tlet _files: File[] = Array.from(files);\n\t\tif (!files.length) {\n\t\t\treturn;\n\t\t}\n\t\tif (file_count === \"single\") {\n\t\t\t_files = [files[0]];\n\t\t}\n\t\tlet all_file_data = await prepare_files(_files);\n\t\tawait tick();\n\n\t\tall_file_data = (await upload(all_file_data, root))?.filter(\n\t\t\t(x) => x !== null\n\t\t) as FileData[];\n\t\tdispatch(\"change\", all_file_data);\n\t\tdispatch(\"upload\", all_file_data);\n\t\tvalue = all_file_data;\n\t}\n\n\tasync function loadFilesFromUpload(e: Event): Promise<void> {\n\t\tconst target = e.target as HTMLInputElement;\n\n\t\tif (!target.files) return;\n\t\tawait loadFiles(target.files);\n\t}\n\n\tfunction clearInputValue(e: Event): void {\n\t\tconst target = e.target as HTMLInputElement;\n\t\tif (target.value) target.value = \"\";\n\t}\n</script>\n\n<input\n\tclass=\"hide\"\n\taccept={accept_file_types}\n\ttype=\"file\"\n\tbind:this={hidden_upload}\n\ton:change={loadFilesFromUpload}\n\ton:click={clearInputValue}\n\tmultiple={file_count === \"multiple\" || undefined}\n\twebkitdirectory={file_count === \"directory\" || undefined}\n\tmozdirectory={file_count === \"directory\" || undefined}\n\tdata-testid=\"{label}-upload-button\"\n/>\n\n<BaseButton\n\t{size}\n\t{variant}\n\t{elem_id}\n\t{elem_classes}\n\t{visible}\n\ton:click={openFileUpload}\n\t{scale}\n\t{min_width}\n\t{disabled}\n>\n\t<slot />\n</BaseButton>\n\n<style>\n\t.hide {\n\t\tdisplay: none;\n\t}\n</style>\n","<script lang=\"ts\" context=\"module\">\n\texport { default as BaseUploadButton } from \"./shared/UploadButton.svelte\";\n</script>\n\n<script lang=\"ts\">\n\timport type { Gradio } from \"@gradio/utils\";\n\timport type { FileData } from \"@gradio/client\";\n\timport UploadButton from \"./shared/UploadButton.svelte\";\n\n\texport let elem_id = \"\";\n\texport let elem_classes: string[] = [];\n\texport let visible = true;\n\texport let label: string;\n\texport let value: null | FileData | FileData[];\n\texport let file_count: string;\n\texport let file_types: string[] = [];\n\texport let root: string;\n\texport let size: \"sm\" | \"lg\" = \"lg\";\n\texport let scale: number | null = null;\n\texport let min_width: number | undefined = undefined;\n\texport let variant: \"primary\" | \"secondary\" | \"stop\" = \"secondary\";\n\texport let gradio: Gradio<{\n\t\tchange: never;\n\t\tupload: never;\n\t\tclick: never;\n\t}>;\n\texport let interactive: boolean;\n\n\t$: disabled = !interactive;\n\n\tasync function handle_event(\n\t\tdetail: null | FileData | FileData[],\n\t\tevent: \"change\" | \"upload\"\n\t): Promise<void> {\n\t\tvalue = detail;\n\t\tgradio.dispatch(event);\n\t}\n</script>\n\n<UploadButton\n\t{elem_id}\n\t{elem_classes}\n\t{visible}\n\t{file_count}\n\t{file_types}\n\t{size}\n\t{scale}\n\t{min_width}\n\t{root}\n\t{value}\n\t{disabled}\n\t{variant}\n\t{label}\n\ton:click={() => gradio.dispatch(\"click\")}\n\ton:change={({ detail }) => handle_event(detail, \"change\")}\n\ton:upload={({ detail }) => handle_event(detail, \"upload\")}\n>\n\t{gradio.i18n(label)}\n</UploadButton>\n"],"names":["createEventDispatcher","ctx","insert","target","input","anchor","clearInputValue","e","elem_id","$$props","elem_classes","visible","label","value","file_count","file_types","root","size","scale","min_width","variant","disabled","dispatch","hidden_upload","accept_file_types","x","openFileUpload","loadFiles","files","_files","all_file_data","prepare_files","tick","upload","$$invalidate","loadFilesFromUpload","$$value","set_data","t","t_value","gradio","interactive","handle_event","detail","event","change_handler","upload_handler"],"mappings":"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"}