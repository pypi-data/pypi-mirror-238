image: python:latest

stages:
  - deploy

deploy-library:
  stage: deploy
  script:
    - pip install -U twine pip build
    - python3 -m build
    - TWINE_PASSWORD=${PYPI_PASSWORD} TWINE_USERNAME=${PYPI_USERNAME} python3 -m twine upload dist/*

  only:
    - main
