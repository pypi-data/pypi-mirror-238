{% load i18n admin_urls static admin_list spags %}
<n-form v-bind="getBindValue"  ref="formElRef">
    <n-grid v-bind="getGrid">
        {% block search %}
            {% search_form cl %}
        {% endblock %}
        <n-gi v-for="i in filters">
            <template v-if="i.field_generic != i.key" :key="i.key">
                <n-form-item :label="i.title" :path="i.key">
                    <!--标签名右侧温馨提示-->
                    <n-tooltip trigger="hover">
                        <template #trigger>
                            <n-icon size="18" class="text-gray-400 cursor-pointer">
                                <i class="fa-regular fa-circle-question"></i>
                            </n-icon>
                        </template>
                        未设置提示
                    </n-tooltip>
                    <n-select :placeholder="i.placeholder" :options="i.options" v-model:value="i.value" clearable></n-select>
                </n-form-item>
            </template>
            <template v-else>
                <n-form-item :label="i.title" path="">
                    <!--标签名右侧温馨提示-->
                    <n-tooltip trigger="hover">
                        <template #trigger>
                            <n-icon size="18" class="text-gray-400 cursor-pointer">
                                <i class="fa-regular fa-circle-question"></i>
                            </n-icon>
                        </template>
                        未设置提示
                    </n-tooltip>
                    <n-date-picker
                        v-model:value="i.value"
                        type="datetimerange"
                        clearable
                    ></n-date-picker>
                </n-form-item>
            </template>
        </n-gi>
        <n-gi>
            <n-space align="center"
                     :justify="isInline ? 'end' : 'start'"
                     :style="{ 'margin-left': `${isInline ? 12 : 80}px` }">
                <n-button size="medium"
                          type="primary"
                          @click="handleSubmit"
                          :loading="loadingSub">{% translate 'Search' %}
                </n-button>
                <n-button @click="resetFields">重置
                </n-button>
                <n-button type="primary"
                          text
                          icon-placement="right"
                          @click="overflow = !overflow">
                    <template #icon>
                        <n-icon size="14" class="unfold-icon" v-if="overflow">
                            <i class="fa-solid fa-chevron-down"></i>
                        </n-icon>
                        <n-icon size="14" class="unfold-icon" v-else>
                            <i class="fa-solid fa-chevron-up"></i>
                        </n-icon>
                    </template>
                    {% verbatim %}
                    {{ !overflow ? '展开' : '收起' }}
                    {% endverbatim %}
                </n-button>
            </n-space>
        </n-gi>
    </n-grid>
    {% block date_hierarchy %}{% if cl.date_hierarchy %}{% date_hierarchy cl %}{% endif %}{% endblock %}
    {% if cl.result_count != cl.full_result_count %}
        <n-gradient-text type="error">
        {% blocktranslate count counter=cl.result_count %}{{ counter }} result{% plural %}{{ counter }} results{% endblocktranslate %}
        </n-gradient-text>
        <n-gradient-text type="success">
        (<a href="?{% if cl.is_popup %}{{ is_popup_var }}=1{% endif %}">{% if cl.show_full_result_count %}{% blocktranslate with full_result_count=cl.full_result_count %}{{ full_result_count }} total{% endblocktranslate %}{% else %}{% translate "Show all" %}{% endif %}</a>)</span>
        </n-gradient-text>
    {% endif %}
</n-form>
<br>
